webpackJsonp([57],{1683:function(e,a,t){"use strict";(function(e){function r(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var s=t(6),o=l(s),d=t(2),i=l(d),n=t(5),m=l(n),u=t(4),c=l(u),p=t(3),f=l(p),w=t(1667),h=l(w),E=t(11),v=r(E),_=t(46),g=t(569),P=t(1),b=l(P),y=t(13),M=function(a){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.submit=a.submit.bind(a),a.preSubmit=a.preSubmit.bind(a),a.state={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:"",showMfa:!1},a}return(0,f.default)(t,a),(0,m.default)(t,[{key:"preSubmit",value:function(e){var a=this;e.preventDefault();var t={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:""},r=this.refs.emailpassword.value;if(!r)return t.passwordError=v.localizeMessage("claim.email_to_ldap.pwdError","Please enter your password."),void this.setState(t);var l=this.refs.ldapid.value.trim();if(!l)return t.ldapError=v.localizeMessage("claim.email_to_ldap.ldapIdError","Please enter your AD/LDAP ID."),void this.setState(t);var s=this.refs.ldappassword.value;if(!s)return t.ldapPasswordError=v.localizeMessage("claim.email_to_ldap.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(t);t.password=r,t.ldapId=l,t.ldapPassword=s,this.setState(t),(0,_.checkMfa)(this.props.email,function(e){e?a.setState({showMfa:!0}):a.submit(a.props.email,r,"",l,s)},function(e){a.setState({error:e.message})})}},{key:"submit",value:function(e,a,t,r,l){var s=this;(0,g.emailToLdap)(e,a,t,r||this.state.ldapId,l||this.state.ldapPassword,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){s.setState({serverError:e.message,showMfa:!1})})}},{key:"render",value:function(){var a=null,t="form-group";this.state.serverError&&(a=b.default.createElement("div",{className:"form-group has-error"},b.default.createElement("label",{className:"control-label"},this.state.serverError)),t+=" has-error");var r=null,l="form-group";this.state.passwordError&&(r=b.default.createElement("div",{className:"form-group has-error"},b.default.createElement("label",{className:"control-label"},this.state.passwordError)),l+=" has-error");var s=null,o="form-group";this.state.ldapError&&(s=b.default.createElement("div",{className:"form-group has-error"},b.default.createElement("label",{className:"control-label"},this.state.ldapError)),o+=" has-error");var d=null,i="form-group";this.state.ldapPasswordError&&(d=b.default.createElement("div",{className:"form-group has-error"},b.default.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),i+=" has-error");var n=void 0;n=e.window.mm_config.LdapLoginFieldName?e.window.mm_config.LdapLoginFieldName:v.localizeMessage("claim.email_to_ldap.ldapId","AD/LDAP ID");var m=void 0;m=e.window.mm_config.LdapPasswordFieldName?e.window.mm_config.LdapPasswordFieldName:v.localizeMessage("claim.email_to_ldap.ldapPwd","AD/LDAP Password");var u=void 0;return u=this.state.showMfa?b.default.createElement(h.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):b.default.createElement("form",{onSubmit:this.preSubmit,className:t},b.default.createElement("p",null,b.default.createElement(y.FormattedMessage,{id:"claim.email_to_ldap.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with AD/LDAP"})),b.default.createElement("p",null,b.default.createElement(y.FormattedMessage,{id:"claim.email_to_ldap.ssoNote",defaultMessage:"You must already have a valid AD/LDAP account"})),b.default.createElement("p",null,b.default.createElement(y.FormattedMessage,{id:"claim.email_to_ldap.enterPwd",defaultMessage:"Enter the password for your {site} email account",values:{site:e.window.mm_config.SiteName}})),b.default.createElement("input",{type:"text",style:{display:"none"},name:"fakeusernameremembered"}),b.default.createElement("div",{className:l},b.default.createElement("input",{type:"password",className:"form-control",name:"emailPassword",ref:"emailpassword",autoComplete:"off",placeholder:v.localizeMessage("claim.email_to_ldap.pwd","Password"),spellCheck:"false"})),r,b.default.createElement("p",null,b.default.createElement(y.FormattedMessage,{id:"claim.email_to_ldap.enterLdapPwd",defaultMessage:"Enter the ID and password for your AD/LDAP account"})),b.default.createElement("div",{className:o},b.default.createElement("input",{type:"text",className:"form-control",name:"ldapId",ref:"ldapid",autoComplete:"off",placeholder:n,spellCheck:"false"})),s,b.default.createElement("div",{className:i},b.default.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",autoComplete:"off",placeholder:m,spellCheck:"false"})),d,b.default.createElement("button",{type:"submit",className:"btn btn-primary"},b.default.createElement(y.FormattedMessage,{id:"claim.email_to_ldap.switchTo",defaultMessage:"Switch account to AD/LDAP"})),a),b.default.createElement("div",null,b.default.createElement("h3",null,b.default.createElement(y.FormattedMessage,{id:"claim.email_to_ldap.title",defaultMessage:"Switch Email/Password Account to AD/LDAP"})),u)}}]),t}(b.default.Component);a.default=M,M.defaultProps={},M.propTypes={email:b.default.PropTypes.string}}).call(a,t(17))}});
//# sourceMappingURL=57.37d4eb37c4dfd68c6973.js.map