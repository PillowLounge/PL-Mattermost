webpackJsonp([40],{1703:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(6),d=s(o),r=a(2),m=s(r),n=a(4),c=s(n),i=a(5),u=s(i),p=a(3),f=s(p),g=a(1),h=s(g),E=a(20),v=l(E),_=a(11),M=l(_),N=a(336),b=s(N),y=a(13),F=a(332),k=s(F),x=a(37),S=a(243),U=s(S),D=a(8),T=s(D),R="P",A="G",w=function(e){function t(e){(0,m.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.updateDisplayName=a.updateDisplayName.bind(a),a.updateDescription=a.updateDescription.bind(a),a.updateTrigger=a.updateTrigger.bind(a),a.updateUrl=a.updateUrl.bind(a),a.updateMethod=a.updateMethod.bind(a),a.updateUsername=a.updateUsername.bind(a),a.updateIconUrl=a.updateIconUrl.bind(a),a.updateAutocomplete=a.updateAutocomplete.bind(a),a.updateAutocompleteHint=a.updateAutocompleteHint.bind(a),a.updateAutocompleteDescription=a.updateAutocompleteDescription.bind(a),a.state={displayName:"",description:"",trigger:"",url:"",method:R,username:"",iconUrl:"",autocomplete:!1,autocompleteHint:"",autocompleteDescription:"",saving:!1,serverError:"",clientError:null},a}return(0,f.default)(t,e),(0,u.default)(t,null,[{key:"propTypes",get:function(){return{team:h.default.PropTypes.object}}}]),(0,u.default)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.saving){this.setState({saving:!0,serverError:"",clientError:""});var a=this.state.trigger.trim().toLowerCase();0===a.indexOf("/")&&(a=a.substr(1));var l={display_name:this.state.displayName,description:this.state.description,trigger:a,url:this.state.url.trim(),method:this.state.method,username:this.state.username,icon_url:this.state.iconUrl,auto_complete:this.state.autocomplete};return l.auto_complete&&(l.auto_complete_desc=this.state.autocompleteDescription,l.auto_complete_hint=this.state.autocompleteHint),l.trigger?0===l.trigger.indexOf("/")?void this.setState({saving:!1,clientError:h.default.createElement(y.FormattedMessage,{id:"add_command.triggerInvalidSlash",defaultMessage:"A trigger word cannot begin with a /"})}):-1!==l.trigger.indexOf(" ")?void this.setState({saving:!1,clientError:h.default.createElement(y.FormattedMessage,{id:"add_command.triggerInvalidSpace",defaultMessage:"A trigger word must not contain spaces"})}):l.trigger.length<T.default.MIN_TRIGGER_LENGTH||l.trigger.length>T.default.MAX_TRIGGER_LENGTH?void this.setState({saving:!1,clientError:h.default.createElement(y.FormattedMessage,{id:"add_command.triggerInvalidLength",defaultMessage:"A trigger word must contain between {min} and {max} characters",values:{min:T.default.MIN_TRIGGER_LENGTH,max:T.default.MAX_TRIGGER_LENGTH}})}):l.url?void v.addCommand(l,function(e){x.browserHistory.push("/"+t.props.team.name+"/integrations/commands/confirm?type=commands&id="+e.id)},function(e){t.setState({saving:!1,serverError:e.message})}):void this.setState({saving:!1,clientError:h.default.createElement(y.FormattedMessage,{id:"add_command.urlRequired",defaultMessage:"A request URL is required"})}):void this.setState({saving:!1,clientError:h.default.createElement(y.FormattedMessage,{id:"add_command.triggerRequired",defaultMessage:"A trigger word is required"})})}}},{key:"updateDisplayName",value:function(e){this.setState({displayName:e.target.value})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateTrigger",value:function(e){this.setState({trigger:e.target.value})}},{key:"updateUrl",value:function(e){this.setState({url:e.target.value})}},{key:"updateMethod",value:function(e){this.setState({method:e.target.value})}},{key:"updateUsername",value:function(e){this.setState({username:e.target.value})}},{key:"updateIconUrl",value:function(e){this.setState({iconUrl:e.target.value})}},{key:"updateAutocomplete",value:function(e){this.setState({autocomplete:e.target.checked})}},{key:"updateAutocompleteHint",value:function(e){this.setState({autocompleteHint:e.target.value})}},{key:"updateAutocompleteDescription",value:function(e){this.setState({autocompleteDescription:e.target.value})}},{key:"render",value:function(){var e=null;return this.state.autocomplete&&(e=[h.default.createElement("div",{key:"autocompleteHint",className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteHint"},h.default.createElement(y.FormattedMessage,{id:"add_command.autocompleteHint",defaultMessage:"Autocomplete Hint"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"autocompleteHint",type:"text",maxLength:"1024",className:"form-control",value:this.state.autocompleteHint,onChange:this.updateAutocompleteHint,placeholder:M.localizeMessage("add_command.autocompleteHint.placeholder","Example: [Patient Name]")}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.autocompleteHint.help",defaultMessage:"(Optional) Arguments associated with your slash command, displayed as help in the autocomplete list."})))),h.default.createElement("div",{key:"autocompleteDescription",className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocompleteDescription"},h.default.createElement(y.FormattedMessage,{id:"add_command.autocompleteDescription",defaultMessage:"Autocomplete Description"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.autocompleteDescription,onChange:this.updateAutocompleteDescription,placeholder:M.localizeMessage("add_command.autocompleteDescription.placeholder",'Example: "Returns search results for patient records"')}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.autocompleteDescription.help",defaultMessage:"(Optional) Short description of slash command for the autocomplete list."}))))]),h.default.createElement("div",{className:"backstage-content row"},h.default.createElement(b.default,null,h.default.createElement(x.Link,{to:"/"+this.props.team.name+"/integrations/commands"},h.default.createElement(y.FormattedMessage,{id:"installed_command.header",defaultMessage:"Slash Commands"})),h.default.createElement(y.FormattedMessage,{id:"integrations.add",defaultMessage:"Add"})),h.default.createElement("div",{className:"backstage-form"},h.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},h.default.createElement(y.FormattedMessage,{id:"add_command.displayName",defaultMessage:"Display Name"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.displayName.help",defaultMessage:"Display name for your slash command made of up to 64 characters."})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},h.default.createElement(y.FormattedMessage,{id:"add_command.description",defaultMessage:"Description"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.description.help",defaultMessage:"Description for your incoming webhook."})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"trigger"},h.default.createElement(y.FormattedMessage,{id:"add_command.trigger",defaultMessage:"Command Trigger Word"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"trigger",type:"text",maxLength:T.default.MAX_TRIGGER_LENGTH,className:"form-control",value:this.state.trigger,onChange:this.updateTrigger,placeholder:M.localizeMessage("add_command.trigger.placeholder",'Command trigger e.g. "hello" not including the slash')}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.trigger.help",defaultMessage:"Trigger word must be unique, and cannot begin with a slash or contain any spaces."})),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.trigger.helpExamples",defaultMessage:"Examples: client, employee, patient, weather"})),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.trigger.helpReserved",defaultMessage:"Reserved: {link}",values:{link:h.default.createElement("a",{href:"https://docs.mattermost.com/help/messaging/executing-commands.html#built-in-commands",target:"_blank",rel:"noopener noreferrer"},h.default.createElement(y.FormattedMessage,{id:"add_command.trigger.helpReservedLinkText",defaultMessage:"see list of built-in slash commands"}))}})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"url"},h.default.createElement(y.FormattedMessage,{id:"add_command.url",defaultMessage:"Request URL"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"url",type:"text",maxLength:"1024",className:"form-control",value:this.state.url,onChange:this.updateUrl,placeholder:M.localizeMessage("add_command.url.placeholder","Must start with http:// or https://")}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.url.help",defaultMessage:"The callback URL to receive the HTTP POST or GET event request when the slash command is run."})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"method"},h.default.createElement(y.FormattedMessage,{id:"add_command.method",defaultMessage:"Request Method"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("select",{id:"method",className:"form-control",value:this.state.method,onChange:this.updateMethod},h.default.createElement("option",{value:R},M.localizeMessage("add_command.method.post","POST")),h.default.createElement("option",{value:A},M.localizeMessage("add_command.method.get","GET"))),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.method.help",defaultMessage:"The type of command request issued to the Request URL."})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"username"},h.default.createElement(y.FormattedMessage,{id:"add_command.username",defaultMessage:"Response Username"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"username",type:"text",maxLength:"64",className:"form-control",value:this.state.username,onChange:this.updateUsername,placeholder:M.localizeMessage("add_command.username.placeholder","Username")}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.username.help",defaultMessage:'(Optional) Choose a username override for responses for this slash command. Usernames can consist of up to 22 characters consisting of lowercase letters, numbers and they symbols "-", "_", and "." .'})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"iconUrl"},h.default.createElement(y.FormattedMessage,{id:"add_command.iconUrl",defaultMessage:"Response Icon"})),h.default.createElement("div",{className:"col-md-5 col-sm-8"},h.default.createElement("input",{id:"iconUrl",type:"text",maxLength:"1024",className:"form-control",value:this.state.iconUrl,onChange:this.updateIconUrl,placeholder:M.localizeMessage("add_command.iconUrl.placeholder","https://www.example.com/myicon.png")}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.iconUrl.help",defaultMessage:"(Optional) Choose a profile picture override for the post responses to this slash command. Enter the URL of a .png or .jpg file at least 128 pixels by 128 pixels."})))),h.default.createElement("div",{className:"form-group"},h.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"autocomplete"},h.default.createElement(y.FormattedMessage,{id:"add_command.autocomplete",defaultMessage:"Autocomplete"})),h.default.createElement("div",{className:"col-md-5 col-sm-8 checkbox"},h.default.createElement("input",{id:"autocomplete",type:"checkbox",checked:this.state.autocomplete,onChange:this.updateAutocomplete}),h.default.createElement("div",{className:"form__help"},h.default.createElement(y.FormattedMessage,{id:"add_command.autocomplete.help",defaultMessage:"(Optional) Show slash command in autocomplete list."})))),e,h.default.createElement("div",{className:"backstage-form__footer"},h.default.createElement(k.default,{type:"backstage",errors:[this.state.serverError,this.state.clientError]}),h.default.createElement(x.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/commands"},h.default.createElement(y.FormattedMessage,{id:"add_command.cancel",defaultMessage:"Cancel"})),h.default.createElement(U.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},h.default.createElement(y.FormattedMessage,{id:"add_command.save",defaultMessage:"Save"}))))))}}]),t}(h.default.Component);t.default=w}});
//# sourceMappingURL=40.187a92c76f17b3a48891.js.map