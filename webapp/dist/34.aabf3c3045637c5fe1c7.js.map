{"version":3,"sources":["webpack:///34.aabf3c3045637c5fe1c7.js","webpack:///./components/integrations/components/edit_incoming_webhook.jsx"],"names":["webpackJsonp","1709","module","exports","__webpack_require__","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_async_client","AsyncClient","_es","_integration_store","_integration_store2","_integration_actions","_abstract_incoming_webhook","_abstract_incoming_webhook2","_team_store","_team_store2","EditIncomingWebhook","_AbstractIncomingWebh","props","this","_this","__proto__","handleIntegrationChange","bind","originalIncomingHook","addChangeListener","window","mm_config","EnableIncomingWebhooks","loadIncomingHooks","removeChangeListener","_this2","teamId","getCurrentId","setState","hooks","getIncomingWebhooks","loading","hasReceivedIncomingWebhooks","state","filter","hook","id","location","query","displayName","display_name","description","channelId","channel_id","_this3","updateIncomingHook","browserHistory","push","team","name","err","saving","serverError","message","defaultMessage"],"mappings":"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","file":"34.aabf3c3045637c5fe1c7.js","sourcesContent":["webpackJsonp([34],{\n\n/***/ 1709:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(2);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(4);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(3);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _async_client = __webpack_require__(20);\n\nvar AsyncClient = _interopRequireWildcard(_async_client);\n\nvar _es = __webpack_require__(37);\n\nvar _integration_store = __webpack_require__(1660);\n\nvar _integration_store2 = _interopRequireDefault(_integration_store);\n\nvar _integration_actions = __webpack_require__(1664);\n\nvar _abstract_incoming_webhook = __webpack_require__(1675);\n\nvar _abstract_incoming_webhook2 = _interopRequireDefault(_abstract_incoming_webhook);\n\nvar _team_store = __webpack_require__(23);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar EditIncomingWebhook = function (_AbstractIncomingWebh) {\n    (0, _inherits3.default)(EditIncomingWebhook, _AbstractIncomingWebh);\n\n    function EditIncomingWebhook(props) {\n        (0, _classCallCheck3.default)(this, EditIncomingWebhook);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (EditIncomingWebhook.__proto__ || (0, _getPrototypeOf2.default)(EditIncomingWebhook)).call(this, props));\n\n        _this.handleIntegrationChange = _this.handleIntegrationChange.bind(_this);\n        _this.originalIncomingHook = null;\n        return _this;\n    }\n\n    (0, _createClass3.default)(EditIncomingWebhook, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            _integration_store2.default.addChangeListener(this.handleIntegrationChange);\n\n            if (window.mm_config.EnableIncomingWebhooks === 'true') {\n                (0, _integration_actions.loadIncomingHooks)();\n            }\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            _integration_store2.default.removeChangeListener(this.handleIntegrationChange);\n        }\n    }, {\n        key: 'handleIntegrationChange',\n        value: function handleIntegrationChange() {\n            var _this2 = this;\n\n            var teamId = _team_store2.default.getCurrentId();\n\n            this.setState({\n                hooks: _integration_store2.default.getIncomingWebhooks(teamId),\n                loading: !_integration_store2.default.hasReceivedIncomingWebhooks(teamId)\n            });\n\n            if (!this.state.loading) {\n                this.originalIncomingHook = this.state.hooks.filter(function (hook) {\n                    return hook.id === _this2.props.location.query.id;\n                })[0];\n\n                this.setState({\n                    displayName: this.originalIncomingHook.display_name,\n                    description: this.originalIncomingHook.description,\n                    channelId: this.originalIncomingHook.channel_id\n                });\n            }\n        }\n    }, {\n        key: 'performAction',\n        value: function performAction(hook) {\n            var _this3 = this;\n\n            if (this.originalIncomingHook.id) {\n                hook.id = this.originalIncomingHook.id;\n            }\n\n            AsyncClient.updateIncomingHook(hook, function () {\n                _es.browserHistory.push('/' + _this3.props.team.name + '/integrations/incoming_webhooks');\n            }, function (err) {\n                _this3.setState({\n                    saving: false,\n                    serverError: err.message\n                });\n            });\n        }\n    }, {\n        key: 'header',\n        value: function header() {\n            return { id: 'integrations.edit', defaultMessage: 'Edit' };\n        }\n    }, {\n        key: 'footer',\n        value: function footer() {\n            return { id: 'update_incoming_webhook.update', defaultMessage: 'Update' };\n        }\n    }]);\n    return EditIncomingWebhook;\n}(_abstract_incoming_webhook2.default);\n\nexports.default = EditIncomingWebhook;\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 34.aabf3c3045637c5fe1c7.js","// Copyright (c) 2016 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport * as AsyncClient from 'utils/async_client.jsx';\n\nimport {browserHistory} from 'react-router/es6';\nimport IntegrationStore from 'stores/integration_store.jsx';\nimport {loadIncomingHooks} from 'actions/integration_actions.jsx';\n\nimport AbstractIncomingWebhook from './abstract_incoming_webhook.jsx';\nimport TeamStore from 'stores/team_store.jsx';\n\nexport default class EditIncomingWebhook extends AbstractIncomingWebhook {\n    constructor(props) {\n        super(props);\n\n        this.handleIntegrationChange = this.handleIntegrationChange.bind(this);\n        this.originalIncomingHook = null;\n    }\n\n    componentDidMount() {\n        IntegrationStore.addChangeListener(this.handleIntegrationChange);\n\n        if (window.mm_config.EnableIncomingWebhooks === 'true') {\n            loadIncomingHooks();\n        }\n    }\n\n    componentWillUnmount() {\n        IntegrationStore.removeChangeListener(this.handleIntegrationChange);\n    }\n\n    handleIntegrationChange() {\n        const teamId = TeamStore.getCurrentId();\n\n        this.setState({\n            hooks: IntegrationStore.getIncomingWebhooks(teamId),\n            loading: !IntegrationStore.hasReceivedIncomingWebhooks(teamId)\n        });\n\n        if (!this.state.loading) {\n            this.originalIncomingHook = this.state.hooks.filter((hook) => hook.id === this.props.location.query.id)[0];\n\n            this.setState({\n                displayName: this.originalIncomingHook.display_name,\n                description: this.originalIncomingHook.description,\n                channelId: this.originalIncomingHook.channel_id\n            });\n        }\n    }\n\n    performAction(hook) {\n        if (this.originalIncomingHook.id) {\n            hook.id = this.originalIncomingHook.id;\n        }\n\n        AsyncClient.updateIncomingHook(\n            hook,\n            () => {\n                browserHistory.push(`/${this.props.team.name}/integrations/incoming_webhooks`);\n            },\n            (err) => {\n                this.setState({\n                    saving: false,\n                    serverError: err.message\n                });\n            }\n        );\n    }\n\n    header() {\n        return {id: 'integrations.edit', defaultMessage: 'Edit'};\n    }\n\n    footer() {\n        return {id: 'update_incoming_webhook.update', defaultMessage: 'Update'};\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/integrations/components/edit_incoming_webhook.jsx"],"sourceRoot":""}