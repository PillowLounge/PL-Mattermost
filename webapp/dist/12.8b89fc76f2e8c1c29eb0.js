webpackJsonp([12],{1692:function(e,t,a){"use strict";(function(e){function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(107),n=s(i),r=a(36),o=s(r),u=a(6),d=s(u),m=a(2),f=s(m),c=a(4),h=s(c),p=a(5),g=s(p),_=a(3),j=s(_),E=a(2006),y=s(E),v=a(164),b=s(v),M=a(80),k=s(M),C=a(15),N=s(C),w=a(1668),F=a(20),T=l(F),D=a(11),P=l(D),O=a(1),L=s(O),S=a(335),x=a(13),U=function(t){function a(e){(0,f.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,d.default)(a)).call(this,e));return t.updateTitle=t.updateTitle.bind(t),t.handleEmojiChange=t.handleEmojiChange.bind(t),t.handleUserChange=t.handleUserChange.bind(t),t.deleteEmoji=t.deleteEmoji.bind(t),t.updateFilter=t.updateFilter.bind(t),t.state={emojis:k.default.getCustomEmojiMap(),loading:!k.default.hasReceivedCustomEmojis(),filter:"",users:N.default.getProfiles()},t}return(0,j.default)(a,t),(0,g.default)(a,null,[{key:"propTypes",get:function(){return{team:L.default.PropTypes.object,user:L.default.PropTypes.object}}}]),(0,g.default)(a,[{key:"componentDidMount",value:function(){k.default.addChangeListener(this.handleEmojiChange),N.default.addChangeListener(this.handleUserChange),"true"===window.mm_config.EnableCustomEmoji&&(0,w.loadEmoji)(),this.updateTitle()}},{key:"updateTitle",value:function(){var t="";null!=e.window.mm_config.SiteName&&(t=e.window.mm_config.SiteName),document.title=P.localizeMessage("custom_emoji.header","Custom Emoji")+" - "+this.props.team.display_name+" "+t}},{key:"componentWillUnmount",value:function(){k.default.removeChangeListener(this.handleEmojiChange),N.default.removeChangeListener(this.handleUserChange)}},{key:"handleEmojiChange",value:function(){this.setState({emojis:k.default.getCustomEmojiMap(),loading:!k.default.hasReceivedCustomEmojis()})}},{key:"handleUserChange",value:function(){this.setState({users:N.default.getProfiles()})}},{key:"updateFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"deleteEmoji",value:function(e){T.deleteEmoji(e.id)}},{key:"render",value:function(){var e=this.state.filter.toLowerCase(),t=P.isSystemAdmin(this.props.user.roles),a=[];if(this.state.loading)a.push(L.default.createElement("tr",{key:"loading",className:"backstage-list__item backstage-list__empty"},L.default.createElement("td",{colSpan:"4"},L.default.createElement(b.default,{key:"loading"}))));else if(0===this.state.emojis.size)a.push(L.default.createElement("tr",{key:"empty",className:"backstage-list__item backstage-list__empty"},L.default.createElement("td",{colSpan:"4"},L.default.createElement(x.FormattedMessage,{id:"emoji_list.empty",defaultMessage:"No custom emoji found"}))));else{var l=!0,s=!1,i=void 0;try{for(var r,u=(0,o.default)(this.state.emojis);!(l=(r=u.next()).done);l=!0){var d=(0,n.default)(r.value,2),m=d[1],f=null;(t||this.props.user.id===m.creator_id)&&(f=this.deleteEmoji),a.push(L.default.createElement(y.default,{key:m.id,emoji:m,onDelete:f,filter:e,creator:this.state.users[m.creator_id]||{}}))}}catch(e){s=!0,i=e}finally{try{!l&&u.return&&u.return()}finally{if(s)throw i}}}return L.default.createElement("div",{className:"backstage-content emoji-list"},L.default.createElement("div",{className:"backstage-header"},L.default.createElement("h1",null,L.default.createElement(x.FormattedMessage,{id:"emoji_list.header",defaultMessage:"Custom Emoji"})),L.default.createElement(S.Link,{className:"add-link",to:"/"+this.props.team.name+"/emoji/add"},L.default.createElement("button",{type:"button",className:"btn btn-primary"},L.default.createElement(x.FormattedMessage,{id:"emoji_list.add",defaultMessage:"Add Custom Emoji"})))),L.default.createElement("div",{className:"backstage-filters"},L.default.createElement("div",{className:"backstage-filter__search"},L.default.createElement("i",{className:"fa fa-search"}),L.default.createElement("input",{type:"search",className:"form-control",placeholder:P.localizeMessage("emoji_list.search","Search Custom Emoji"),value:this.state.filter,onChange:this.updateFilter,style:{flexGrow:0,flexShrink:0}}))),L.default.createElement("span",{className:"backstage-list__help"},L.default.createElement("p",null,L.default.createElement(x.FormattedMessage,{id:"emoji_list.help",defaultMessage:"Custom emoji are available to everyone on your server. Type ':' in a message box to bring up the emoji selection menu. Other users may need to refresh the page before new emojis appear."})),L.default.createElement("p",null,L.default.createElement(x.FormattedMessage,{id:"emoji_list.help2",defaultMessage:"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'."}))),L.default.createElement("div",{className:"backstage-list"},L.default.createElement("table",{className:"emoji-list__table"},L.default.createElement("thead",null,L.default.createElement("tr",{className:"backstage-list__item emoji-list__table-header"},L.default.createElement("th",{className:"emoji-list__name"},L.default.createElement(x.FormattedMessage,{id:"emoji_list.name",defaultMessage:"Name"})),L.default.createElement("th",{className:"emoji-list__image"},L.default.createElement(x.FormattedMessage,{id:"emoji_list.image",defaultMessage:"Image"})),L.default.createElement("th",{className:"emoji-list__creator"},L.default.createElement(x.FormattedMessage,{id:"emoji_list.creator",defaultMessage:"Creator"})),L.default.createElement("th",{className:"emoji-list_actions"},L.default.createElement(x.FormattedMessage,{id:"emoji_list.actions",defaultMessage:"Actions"})))),L.default.createElement("tbody",null,a))))}}]),a}(L.default.Component);t.default=U}).call(t,a(17))},2005:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),i=l(s),n=a(2),r=l(n),o=a(5),u=l(o),d=a(4),m=l(d),f=a(3),c=l(f),h=a(1),p=l(h),g=a(13),_=a(587),j=l(_),E=function(e){function t(){return(0,r.default)(this,t),(0,m.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,u.default)(t,[{key:"triggerTitle",get:function(){return p.default.createElement(g.FormattedMessage,{id:"emoji_list.delete",defaultMessage:"Delete"})}},{key:"modalTitle",get:function(){return p.default.createElement(g.FormattedMessage,{id:"emoji_list.delete.confirm.title",defaultMessage:"Delete Custom Emoji"})}},{key:"modalMessage",get:function(){return p.default.createElement("div",{className:"alert alert-warning"},p.default.createElement("i",{className:"fa fa-warning"}),p.default.createElement(g.FormattedMessage,{id:"emoji_list.delete.confirm.msg",defaultMessage:"This action permanently deletes the custom emoji. Are you sure you want to delete it?"}))}},{key:"modalConfirmButton",get:function(){return p.default.createElement(g.FormattedMessage,{id:"emoji_list.delete.confirm.button",defaultMessage:"Delete"})}}]),t}(j.default);t.default=E,E.propTypes={onDelete:p.default.PropTypes.func.isRequired}},2006:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),n=s(i),r=a(2),o=s(r),u=a(4),d=s(u),m=a(5),f=s(m),c=a(3),h=s(c),p=a(1),g=s(p),_=a(80),j=s(_),E=a(2005),y=s(E),v=a(11),b=l(v),M=a(13),k=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a}return(0,h.default)(t,e),(0,f.default)(t,null,[{key:"propTypes",get:function(){return{emoji:g.default.PropTypes.object.isRequired,onDelete:g.default.PropTypes.func.isRequired,filter:g.default.PropTypes.string,creator:g.default.PropTypes.object.isRequired}}}]),(0,f.default)(t,[{key:"handleDelete",value:function(e){e.preventDefault(),this.props.onDelete(this.props.emoji)}},{key:"matchesFilter",value:function(e,t,a){return!a||(-1!==e.name.toLowerCase().indexOf(a)||!(!t||!(-1!==t.username.toLowerCase().indexOf(a)||t.first_name&&-1!==t.first_name.toLowerCase().indexOf(a)||t.last_name&&-1!==t.last_name.toLowerCase().indexOf(a)||t.nickname&&-1!==t.nickname.toLowerCase().indexOf(a))))}},{key:"render",value:function(){var e=this.props.emoji,t=this.props.creator,a=this.props.filter?this.props.filter.toLowerCase():"";if(!this.matchesFilter(e,t,a))return null;var l=void 0;t?(l=b.displayUsernameForUser(t))!==t.username&&(l+=" (@"+t.username+")"):l=g.default.createElement(M.FormattedMessage,{id:"emoji_list.somebody",defaultMessage:"Somebody on another team"});var s=null;return this.props.onDelete&&(s=g.default.createElement(y.default,{onDelete:this.handleDelete})),g.default.createElement("tr",{className:"backstage-list__item"},g.default.createElement("td",{className:"emoji-list__name"},":"+e.name+":"),g.default.createElement("td",{className:"emoji-list__image"},g.default.createElement("span",{className:"emoticon",style:{backgroundImage:"url("+j.default.getEmojiImageUrl(e)+")"}})),g.default.createElement("td",{className:"emoji-list__creator"},l),g.default.createElement("td",{className:"emoji-list-item_actions"},s))}}]),t}(g.default.Component);t.default=k}});
//# sourceMappingURL=12.8b89fc76f2e8c1c29eb0.js.map