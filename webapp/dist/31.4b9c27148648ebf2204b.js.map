{"version":3,"sources":["webpack:///31.4b9c27148648ebf2204b.js","webpack:///./components/login/login_controller.jsx"],"names":["webpackJsonp","1717","module","exports","__webpack_require__","global","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_possibleConstructorReturn2","_possibleConstructorReturn3","_createClass2","_createClass3","_inherits2","_inherits3","_login_mfa","_login_mfa2","_error_bar","_error_bar2","_form_error","_form_error2","_global_actions","GlobalActions","_team_actions","_user_actions","_browser_store","_browser_store2","_user_store","_user_store2","_web_client","_web_client2","_async_client","AsyncClient","_text_formatting","TextFormatting","_utils","Utils","_constants","_constants2","_reactIntl","_es","_react","_react2","_logo","_logo2","LoginController","_React$Component","props","this","_this","__proto__","preSubmit","bind","submit","finishSignin","handleLoginIdChange","handlePasswordChange","loginId","location","query","extra","SIGNIN_VERIFIED","email","state","ldapEnabled","window","mm_license","IsLicensed","mm_config","EnableLdap","usernameSigninEnabled","EnableSignInWithUsername","emailSigninEnabled","EnableSignInWithEmail","samlEnabled","EnableSaml","password","showMfa","loading","get","PropTypes","object","isRequired","params","document","title","SiteName","removeGlobalItem","getCurrentUser","redirectUserToDefaultTeam","refs","focus","checkVersion","e","_this2","preventDefault","setState","trim","toLowerCase","msgId","serverError","createElement","FormattedMessage","id","values","ldapUsername","LdapLoginFieldName","localizeMessage","defaultMessage","checkMfa","requiresMfa","err","message","token","_this3","webLogin","hash","h","data","d","inviteId","addUserToTeamFromInvite","team","browserHistory","push","encodeURIComponent","_this4","emitInitialLoad","loadDefaultLocale","redirect_to","name","target","CustomBrand","EnableCustomBrand","text","CustomBrandText","src","getAdminRoute","dangerouslySetInnerHTML","__html","formatText","loginPlaceholders","length","slice","join","EnableSignUpWithEmail","EnableSignUpWithGitLab","EnableSignUpWithOffice365","EnableSignUpWithGoogle","extraParam","extraBox","SIGNIN_CHANGE","className","SESSION_EXPIRED","PASSWORD_CHANGE","loginControls","gitlabSigninEnabled","googleSigninEnabled","office365SigninEnabled","samlSigninEnabled","errorClass","loginButton","onSubmit","error","margin","ref","onChange","placeholder","createLoginPlaceholder","spellCheck","autoCapitalize","type","EnableOpenServer","checkSignUpEnabled","Link","to","search","href","getOAuthRoute","SamlLoginButtonText","content","customContent","customClass","createLoginOptions","createCustomLogin","description","CustomDescriptionText","Component"],"mappings":"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","file":"31.4b9c27148648ebf2204b.js","sourcesContent":["webpackJsonp([31],{\n\n/***/ 1717:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(2);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(4);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _inherits2 = __webpack_require__(3);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _login_mfa = __webpack_require__(1667);\n\nvar _login_mfa2 = _interopRequireDefault(_login_mfa);\n\nvar _error_bar = __webpack_require__(1662);\n\nvar _error_bar2 = _interopRequireDefault(_error_bar);\n\nvar _form_error = __webpack_require__(332);\n\nvar _form_error2 = _interopRequireDefault(_form_error);\n\nvar _global_actions = __webpack_require__(41);\n\nvar GlobalActions = _interopRequireWildcard(_global_actions);\n\nvar _team_actions = __webpack_require__(333);\n\nvar _user_actions = __webpack_require__(46);\n\nvar _browser_store = __webpack_require__(79);\n\nvar _browser_store2 = _interopRequireDefault(_browser_store);\n\nvar _user_store = __webpack_require__(15);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _web_client = __webpack_require__(28);\n\nvar _web_client2 = _interopRequireDefault(_web_client);\n\nvar _async_client = __webpack_require__(20);\n\nvar AsyncClient = _interopRequireWildcard(_async_client);\n\nvar _text_formatting = __webpack_require__(90);\n\nvar TextFormatting = _interopRequireWildcard(_text_formatting);\n\nvar _utils = __webpack_require__(11);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _constants = __webpack_require__(8);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _reactIntl = __webpack_require__(13);\n\nvar _es = __webpack_require__(37);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _logo = __webpack_require__(1659);\n\nvar _logo2 = _interopRequireDefault(_logo);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar LoginController = function (_React$Component) {\n    (0, _inherits3.default)(LoginController, _React$Component);\n    (0, _createClass3.default)(LoginController, null, [{\n        key: 'propTypes',\n        get: function get() {\n            return {\n                location: _react2.default.PropTypes.object.isRequired,\n                params: _react2.default.PropTypes.object.isRequired\n            };\n        }\n    }]);\n\n    function LoginController(props) {\n        (0, _classCallCheck3.default)(this, LoginController);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LoginController.__proto__ || (0, _getPrototypeOf2.default)(LoginController)).call(this, props));\n\n        _this.preSubmit = _this.preSubmit.bind(_this);\n        _this.submit = _this.submit.bind(_this);\n        _this.finishSignin = _this.finishSignin.bind(_this);\n\n        _this.handleLoginIdChange = _this.handleLoginIdChange.bind(_this);\n        _this.handlePasswordChange = _this.handlePasswordChange.bind(_this);\n\n        var loginId = '';\n        if (_this.props.location.query.extra === _constants2.default.SIGNIN_VERIFIED && _this.props.location.query.email) {\n            loginId = _this.props.location.query.email;\n        }\n\n        _this.state = {\n            ldapEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableLdap === 'true',\n            usernameSigninEnabled: global.window.mm_config.EnableSignInWithUsername === 'true',\n            emailSigninEnabled: global.window.mm_config.EnableSignInWithEmail === 'true',\n            samlEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableSaml === 'true',\n            loginId: loginId,\n            password: '',\n            showMfa: false,\n            loading: false\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(LoginController, [{\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            document.title = global.window.mm_config.SiteName;\n            _browser_store2.default.removeGlobalItem('team');\n            if (_user_store2.default.getCurrentUser()) {\n                GlobalActions.redirectUserToDefaultTeam();\n            }\n\n            if (this.props.location.query.extra === _constants2.default.SIGNIN_VERIFIED && this.props.location.query.email) {\n                this.refs.password.focus();\n            }\n\n            AsyncClient.checkVersion();\n        }\n    }, {\n        key: 'preSubmit',\n        value: function preSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            // password managers don't always call onInput handlers for form fields so it's possible\n            // for the state to get out of sync with what the user sees in the browser\n            var loginId = this.refs.loginId.value;\n            if (loginId !== this.state.loginId) {\n                this.setState({ loginId: loginId });\n            }\n\n            var password = this.refs.password.value;\n            if (password !== this.state.password) {\n                this.setState({ password: password });\n            }\n\n            // don't trim the password since we support spaces in passwords\n            loginId = loginId.trim().toLowerCase();\n\n            if (!loginId) {\n                // it's slightly weird to be constructing the message ID, but it's a bit nicer than triply nested if statements\n                var msgId = 'login.no';\n                if (this.state.emailSigninEnabled) {\n                    msgId += 'Email';\n                }\n                if (this.state.usernameSigninEnabled) {\n                    msgId += 'Username';\n                }\n                if (this.state.ldapEnabled) {\n                    msgId += 'LdapUsername';\n                }\n\n                this.setState({\n                    serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: msgId,\n                        values: {\n                            ldapUsername: global.window.mm_config.LdapLoginFieldName || Utils.localizeMessage('login.ldapUsernameLower', 'AD/LDAP username')\n                        }\n                    })\n                });\n                return;\n            }\n\n            if (!password) {\n                this.setState({\n                    serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.noPassword',\n                        defaultMessage: 'Please enter your password'\n                    })\n                });\n                return;\n            }\n\n            (0, _user_actions.checkMfa)(loginId, function (requiresMfa) {\n                if (requiresMfa) {\n                    _this2.setState({ showMfa: true });\n                } else {\n                    _this2.submit(loginId, password, '');\n                }\n            }, function (err) {\n                _this2.setState({ serverError: err.message });\n            });\n        }\n    }, {\n        key: 'submit',\n        value: function submit(loginId, password, token) {\n            var _this3 = this;\n\n            this.setState({ serverError: null, loading: true });\n\n            (0, _user_actions.webLogin)(loginId, password, token, function () {\n                // check for query params brought over from signup_user_complete\n                var hash = _this3.props.location.query.h;\n                var data = _this3.props.location.query.d;\n                var inviteId = _this3.props.location.query.id;\n                if (inviteId || hash) {\n                    (0, _team_actions.addUserToTeamFromInvite)(data, hash, inviteId, function (team) {\n                        _this3.finishSignin(team);\n                    }, function () {\n                        // there's not really a good way to deal with this, so just let the user log in like normal\n                        _this3.finishSignin();\n                    });\n\n                    return;\n                }\n\n                _this3.finishSignin();\n            }, function (err) {\n                if (err.id === 'api.user.login.not_verified.app_error') {\n                    _es.browserHistory.push('/should_verify_email?&email=' + encodeURIComponent(loginId));\n                } else if (err.id === 'store.sql_user.get_for_login.app_error' || err.id === 'ent.ldap.do_login.user_not_registered.app_error') {\n                    _this3.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.userNotFound',\n                            defaultMessage: 'We couldn\\'t find an account matching your login credentials.'\n                        })\n                    });\n                } else if (err.id === 'api.user.check_user_password.invalid.app_error' || err.id === 'ent.ldap.do_login.invalid_password.app_error') {\n                    _this3.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.invalidPassword',\n                            defaultMessage: 'Your password is incorrect.'\n                        })\n                    });\n                } else {\n                    _this3.setState({ showMfa: false, serverError: err.message, loading: false });\n                }\n            });\n        }\n    }, {\n        key: 'finishSignin',\n        value: function finishSignin(team) {\n            var _this4 = this;\n\n            GlobalActions.emitInitialLoad(function () {\n                var query = _this4.props.location.query;\n                GlobalActions.loadDefaultLocale();\n                if (query.redirect_to) {\n                    _es.browserHistory.push(query.redirect_to);\n                } else if (team) {\n                    _es.browserHistory.push('/' + team.name);\n                } else {\n                    GlobalActions.redirectUserToDefaultTeam();\n                }\n            });\n        }\n    }, {\n        key: 'handleLoginIdChange',\n        value: function handleLoginIdChange(e) {\n            this.setState({\n                loginId: e.target.value\n            });\n        }\n    }, {\n        key: 'handlePasswordChange',\n        value: function handlePasswordChange(e) {\n            this.setState({\n                password: e.target.value\n            });\n        }\n    }, {\n        key: 'createCustomLogin',\n        value: function createCustomLogin() {\n            if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.CustomBrand === 'true' && global.window.mm_config.EnableCustomBrand === 'true') {\n                var text = global.window.mm_config.CustomBrandText || '';\n\n                return _react2.default.createElement(\n                    'div',\n                    null,\n                    _react2.default.createElement('img', {\n                        src: _web_client2.default.getAdminRoute() + '/get_brand_image'\n                    }),\n                    _react2.default.createElement('p', { dangerouslySetInnerHTML: { __html: TextFormatting.formatText(text) } })\n                );\n            }\n\n            return null;\n        }\n    }, {\n        key: 'createLoginPlaceholder',\n        value: function createLoginPlaceholder() {\n            var ldapEnabled = this.state.ldapEnabled;\n            var usernameSigninEnabled = this.state.usernameSigninEnabled;\n            var emailSigninEnabled = this.state.emailSigninEnabled;\n\n            var loginPlaceholders = [];\n            if (emailSigninEnabled) {\n                loginPlaceholders.push(Utils.localizeMessage('login.email', 'Email'));\n            }\n\n            if (usernameSigninEnabled) {\n                loginPlaceholders.push(Utils.localizeMessage('login.username', 'Username'));\n            }\n\n            if (ldapEnabled) {\n                if (global.window.mm_config.LdapLoginFieldName) {\n                    loginPlaceholders.push(global.window.mm_config.LdapLoginFieldName);\n                } else {\n                    loginPlaceholders.push(Utils.localizeMessage('login.ldapUsername', 'AD/LDAP Username'));\n                }\n            }\n\n            if (loginPlaceholders.length >= 2) {\n                return loginPlaceholders.slice(0, loginPlaceholders.length - 1).join(', ') + Utils.localizeMessage('login.placeholderOr', ' or ') + loginPlaceholders[loginPlaceholders.length - 1];\n            } else if (loginPlaceholders.length === 1) {\n                return loginPlaceholders[0];\n            }\n\n            return '';\n        }\n    }, {\n        key: 'checkSignUpEnabled',\n        value: function checkSignUpEnabled() {\n            return global.window.mm_config.EnableSignUpWithEmail === 'true' || global.window.mm_config.EnableSignUpWithGitLab === 'true' || global.window.mm_config.EnableSignUpWithOffice365 === 'true' || global.window.mm_config.EnableSignUpWithGoogle === 'true' || global.window.mm_config.EnableLdap === 'true' || global.window.mm_config.EnableSaml === 'true';\n        }\n    }, {\n        key: 'createLoginOptions',\n        value: function createLoginOptions() {\n            var extraParam = this.props.location.query.extra;\n            var extraBox = '';\n            if (extraParam) {\n                if (extraParam === _constants2.default.SIGNIN_CHANGE) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.changed',\n                            defaultMessage: ' Sign-in method changed successfully'\n                        })\n                    );\n                } else if (extraParam === _constants2.default.SIGNIN_VERIFIED) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.verified',\n                            defaultMessage: ' Email Verified'\n                        })\n                    );\n                } else if (extraParam === _constants2.default.SESSION_EXPIRED) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-warning' },\n                        _react2.default.createElement('i', { className: 'fa fa-exclamation-triangle' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.session_expired',\n                            defaultMessage: ' Your session has expired. Please login again.'\n                        })\n                    );\n                } else if (extraParam === _constants2.default.PASSWORD_CHANGE) {\n                    extraBox = _react2.default.createElement(\n                        'div',\n                        { className: 'alert alert-success' },\n                        _react2.default.createElement('i', { className: 'fa fa-check' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.passwordChanged',\n                            defaultMessage: ' Password updated successfully'\n                        })\n                    );\n                }\n            }\n\n            var loginControls = [];\n\n            var ldapEnabled = this.state.ldapEnabled;\n            var gitlabSigninEnabled = global.window.mm_config.EnableSignUpWithGitLab === 'true';\n            var googleSigninEnabled = global.window.mm_config.EnableSignUpWithGoogle === 'true';\n            var office365SigninEnabled = global.window.mm_config.EnableSignUpWithOffice365 === 'true';\n            var samlSigninEnabled = this.state.samlEnabled;\n            var usernameSigninEnabled = this.state.usernameSigninEnabled;\n            var emailSigninEnabled = this.state.emailSigninEnabled;\n\n            if (emailSigninEnabled || usernameSigninEnabled || ldapEnabled) {\n                var errorClass = '';\n                if (this.state.serverError) {\n                    errorClass = ' has-error';\n                }\n\n                var loginButton = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'login.signIn',\n                    defaultMessage: 'Sign in'\n                });\n\n                if (this.state.loading) {\n                    loginButton = _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement('span', { className: 'fa fa-refresh icon--rotate' }),\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.signInLoading',\n                            defaultMessage: 'Signing in...'\n                        })\n                    );\n                }\n\n                loginControls.push(_react2.default.createElement(\n                    'form',\n                    {\n                        key: 'loginBoxes',\n                        onSubmit: this.preSubmit\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'signup__email-container' },\n                        _react2.default.createElement(_form_error2.default, {\n                            error: this.state.serverError,\n                            margin: true\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' + errorClass },\n                            _react2.default.createElement('input', {\n                                className: 'form-control',\n                                ref: 'loginId',\n                                name: 'loginId',\n                                value: this.state.loginId,\n                                onChange: this.handleLoginIdChange,\n                                placeholder: this.createLoginPlaceholder(),\n                                spellCheck: 'false',\n                                autoCapitalize: 'off'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' + errorClass },\n                            _react2.default.createElement('input', {\n                                type: 'password',\n                                className: 'form-control',\n                                ref: 'password',\n                                name: 'password',\n                                value: this.state.password,\n                                onChange: this.handlePasswordChange,\n                                placeholder: Utils.localizeMessage('login.password', 'Password'),\n                                spellCheck: 'false'\n                            })\n                        ),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'form-group' },\n                            _react2.default.createElement(\n                                'button',\n                                {\n                                    id: 'loginButton',\n                                    type: 'submit',\n                                    className: 'btn btn-primary'\n                                },\n                                loginButton\n                            )\n                        )\n                    )\n                ));\n            }\n\n            if (global.window.mm_config.EnableOpenServer === 'true' && this.checkSignUpEnabled()) {\n                loginControls.push(_react2.default.createElement(\n                    'div',\n                    {\n                        className: 'form-group',\n                        key: 'signup'\n                    },\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.noAccount',\n                            defaultMessage: 'Don\\'t have an account? '\n                        }),\n                        _react2.default.createElement(\n                            _es.Link,\n                            {\n                                to: '/signup_user_complete' + this.props.location.search,\n                                className: 'signup-team-login'\n                            },\n                            _react2.default.createElement(_reactIntl.FormattedMessage, {\n                                id: 'login.create',\n                                defaultMessage: 'Create one now'\n                            })\n                        )\n                    )\n                ));\n            }\n\n            if (usernameSigninEnabled || emailSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'forgotPassword',\n                        className: 'form-group'\n                    },\n                    _react2.default.createElement(\n                        _es.Link,\n                        { to: '/reset_password' },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.forgot',\n                            defaultMessage: 'I forgot my password'\n                        })\n                    )\n                ));\n            }\n\n            if ((emailSigninEnabled || usernameSigninEnabled || ldapEnabled) && (gitlabSigninEnabled || googleSigninEnabled || samlSigninEnabled || office365SigninEnabled)) {\n                loginControls.push(_react2.default.createElement(\n                    'div',\n                    {\n                        key: 'divider',\n                        className: 'or__container'\n                    },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.or',\n                        defaultMessage: 'or'\n                    })\n                ));\n\n                loginControls.push(_react2.default.createElement(\n                    'h5',\n                    { key: 'oauthHeader' },\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.signInWith',\n                        defaultMessage: 'Sign in with:'\n                    })\n                ));\n            }\n\n            if (gitlabSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login gitlab',\n                        key: 'gitlab',\n                        href: _web_client2.default.getOAuthRoute() + '/gitlab/login' + this.props.location.search\n                    },\n                    _react2.default.createElement('span', { className: 'icon' }),\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.gitlab',\n                            defaultMessage: 'GitLab'\n                        })\n                    )\n                ));\n            }\n\n            if (googleSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login google',\n                        key: 'google',\n                        href: _web_client2.default.getOAuthRoute() + '/google/login' + this.props.location.search\n                    },\n                    _react2.default.createElement('span', { className: 'icon' }),\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.google',\n                            defaultMessage: 'Google Apps'\n                        })\n                    )\n                ));\n            }\n\n            if (office365SigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login office365',\n                        key: 'office365',\n                        href: _web_client2.default.getOAuthRoute() + '/office365/login' + this.props.location.search\n                    },\n                    _react2.default.createElement('span', { className: 'icon' }),\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'login.office365',\n                            defaultMessage: 'Office 365'\n                        })\n                    )\n                ));\n            }\n\n            if (samlSigninEnabled) {\n                loginControls.push(_react2.default.createElement(\n                    'a',\n                    {\n                        className: 'btn btn-custom-login saml',\n                        key: 'saml',\n                        href: '/login/sso/saml' + this.props.location.search\n                    },\n                    _react2.default.createElement('span', { className: 'icon fa fa-lock fa--margin-top' }),\n                    _react2.default.createElement(\n                        'span',\n                        null,\n                        global.window.mm_config.SamlLoginButtonText\n                    )\n                ));\n            }\n\n            if (loginControls.length === 0) {\n                loginControls.push(_react2.default.createElement(_form_error2.default, {\n                    error: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'login.noMethods',\n                        defaultMessage: 'No sign-in methods are enabled. Please contact your System Administrator.'\n                    }),\n                    margin: true\n                }));\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                extraBox,\n                loginControls\n            );\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var content = void 0;\n            var customContent = void 0;\n            var customClass = void 0;\n            if (this.state.showMfa) {\n                content = _react2.default.createElement(_login_mfa2.default, {\n                    loginId: this.state.loginId,\n                    password: this.state.password,\n                    submit: this.submit\n                });\n            } else {\n                content = this.createLoginOptions();\n                customContent = this.createCustomLogin();\n                if (customContent) {\n                    customClass = 'branded';\n                }\n            }\n\n            var description = null;\n            if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.CustomBrand === 'true' && global.window.mm_config.EnableCustomBrand === 'true') {\n                description = global.window.mm_config.CustomDescriptionText;\n            } else {\n                description = _react2.default.createElement(_reactIntl.FormattedMessage, {\n                    id: 'web.root.signup_info',\n                    defaultMessage: 'All team communication in one place, searchable and accessible anywhere'\n                });\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(_error_bar2.default, null),\n                _react2.default.createElement(\n                    'div',\n                    { className: 'col-sm-12' },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'signup-team__container ' + customClass },\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'signup__markdown' },\n                            customContent\n                        ),\n                        _react2.default.createElement('img', {\n                            className: 'signup-team-logo',\n                            src: _logo2.default\n                        }),\n                        _react2.default.createElement(\n                            'div',\n                            { className: 'signup__content' },\n                            _react2.default.createElement(\n                                'h1',\n                                null,\n                                global.window.mm_config.SiteName\n                            ),\n                            _react2.default.createElement(\n                                'h4',\n                                { className: 'color--light' },\n                                description\n                            ),\n                            content\n                        )\n                    )\n                )\n            );\n        }\n    }]);\n    return LoginController;\n}(_react2.default.Component); // Copyright (c) 2015 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = LoginController;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 31.4b9c27148648ebf2204b.js","// Copyright (c) 2015 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport LoginMfa from './components/login_mfa.jsx';\nimport ErrorBar from 'components/error_bar.jsx';\nimport FormError from 'components/form_error.jsx';\n\nimport * as GlobalActions from 'actions/global_actions.jsx';\nimport {addUserToTeamFromInvite} from 'actions/team_actions.jsx';\nimport {checkMfa, webLogin} from 'actions/user_actions.jsx';\nimport BrowserStore from 'stores/browser_store.jsx';\nimport UserStore from 'stores/user_store.jsx';\n\nimport Client from 'client/web_client.jsx';\nimport * as AsyncClient from 'utils/async_client.jsx';\nimport * as TextFormatting from 'utils/text_formatting.jsx';\n\nimport * as Utils from 'utils/utils.jsx';\nimport Constants from 'utils/constants.jsx';\n\nimport {FormattedMessage} from 'react-intl';\nimport {browserHistory, Link} from 'react-router/es6';\n\nimport React from 'react';\nimport logoImage from 'images/logo.png';\n\nexport default class LoginController extends React.Component {\n    static get propTypes() {\n        return {\n            location: React.PropTypes.object.isRequired,\n            params: React.PropTypes.object.isRequired\n        };\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.preSubmit = this.preSubmit.bind(this);\n        this.submit = this.submit.bind(this);\n        this.finishSignin = this.finishSignin.bind(this);\n\n        this.handleLoginIdChange = this.handleLoginIdChange.bind(this);\n        this.handlePasswordChange = this.handlePasswordChange.bind(this);\n\n        let loginId = '';\n        if (this.props.location.query.extra === Constants.SIGNIN_VERIFIED && this.props.location.query.email) {\n            loginId = this.props.location.query.email;\n        }\n\n        this.state = {\n            ldapEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableLdap === 'true',\n            usernameSigninEnabled: global.window.mm_config.EnableSignInWithUsername === 'true',\n            emailSigninEnabled: global.window.mm_config.EnableSignInWithEmail === 'true',\n            samlEnabled: global.window.mm_license.IsLicensed === 'true' && global.window.mm_config.EnableSaml === 'true',\n            loginId,\n            password: '',\n            showMfa: false,\n            loading: false\n        };\n    }\n\n    componentDidMount() {\n        document.title = global.window.mm_config.SiteName;\n        BrowserStore.removeGlobalItem('team');\n        if (UserStore.getCurrentUser()) {\n            GlobalActions.redirectUserToDefaultTeam();\n        }\n\n        if (this.props.location.query.extra === Constants.SIGNIN_VERIFIED && this.props.location.query.email) {\n            this.refs.password.focus();\n        }\n\n        AsyncClient.checkVersion();\n    }\n\n    preSubmit(e) {\n        e.preventDefault();\n\n        // password managers don't always call onInput handlers for form fields so it's possible\n        // for the state to get out of sync with what the user sees in the browser\n        let loginId = this.refs.loginId.value;\n        if (loginId !== this.state.loginId) {\n            this.setState({loginId});\n        }\n\n        const password = this.refs.password.value;\n        if (password !== this.state.password) {\n            this.setState({password});\n        }\n\n        // don't trim the password since we support spaces in passwords\n        loginId = loginId.trim().toLowerCase();\n\n        if (!loginId) {\n            // it's slightly weird to be constructing the message ID, but it's a bit nicer than triply nested if statements\n            let msgId = 'login.no';\n            if (this.state.emailSigninEnabled) {\n                msgId += 'Email';\n            }\n            if (this.state.usernameSigninEnabled) {\n                msgId += 'Username';\n            }\n            if (this.state.ldapEnabled) {\n                msgId += 'LdapUsername';\n            }\n\n            this.setState({\n                serverError: (\n                    <FormattedMessage\n                        id={msgId}\n                        values={{\n                            ldapUsername: global.window.mm_config.LdapLoginFieldName || Utils.localizeMessage('login.ldapUsernameLower', 'AD/LDAP username')\n                        }}\n                    />\n                )\n            });\n            return;\n        }\n\n        if (!password) {\n            this.setState({\n                serverError: (\n                    <FormattedMessage\n                        id='login.noPassword'\n                        defaultMessage='Please enter your password'\n                    />\n                )\n            });\n            return;\n        }\n\n        checkMfa(\n            loginId,\n            (requiresMfa) => {\n                if (requiresMfa) {\n                    this.setState({showMfa: true});\n                } else {\n                    this.submit(loginId, password, '');\n                }\n            },\n            (err) => {\n                this.setState({serverError: err.message});\n            }\n        );\n    }\n\n    submit(loginId, password, token) {\n        this.setState({serverError: null, loading: true});\n\n        webLogin(\n            loginId,\n            password,\n            token,\n            () => {\n                // check for query params brought over from signup_user_complete\n                const hash = this.props.location.query.h;\n                const data = this.props.location.query.d;\n                const inviteId = this.props.location.query.id;\n                if (inviteId || hash) {\n                    addUserToTeamFromInvite(\n                        data,\n                        hash,\n                        inviteId,\n                        (team) => {\n                            this.finishSignin(team);\n                        },\n                        () => {\n                            // there's not really a good way to deal with this, so just let the user log in like normal\n                            this.finishSignin();\n                        }\n                    );\n\n                    return;\n                }\n\n                this.finishSignin();\n            },\n            (err) => {\n                if (err.id === 'api.user.login.not_verified.app_error') {\n                    browserHistory.push('/should_verify_email?&email=' + encodeURIComponent(loginId));\n                } else if (err.id === 'store.sql_user.get_for_login.app_error' ||\n                    err.id === 'ent.ldap.do_login.user_not_registered.app_error') {\n                    this.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: (\n                            <FormattedMessage\n                                id='login.userNotFound'\n                                defaultMessage=\"We couldn't find an account matching your login credentials.\"\n                            />\n                        )\n                    });\n                } else if (err.id === 'api.user.check_user_password.invalid.app_error' || err.id === 'ent.ldap.do_login.invalid_password.app_error') {\n                    this.setState({\n                        showMfa: false,\n                        loading: false,\n                        serverError: (\n                            <FormattedMessage\n                                id='login.invalidPassword'\n                                defaultMessage='Your password is incorrect.'\n                            />\n                        )\n                    });\n                } else {\n                    this.setState({showMfa: false, serverError: err.message, loading: false});\n                }\n            }\n        );\n    }\n\n    finishSignin(team) {\n        GlobalActions.emitInitialLoad(\n            () => {\n                const query = this.props.location.query;\n                GlobalActions.loadDefaultLocale();\n                if (query.redirect_to) {\n                    browserHistory.push(query.redirect_to);\n                } else if (team) {\n                    browserHistory.push(`/${team.name}`);\n                } else {\n                    GlobalActions.redirectUserToDefaultTeam();\n                }\n            }\n        );\n    }\n\n    handleLoginIdChange(e) {\n        this.setState({\n            loginId: e.target.value\n        });\n    }\n\n    handlePasswordChange(e) {\n        this.setState({\n            password: e.target.value\n        });\n    }\n\n    createCustomLogin() {\n        if (global.window.mm_license.IsLicensed === 'true' &&\n                global.window.mm_license.CustomBrand === 'true' &&\n                global.window.mm_config.EnableCustomBrand === 'true') {\n            const text = global.window.mm_config.CustomBrandText || '';\n\n            return (\n                <div>\n                    <img\n                        src={Client.getAdminRoute() + '/get_brand_image'}\n                    />\n                    <p dangerouslySetInnerHTML={{__html: TextFormatting.formatText(text)}}/>\n                </div>\n            );\n        }\n\n        return null;\n    }\n\n    createLoginPlaceholder() {\n        const ldapEnabled = this.state.ldapEnabled;\n        const usernameSigninEnabled = this.state.usernameSigninEnabled;\n        const emailSigninEnabled = this.state.emailSigninEnabled;\n\n        const loginPlaceholders = [];\n        if (emailSigninEnabled) {\n            loginPlaceholders.push(Utils.localizeMessage('login.email', 'Email'));\n        }\n\n        if (usernameSigninEnabled) {\n            loginPlaceholders.push(Utils.localizeMessage('login.username', 'Username'));\n        }\n\n        if (ldapEnabled) {\n            if (global.window.mm_config.LdapLoginFieldName) {\n                loginPlaceholders.push(global.window.mm_config.LdapLoginFieldName);\n            } else {\n                loginPlaceholders.push(Utils.localizeMessage('login.ldapUsername', 'AD/LDAP Username'));\n            }\n        }\n\n        if (loginPlaceholders.length >= 2) {\n            return loginPlaceholders.slice(0, loginPlaceholders.length - 1).join(', ') +\n                Utils.localizeMessage('login.placeholderOr', ' or ') +\n                loginPlaceholders[loginPlaceholders.length - 1];\n        } else if (loginPlaceholders.length === 1) {\n            return loginPlaceholders[0];\n        }\n\n        return '';\n    }\n\n    checkSignUpEnabled() {\n        return global.window.mm_config.EnableSignUpWithEmail === 'true' ||\n            global.window.mm_config.EnableSignUpWithGitLab === 'true' ||\n            global.window.mm_config.EnableSignUpWithOffice365 === 'true' ||\n            global.window.mm_config.EnableSignUpWithGoogle === 'true' ||\n            global.window.mm_config.EnableLdap === 'true' ||\n            global.window.mm_config.EnableSaml === 'true';\n    }\n\n    createLoginOptions() {\n        const extraParam = this.props.location.query.extra;\n        let extraBox = '';\n        if (extraParam) {\n            if (extraParam === Constants.SIGNIN_CHANGE) {\n                extraBox = (\n                    <div className='alert alert-success'>\n                        <i className='fa fa-check'/>\n                        <FormattedMessage\n                            id='login.changed'\n                            defaultMessage=' Sign-in method changed successfully'\n                        />\n                    </div>\n                );\n            } else if (extraParam === Constants.SIGNIN_VERIFIED) {\n                extraBox = (\n                    <div className='alert alert-success'>\n                        <i className='fa fa-check'/>\n                        <FormattedMessage\n                            id='login.verified'\n                            defaultMessage=' Email Verified'\n                        />\n                    </div>\n                );\n            } else if (extraParam === Constants.SESSION_EXPIRED) {\n                extraBox = (\n                    <div className='alert alert-warning'>\n                        <i className='fa fa-exclamation-triangle'/>\n                        <FormattedMessage\n                            id='login.session_expired'\n                            defaultMessage=' Your session has expired. Please login again.'\n                        />\n                    </div>\n                );\n            } else if (extraParam === Constants.PASSWORD_CHANGE) {\n                extraBox = (\n                    <div className='alert alert-success'>\n                        <i className='fa fa-check'/>\n                        <FormattedMessage\n                            id='login.passwordChanged'\n                            defaultMessage=' Password updated successfully'\n                        />\n                    </div>\n                );\n            }\n        }\n\n        const loginControls = [];\n\n        const ldapEnabled = this.state.ldapEnabled;\n        const gitlabSigninEnabled = global.window.mm_config.EnableSignUpWithGitLab === 'true';\n        const googleSigninEnabled = global.window.mm_config.EnableSignUpWithGoogle === 'true';\n        const office365SigninEnabled = global.window.mm_config.EnableSignUpWithOffice365 === 'true';\n        const samlSigninEnabled = this.state.samlEnabled;\n        const usernameSigninEnabled = this.state.usernameSigninEnabled;\n        const emailSigninEnabled = this.state.emailSigninEnabled;\n\n        if (emailSigninEnabled || usernameSigninEnabled || ldapEnabled) {\n            let errorClass = '';\n            if (this.state.serverError) {\n                errorClass = ' has-error';\n            }\n\n            let loginButton =\n                (<FormattedMessage\n                    id='login.signIn'\n                    defaultMessage='Sign in'\n                 />);\n\n            if (this.state.loading) {\n                loginButton =\n                (<span>\n                    <span className='fa fa-refresh icon--rotate'/>\n                    <FormattedMessage\n                        id='login.signInLoading'\n                        defaultMessage='Signing in...'\n                    />\n                </span>);\n            }\n\n            loginControls.push(\n                <form\n                    key='loginBoxes'\n                    onSubmit={this.preSubmit}\n                >\n                    <div className='signup__email-container'>\n                        <FormError\n                            error={this.state.serverError}\n                            margin={true}\n                        />\n                        <div className={'form-group' + errorClass}>\n                            <input\n                                className='form-control'\n                                ref='loginId'\n                                name='loginId'\n                                value={this.state.loginId}\n                                onChange={this.handleLoginIdChange}\n                                placeholder={this.createLoginPlaceholder()}\n                                spellCheck='false'\n                                autoCapitalize='off'\n                            />\n                        </div>\n                        <div className={'form-group' + errorClass}>\n                            <input\n                                type='password'\n                                className='form-control'\n                                ref='password'\n                                name='password'\n                                value={this.state.password}\n                                onChange={this.handlePasswordChange}\n                                placeholder={Utils.localizeMessage('login.password', 'Password')}\n                                spellCheck='false'\n                            />\n                        </div>\n                        <div className='form-group'>\n                            <button\n                                id='loginButton'\n                                type='submit'\n                                className='btn btn-primary'\n                            >\n                                { loginButton }\n                            </button>\n                        </div>\n                    </div>\n                </form>\n            );\n        }\n\n        if (global.window.mm_config.EnableOpenServer === 'true' && this.checkSignUpEnabled()) {\n            loginControls.push(\n                <div\n                    className='form-group'\n                    key='signup'\n                >\n                    <span>\n                        <FormattedMessage\n                            id='login.noAccount'\n                            defaultMessage=\"Don't have an account? \"\n                        />\n                        <Link\n                            to={'/signup_user_complete' + this.props.location.search}\n                            className='signup-team-login'\n                        >\n                            <FormattedMessage\n                                id='login.create'\n                                defaultMessage='Create one now'\n                            />\n                        </Link>\n                    </span>\n                </div>\n            );\n        }\n\n        if (usernameSigninEnabled || emailSigninEnabled) {\n            loginControls.push(\n                <div\n                    key='forgotPassword'\n                    className='form-group'\n                >\n                    <Link to={'/reset_password'}>\n                        <FormattedMessage\n                            id='login.forgot'\n                            defaultMessage='I forgot my password'\n                        />\n                    </Link>\n                </div>\n            );\n        }\n\n        if ((emailSigninEnabled || usernameSigninEnabled || ldapEnabled) && (gitlabSigninEnabled || googleSigninEnabled || samlSigninEnabled || office365SigninEnabled)) {\n            loginControls.push(\n                <div\n                    key='divider'\n                    className='or__container'\n                >\n                    <FormattedMessage\n                        id='login.or'\n                        defaultMessage='or'\n                    />\n                </div>\n            );\n\n            loginControls.push(\n                <h5 key='oauthHeader'>\n                    <FormattedMessage\n                        id='login.signInWith'\n                        defaultMessage='Sign in with:'\n                    />\n                </h5>\n            );\n        }\n\n        if (gitlabSigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login gitlab'\n                    key='gitlab'\n                    href={Client.getOAuthRoute() + '/gitlab/login' + this.props.location.search}\n                >\n                    <span className='icon'/>\n                    <span>\n                        <FormattedMessage\n                            id='login.gitlab'\n                            defaultMessage='GitLab'\n                        />\n                    </span>\n                </a>\n            );\n        }\n\n        if (googleSigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login google'\n                    key='google'\n                    href={Client.getOAuthRoute() + '/google/login' + this.props.location.search}\n                >\n                    <span className='icon'/>\n                    <span>\n                        <FormattedMessage\n                            id='login.google'\n                            defaultMessage='Google Apps'\n                        />\n                    </span>\n                </a>\n            );\n        }\n\n        if (office365SigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login office365'\n                    key='office365'\n                    href={Client.getOAuthRoute() + '/office365/login' + this.props.location.search}\n                >\n                    <span className='icon'/>\n                    <span>\n                        <FormattedMessage\n                            id='login.office365'\n                            defaultMessage='Office 365'\n                        />\n                    </span>\n                </a>\n            );\n        }\n\n        if (samlSigninEnabled) {\n            loginControls.push(\n                <a\n                    className='btn btn-custom-login saml'\n                    key='saml'\n                    href={'/login/sso/saml' + this.props.location.search}\n                >\n                    <span className='icon fa fa-lock fa--margin-top'/>\n                    <span>\n                        {global.window.mm_config.SamlLoginButtonText}\n                    </span>\n                </a>\n            );\n        }\n\n        if (loginControls.length === 0) {\n            loginControls.push(\n                <FormError\n                    error={\n                        <FormattedMessage\n                            id='login.noMethods'\n                            defaultMessage='No sign-in methods are enabled. Please contact your System Administrator.'\n                        />\n                    }\n                    margin={true}\n                />\n            );\n        }\n\n        return (\n            <div>\n                {extraBox}\n                {loginControls}\n            </div>\n        );\n    }\n\n    render() {\n        let content;\n        let customContent;\n        let customClass;\n        if (this.state.showMfa) {\n            content = (\n                <LoginMfa\n                    loginId={this.state.loginId}\n                    password={this.state.password}\n                    submit={this.submit}\n                />\n            );\n        } else {\n            content = this.createLoginOptions();\n            customContent = this.createCustomLogin();\n            if (customContent) {\n                customClass = 'branded';\n            }\n        }\n\n        let description = null;\n        if (global.window.mm_license.IsLicensed === 'true' && global.window.mm_license.CustomBrand === 'true' && global.window.mm_config.EnableCustomBrand === 'true') {\n            description = global.window.mm_config.CustomDescriptionText;\n        } else {\n            description = (\n                <FormattedMessage\n                    id='web.root.signup_info'\n                    defaultMessage='All team communication in one place, searchable and accessible anywhere'\n                />\n            );\n        }\n\n        return (\n            <div>\n                <ErrorBar/>\n                <div className='col-sm-12'>\n                    <div className={'signup-team__container ' + customClass}>\n                        <div className='signup__markdown'>\n                            {customContent}\n                        </div>\n                        <img\n                            className='signup-team-logo'\n                            src={logoImage}\n                        />\n                        <div className='signup__content'>\n                            <h1>{global.window.mm_config.SiteName}</h1>\n                            <h4 className='color--light'>\n                                {description}\n                            </h4>\n                            {content}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/login/login_controller.jsx"],"sourceRoot":""}