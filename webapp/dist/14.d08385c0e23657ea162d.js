webpackJsonp([14],{1725:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(36),s=l(i),r=a(72),o=l(r),m=a(6),d=l(m),u=a(2),c=l(u),f=a(5),p=l(f),g=a(4),h=l(g),_=a(3),v=l(_),E=a(15),y=l(E),C=a(23),T=l(C),k=a(59),M=n(k),w=a(11),b=n(w),N=a(1662),L=l(N),S=a(164),F=l(S),A=a(20),O=n(A),P=a(41),j=n(P),I=a(2037),x=l(I),q=a(37),R=a(13),U=a(1),B=l(U),D=a(1659),G=l(D),H=function(t){function a(e){(0,c.default)(this,a);var t=(0,h.default)(this,(a.__proto__||(0,d.default)(a)).call(this,e));t.onTeamChange=t.onTeamChange.bind(t),t.handleTeamClick=t.handleTeamClick.bind(t),t.teamContentsCompare=t.teamContentsCompare.bind(t);var n=t.getStateFromStores(!1);return n.loadingTeamId="",t.state=n,t}return(0,v.default)(a,t),(0,p.default)(a,[{key:"componentDidMount",value:function(){T.default.addChangeListener(this.onTeamChange),O.getAllTeamListings()}},{key:"componentWillUnmount",value:function(){T.default.removeChangeListener(this.onTeamChange)}},{key:"onTeamChange",value:function(){this.setState(this.getStateFromStores(!0))}},{key:"getStateFromStores",value:function(e){return{teams:T.default.getAll(),teamMembers:T.default.getMyTeamMembers(),teamListings:T.default.getTeamListings(),loaded:e}}},{key:"handleTeamClick",value:function(e){this.setState({loadingTeamId:e.id})}},{key:"teamContentsCompare",value:function(e,t){return e.props.team.display_name.localeCompare(t.props.team.display_name)}},{key:"render",value:function(){var t=[],a=new o.default,n=b.isSystemAdmin(y.default.getCurrentUser().roles),l=!0,i=!1,r=void 0;try{for(var m,d=(0,s.default)(this.state.teamMembers);!(l=(m=d.next()).done);l=!0){a[m.value.team_id]=!0}}catch(e){i=!0,r=e}finally{try{!l&&d.return&&d.return()}finally{if(i)throw r}}for(var u in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(u)&&!a[u]){var c=this.state.teamListings[u];t.push(B.default.createElement(x.default,{key:"team_"+c.name,team:c,url:"/signup_user_complete/?id="+c.invite_id,onTeamClick:this.handleTeamClick,loading:this.state.loadingTeamId===c.id}))}0!==t.length||"true"!==e.window.mm_config.EnableTeamCreation&&!n?0===t.length&&(t=B.default.createElement("div",{className:"signup-team-dir-err"},B.default.createElement("div",null,B.default.createElement(R.FormattedMessage,{id:"signup_team.no_open_teams",defaultMessage:"No teams are available to join. Please ask your administrator for an invite."})))):t=B.default.createElement("div",{className:"signup-team-dir-err"},B.default.createElement("div",null,B.default.createElement(R.FormattedMessage,{id:"signup_team.no_open_teams_canCreate",defaultMessage:"No teams are available to join. Please create a new team or ask your administrator for an invite."}))),Array.isArray(t)&&(t=t.sort(this.teamContentsCompare));var f=B.default.createElement("div",{className:"signup__content"},B.default.createElement("h4",null,B.default.createElement(R.FormattedMessage,{id:"signup_team.join_open",defaultMessage:"Teams you can join: "})),B.default.createElement("div",{className:"signup-team-all"},t));this.state.loaded||(f=B.default.createElement(F.default,null));var p=null;n&&"false"===e.window.mm_config.EnableTeamCreation&&(p=B.default.createElement(R.FormattedMessage,{id:"login.createTeamAdminOnly",defaultMessage:"This option is only available for System Administrators, and does not show up for other users."}));var g=void 0;(n||"true"===e.window.mm_config.EnableTeamCreation)&&(g=B.default.createElement("div",{className:"margin--extra"},B.default.createElement(q.Link,{to:"/create_team",className:"signup-team-login"},B.default.createElement(R.FormattedMessage,{id:"login.createTeam",defaultMessage:"Create a new team"})),B.default.createElement("div",null,p)));var h=void 0;n&&!M.isMobileApp()&&(h=B.default.createElement("div",{className:"margin--extra hidden-xs"},B.default.createElement(q.Link,{to:"/admin_console",className:"signup-team-login"},B.default.createElement(R.FormattedMessage,{id:"signup_team_system_console",defaultMessage:"Go to System Console"}))));var _=null;_="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:B.default.createElement(R.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"});var v=void 0;return v=this.state.teamMembers.length?B.default.createElement(q.Link,{to:"/"},B.default.createElement("span",{className:"fa fa-chevron-left"}),B.default.createElement(R.FormattedMessage,{id:"web.header.back"})):B.default.createElement("a",{href:"#",onClick:function(){return j.emitUserLoggedOutEvent()}},B.default.createElement("span",{className:"fa fa-chevron-left"}),B.default.createElement(R.FormattedMessage,{id:"web.header.logout"})),B.default.createElement("div",null,B.default.createElement(L.default,null),B.default.createElement("div",{className:"signup-header"},v),B.default.createElement("div",{className:"col-sm-12"},B.default.createElement("div",{className:"signup-team__container"},B.default.createElement("img",{className:"signup-team-logo",src:G.default}),B.default.createElement("h1",null,e.window.mm_config.SiteName),B.default.createElement("h4",{className:"color--light"},_),f,g,h)))}}]),a}(B.default.Component);t.default=H}).call(t,a(17))},2037:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),i=n(l),s=a(2),r=n(s),o=a(5),m=n(o),d=a(4),u=n(d),c=a(3),f=n(c),p=a(1),g=n(p),h=a(37),_=a(27),v=a(8),E=function(e){function t(e){(0,r.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleTeamClick=a.handleTeamClick.bind(a),a}return(0,f.default)(t,e),(0,m.default)(t,[{key:"handleTeamClick",value:function(){this.props.onTeamClick(this.props.team)}},{key:"render",value:function(){var e=void 0,t=v.Constants.TEAM_INFO_SVG;e=this.props.loading?g.default.createElement("span",{className:"fa fa-refresh fa-spin right signup-team__icon"}):g.default.createElement("span",{className:"fa fa-angle-right right signup-team__icon"});var a="",n="";return this.props.team.description&&(a=g.default.createElement(_.Tooltip,{id:"team-description__tooltip"},this.props.team.description),n=g.default.createElement(_.OverlayTrigger,{trigger:["hover","focus","click"],delayShow:1e3,placement:"top",overlay:a,ref:"descriptionOverlay"},g.default.createElement("span",{className:"icon icon--info",dangerouslySetInnerHTML:{__html:t}}))),g.default.createElement("div",{className:"signup-team-dir"},n,g.default.createElement(h.Link,{to:this.props.url,onClick:this.handleTeamClick},g.default.createElement("span",{className:"signup-team-dir__name"},this.props.team.display_name),e))}}]),t}(g.default.Component);E.propTypes={team:g.default.PropTypes.object.isRequired,url:g.default.PropTypes.string.isRequired,onTeamClick:g.default.PropTypes.func.isRequired,loading:g.default.PropTypes.bool.isRequired},t.default=E}});
//# sourceMappingURL=14.d08385c0e23657ea162d.js.map