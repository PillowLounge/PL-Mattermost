webpackJsonp([0],{2e3:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(30),g=l(p),v=a(8),C=l(v),E=a(27),M=a(23),y=l(M),_=a(141),b=n(_),T=a(13),w=a(1),N=l(w),S=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onURLChanged=a.onURLChanged.bind(a),a.doSubmit=a.doSubmit.bind(a),a.doCancel=a.doCancel.bind(a),a.state={currentURL:e.currentURL,urlError:"",userEdit:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.state.userEdit||this.setState({currentURL:e.currentURL})}},{key:"componentDidUpdate",value:function(e){!0===this.props.show&&!1===e.show&&g.default.findDOMNode(this.refs.urlinput).select()}},{key:"onURLChanged",value:function(e){var t=e.target.value.trim();this.setState({currentURL:t.replace(/[^A-Za-z0-9-_]/g,"").toLowerCase(),userEdit:!0})}},{key:"getURLError",value:function(e){var t=[];return e.length<2&&t.push(N.default.createElement("span",{key:"error1"},N.default.createElement(T.FormattedMessage,{id:"change_url.longer",defaultMessage:"URL must be two or more characters."}),N.default.createElement("br",null))),"-"!==e.charAt(0)&&"_"!==e.charAt(0)||t.push(N.default.createElement("span",{key:"error2"},N.default.createElement(T.FormattedMessage,{id:"change_url.startWithLetter",defaultMessage:"URL must start with a letter or number."}),N.default.createElement("br",null))),e.length>1&&("-"===e.charAt(e.length-1)||"_"===e.charAt(e.length-1))&&t.push(N.default.createElement("span",{key:"error3"},N.default.createElement(T.FormattedMessage,{id:"change_url.endWithLetter",defaultMessage:"URL must end with a letter or number."}),N.default.createElement("br",null))),e.indexOf("__")>-1&&t.push(N.default.createElement("span",{key:"error4"},N.default.createElement(T.FormattedMessage,{id:"change_url.noUnderscore",defaultMessage:"URL can not contain two underscores in a row."}),N.default.createElement("br",null))),0===t.length&&t.push(N.default.createElement("span",{key:"errorlast"},N.default.createElement(T.FormattedMessage,{id:"change_url.invalidUrl",defaultMessage:"Invalid URL"}),N.default.createElement("br",null))),t}},{key:"doSubmit",value:function(e){e.preventDefault();var t=g.default.findDOMNode(this.refs.urlinput).value;if(b.cleanUpUrlable(t)!==t||t.length<2||t.indexOf("__")>-1)return void this.setState({urlError:this.getURLError(t)});this.setState({urlError:"",userEdit:!1}),this.props.onModalSubmit(t)}},{key:"doCancel",value:function(){this.setState({urlError:"",userEdit:!1}),this.props.onModalDismissed()}},{key:"render",value:function(){var e="input-group input-group--limit",t=null;this.state.urlError&&(e+=" has-error"),(this.props.serverError||this.state.urlError)&&(t=N.default.createElement("div",{className:"form-group has-error"},N.default.createElement("p",{className:"input__help error"},this.state.urlError||this.props.serverError)));var a=y.default.getCurrentTeamUrl()+"/channels",n=b.getShortenedURL(a),l=N.default.createElement(E.Tooltip,{id:"urlTooltip"},a);return N.default.createElement(E.Modal,{show:this.props.show,onHide:this.doCancel,onExited:this.props.onModalExited},N.default.createElement(E.Modal.Header,{closeButton:!0},N.default.createElement(E.Modal.Title,null,this.props.title)),N.default.createElement("form",{role:"form",className:"form-horizontal"},N.default.createElement(E.Modal.Body,null,N.default.createElement("div",{className:"modal-intro"},N.default.createElement(T.FormattedMessage,{id:"channel_flow.changeUrlDescription",defaultMessage:"Some characters are now allowed in URLs and may be removed."})),N.default.createElement("div",{className:"form-group"},N.default.createElement("label",{className:"col-sm-2 form__label control-label"},N.default.createElement(T.FormattedMessage,{id:"change_url.urlLabel",defaultMessage:"Channel URL"})),N.default.createElement("div",{className:"col-sm-10"},N.default.createElement("div",{className:e},N.default.createElement(E.OverlayTrigger,{delayShow:C.default.OVERLAY_TIME_DELAY,placement:"top",overlay:l},N.default.createElement("span",{className:"input-group-addon"},n)),N.default.createElement("input",{type:"text",ref:"urlinput",className:"form-control",maxLength:"22",onChange:this.onURLChanged,value:this.state.currentURL,autoFocus:!0,tabIndex:"1"})),t))),N.default.createElement(E.Modal.Footer,null,N.default.createElement("button",{type:"button",className:"btn btn-default",onClick:this.doCancel},N.default.createElement(T.FormattedMessage,{id:"change_url.close",defaultMessage:"Close"})),N.default.createElement("button",{onClick:this.doSubmit,type:"submit",className:"btn btn-primary",tabIndex:"2"},this.props.submitButtonText))))}}]),t}(N.default.Component);t.default=S,S.defaultProps={show:!1,title:"Change URL",submitButtonText:"Save",currentURL:"",serverError:null},S.propTypes={show:N.default.PropTypes.bool.isRequired,title:N.default.PropTypes.node,submitButtonText:N.default.PropTypes.node,currentURL:N.default.PropTypes.string,serverError:N.default.PropTypes.node,onModalSubmit:N.default.PropTypes.func.isRequired,onModalExited:N.default.PropTypes.func,onModalDismissed:N.default.PropTypes.func.isRequired}},2017:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(2036),g=l(p),v=a(24),C=l(v),E=a(15),M=l(E),y=a(23),_=l(y),b=a(8),T=l(b),w=a(20),N=n(w),S=a(47),k=a(81),D=a(1),L=l(D),P=a(245),U=l(P),A=a(27),O=a(13),R=a(37),F=50,I=50,x=100,H=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onChange=a.onChange.bind(a),a.handleJoin=a.handleJoin.bind(a),a.handleHide=a.handleHide.bind(a),a.handleExit=a.handleExit.bind(a),a.nextPage=a.nextPage.bind(a),a.search=a.search.bind(a),a.shouldComponentUpdate=U.default.shouldComponentUpdate.bind(a),a.searchTimeoutId=0,a.state={show:!0,search:!1,channels:null,serverError:null},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){C.default.addChangeListener(this.onChange),N.getMoreChannelsPage(0,2*F)}},{key:"componentWillUnmount",value:function(){C.default.removeChangeListener(this.onChange)}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"handleExit",value:function(){this.props.onModalDismissed&&this.props.onModalDismissed()}},{key:"onChange",value:function(e){this.state.search&&!e||this.setState({channels:C.default.getMoreChannelsList(),serverError:null})}},{key:"nextPage",value:function(e){N.getMoreChannelsPage((e+1)*I,I)}},{key:"handleJoin",value:function(e,t){var a=this;(0,S.joinChannel)(e,function(){R.browserHistory.push(_.default.getCurrentTeamRelativeUrl()+"/channels/"+e.name),t&&t(),a.handleHide()},function(e){a.setState({serverError:e.message}),t&&t()})}},{key:"search",value:function(e){var t=this;if(clearTimeout(this.searchTimeoutId),""===e)return this.onChange(!0),this.setState({search:!1}),void(this.searchTimeoutId="");var a=setTimeout(function(){(0,S.searchMoreChannels)(e,function(e){a===t.searchTimeoutId&&t.setState({search:!0,channels:e})})},x);this.searchTimeoutId=a}},{key:"render",value:function(){var e=void 0;this.state.serverError&&(e=L.default.createElement("div",{className:"form-group has-error"},L.default.createElement("label",{className:"control-label"},this.state.serverError)));var t=L.default.createElement("button",{type:"button",className:"btn btn-primary channel-create-btn",onClick:this.props.handleNewChannel},L.default.createElement(O.FormattedMessage,{id:"more_channels.create",defaultMessage:"Create New Channel"})),a=L.default.createElement("p",{className:"secondary-message"},L.default.createElement(O.FormattedMessage,{id:"more_channels.createClick",defaultMessage:"Click 'Create New Channel' to make a new one"})),n=_.default.isTeamAdminForCurrentTeam()||M.default.isSystemAdminForCurrentUser(),l=M.default.isSystemAdminForCurrentUser();return(0,k.showCreateOption)(T.default.OPEN_CHANNEL,n,l)||(t=null,a=null),L.default.createElement(A.Modal,{dialogClassName:"more-modal more-modal--action",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},L.default.createElement(A.Modal.Header,{closeButton:!0},L.default.createElement(A.Modal.Title,null,L.default.createElement(O.FormattedMessage,{id:"more_channels.title",defaultMessage:"More Channels"})),t),L.default.createElement(A.Modal.Body,null,L.default.createElement(g.default,{channels:this.state.channels,channelsPerPage:I,nextPage:this.nextPage,search:this.search,handleJoin:this.handleJoin,noResultsText:a}),e))}}]),t}(L.default.Component);t.default=H,H.propTypes={onModalDismissed:L.default.PropTypes.func,handleNewChannel:L.default.PropTypes.func}},2018:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(31),r=l(s),o=a(6),i=l(o),d=a(2),u=l(d),h=a(5),c=l(h),m=a(4),f=l(m),p=a(3),g=l(p),v=a(595),C=l(v),E=a(166),M=l(E),y=a(46),_=a(47),b=a(15),T=l(b),w=a(23),N=l(w),S=a(20),k=n(S),D=a(8),L=l(D),P=a(11),U=a(28),A=l(U),O=a(1),R=l(O),F=a(27),I=a(13),x=a(37),H=50,j=L.default.MAX_USERS_IN_GM-1,q=function(t){function a(t){(0,u.default)(this,a);var n=(0,f.default)(this,(a.__proto__||(0,i.default)(a)).call(this,t));n.handleHide=n.handleHide.bind(n),n.handleExit=n.handleExit.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.handleDelete=n.handleDelete.bind(n),n.onChange=n.onChange.bind(n),n.search=n.search.bind(n),n.addValue=n.addValue.bind(n),n.searchTimeoutId=0,n.listType=e.window.mm_config.RestrictDirectMessage;var l=[];if(t.startingUsers)for(var s=0;s<t.startingUsers.length;s++){var o=(0,r.default)({},t.startingUsers[s]);o.value=o.id,o.label="@"+o.username,l.push(o)}return n.state={users:null,values:l,show:!0,search:!1,loadingChannel:-1},n}return(0,g.default)(a,t),(0,c.default)(a,[{key:"componentDidMount",value:function(){T.default.addChangeListener(this.onChange),T.default.addInTeamChangeListener(this.onChange),T.default.addStatusesChangeListener(this.onChange),"any"===this.listType?k.getProfiles(0,2*H):k.getProfilesInTeam(N.default.getCurrentId(),0,2*H)}},{key:"componentWillUnmount",value:function(){T.default.removeChangeListener(this.onChange),T.default.removeInTeamChangeListener(this.onChange),T.default.removeStatusesChangeListener(this.onChange)}},{key:"handleHide",value:function(){this.setState({show:!1})}},{key:"handleExit",value:function(){this.exitToChannel&&x.browserHistory.push(this.exitToChannel),this.props.onModalDismissed&&this.props.onModalDismissed()}},{key:"handleSubmit",value:function(e){var t=this;if(e&&e.preventDefault(),-1===this.state.loadingChannel){var a=this.state.values.map(function(e){return e.id});if(0!==a.length){this.setState({loadingChannel:1});var n=function(e){t.exitToChannel=N.default.getCurrentTeamRelativeUrl()+"/channels/"+e.name,t.setState({loadingChannel:-1}),t.handleHide()},l=function(){t.setState({loadingChannel:-1})};1===a.length?(0,_.openDirectChannelToUser)(a[0],n,l):(0,_.openGroupChannelToUsers)(a,n,l)}}}},{key:"addValue",value:function(e){var t=(0,r.default)([],this.state.values);-1===t.indexOf(e)&&t.push(e),this.setState({values:t})}},{key:"onChange",value:function(e){if(!this.state.search||e){var t=void 0;t="any"===this.listType?(0,r.default)([],T.default.getProfileList(!0)):(0,r.default)([],T.default.getProfileListInTeam(N.default.getCurrentId(),!0));for(var a=0;a<t.length;a++){var n=(0,r.default)({},t[a]);n.value=n.id,n.label="@"+n.username,t[a]=n}this.setState({users:t})}}},{key:"handlePageChange",value:function(e,t){e>t&&k.getProfiles((e+1)*H,H)}},{key:"search",value:function(e){var t=this;if(clearTimeout(this.searchTimeoutId),""===e)return this.onChange(!0),this.setState({search:!1}),void(this.searchTimeoutId="");var a=void 0;a="any"===this.listType?"":N.default.getCurrentId();var n=setTimeout(function(){(0,y.searchUsers)(e,a,{},function(e){if(n===t.searchTimeoutId){for(var a=-1,l=0;l<e.length;l++)e[l].id===T.default.getCurrentId()&&(a=l),e[l].value=e[l].id,e[l].label="@"+e[l].username;-1!==a&&e.splice(a,1),t.setState({search:!0,users:e})}})},L.default.SEARCH_TIMEOUT_MILLISECONDS);this.searchTimeoutId=n}},{key:"handleDelete",value:function(e){this.setState({values:e})}},{key:"renderOption",value:function(e,t,a){var n="";return t&&(n="more-modal__row--selected"),R.default.createElement("div",{key:e.id,ref:t?"selected":e.id,className:"more-modal__row clickable "+n,onClick:function(){return a(e)}},R.default.createElement(M.default,{src:A.default.getUsersRoute()+"/"+e.id+"/image?time="+e.last_picture_update,width:"32",height:"32"}),R.default.createElement("div",{className:"more-modal__details"},R.default.createElement("div",{className:"more-modal__name"},(0,P.displayUsernameForUser)(e)),R.default.createElement("div",{className:"more-modal__description"},e.email)),R.default.createElement("div",{className:"more-modal__actions"},R.default.createElement("div",{className:"more-modal__actions--round"},R.default.createElement("i",{className:"fa fa-plus"}))))}},{key:"renderValue",value:function(e){return e.username}},{key:"render",value:function(){var e=void 0;this.props.startingUsers&&(e=this.state.values&&this.state.values.length>=j?R.default.createElement(I.FormattedMessage,{id:"more_direct_channels.new_convo_note.full",defaultMessage:"You’ve reached the maximum number of people for this conversation. Consider creating a private channel instead."}):R.default.createElement(I.FormattedMessage,{id:"more_direct_channels.new_convo_note",defaultMessage:"This will start a new conversation. If you’re adding a lot of people, consider creating a private channel instead."}));var t=R.default.createElement(I.FormattedMessage,{id:"multiselect.numPeopleRemaining",defaultMessage:"You can add {num, number} more {num, plural, =0 {people} one {person} other {people}}. ",values:{num:j-this.state.values.length}});return R.default.createElement(F.Modal,{dialogClassName:"more-modal more-direct-channels",show:this.state.show,onHide:this.handleHide,onExited:this.handleExit},R.default.createElement(F.Modal.Header,{closeButton:!0},R.default.createElement(F.Modal.Title,null,R.default.createElement(I.FormattedMessage,{id:"more_direct_channels.title",defaultMessage:"Direct Messages"}))),R.default.createElement(F.Modal.Body,null,R.default.createElement(C.default,{key:"moreDirectChannelsList",options:this.state.users,optionRenderer:this.renderOption,values:this.state.values,valueRenderer:this.renderValue,perPage:H,handlePageChange:this.handlePageChange,handleInput:this.search,handleDelete:this.handleDelete,handleAdd:this.addValue,handleSubmit:this.handleSubmit,noteText:e,maxValues:j,numRemainingText:t})))}}]),a}(R.default.Component);t.default=q,q.propTypes={startingUsers:R.default.PropTypes.arrayOf(R.default.PropTypes.object),onModalDismissed:R.default.PropTypes.func}}).call(t,a(17))},2020:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(11),g=n(p),v=a(23),C=l(v),E=a(15),M=l(E),y=a(141),_=a(2021),b=l(_),T=a(2e3),w=l(T),N=a(13),S=a(47),k=a(37),D=a(1),L=l(D),P=1,U=2,A=3,O=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.doSubmit=a.doSubmit.bind(a),a.onModalExited=a.onModalExited.bind(a),a.typeSwitched=a.typeSwitched.bind(a),a.urlChangeRequested=a.urlChangeRequested.bind(a),a.urlChangeSubmitted=a.urlChangeSubmitted.bind(a),a.urlChangeDismissed=a.urlChangeDismissed.bind(a),a.channelDataChanged=a.channelDataChanged.bind(a),a.state={serverError:"",channelType:"O",flowState:P,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){!0===e.show&&!1===this.props.show&&this.setState({serverError:"",channelType:e.channelType,flowState:P,channelDisplayName:"",channelName:"",channelPurpose:"",channelHeader:"",nameModified:!1})}},{key:"doSubmit",value:function(){var e=this;if(!this.state.channelDisplayName)return void this.setState({serverError:g.localizeMessage("channel_flow.invalidName","Invalid Channel Name")});if(this.state.channelName<2)return void this.setState({flowState:A});var t=M.default.getCurrentUser(),a={team_id:t.team_id,name:this.state.channelName,display_name:this.state.channelDisplayName,purpose:this.state.channelPurpose,header:this.state.channelHeader,type:this.state.channelType};(0,S.createChannel)(a,function(t){e.doOnModalExited=function(){k.browserHistory.push(C.default.getCurrentTeamRelativeUrl()+"/channels/"+t.channel.name)},e.props.onModalDismissed()},function(t){return"model.channel.is_valid.2_or_more.app_error"===t.id?void e.setState({flowState:A,serverError:L.default.createElement(N.FormattedMessage,{id:"channel_flow.handleTooShort",defaultMessage:"Channel URL must be 2 or more lowercase alphanumeric characters"})}):"store.sql_channel.update.exists.app_error"===t.id?void e.setState({serverError:g.localizeMessage("channel_flow.alreadyExist","A channel with that URL already exists")}):void e.setState({serverError:t.message})})}},{key:"onModalExited",value:function(){this.doOnModalExited&&this.doOnModalExited()}},{key:"typeSwitched",value:function(){"P"===this.state.channelType?this.setState({channelType:"O"}):this.setState({channelType:"P"})}},{key:"urlChangeRequested",value:function(){this.setState({flowState:U})}},{key:"urlChangeSubmitted",value:function(e){this.state.flowState===A?this.setState({channelName:e,nameModified:!0},this.doSubmit):this.setState({flowState:P,serverError:null,channelName:e,nameModified:!0})}},{key:"urlChangeDismissed",value:function(){this.setState({flowState:P})}},{key:"channelDataChanged",value:function(e){this.setState({channelDisplayName:e.displayName,channelPurpose:e.purpose,channelHeader:e.header}),this.state.nameModified||this.setState({channelName:(0,y.cleanUpUrlable)(e.displayName.trim())})}},{key:"render",value:function(){var e={name:this.state.channelName,displayName:this.state.channelDisplayName,purpose:this.state.channelPurpose},t=!1,a=!1,n=!1,l="",s="";if(this.props.show)switch(this.state.flowState){case P:"O"===this.state.channelType?t=!0:a=!0;break;case U:n=!0,l=L.default.createElement(N.FormattedMessage,{id:"channel_flow.changeUrlTitle",defaultMessage:"Change Channel URL"}),s=l;break;case A:n=!0,l=L.default.createElement(N.FormattedMessage,{id:"channel_flow.set_url_title",defaultMessage:"Set Channel URL"}),s=L.default.createElement(N.FormattedMessage,{id:"channel_flow.create",defaultMessage:"Create Channel"})}return L.default.createElement("span",null,L.default.createElement(b.default,{show:t,channelType:"O",channelData:e,serverError:this.state.serverError,onSubmitChannel:this.doSubmit,onModalDismissed:this.props.onModalDismissed,onModalExited:this.onModalExited,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),L.default.createElement(b.default,{show:a,channelType:"P",channelData:e,serverError:this.state.serverError,onSubmitChannel:this.doSubmit,onModalExited:this.onModalExited,onModalDismissed:this.props.onModalDismissed,onTypeSwitched:this.typeSwitched,onChangeURLPressed:this.urlChangeRequested,onDataChanged:this.channelDataChanged}),L.default.createElement(w.default,{show:n,title:l,submitButtonText:s,currentURL:this.state.channelName,serverError:this.state.serverError,onModalSubmit:this.urlChangeSubmitted,onModalDismissed:this.urlChangeDismissed,onModalExited:this.onModalExited}))}}]),t}(L.default.Component);t.default=O,O.defaultProps={show:!1,channelType:"O"},O.propTypes={show:L.default.PropTypes.bool.isRequired,channelType:L.default.PropTypes.string.isRequired,onModalDismissed:L.default.PropTypes.func.isRequired}},2021:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(0),g=l(p),v=a(30),C=l(v),E=a(141),M=a(59),y=n(M),_=a(11),b=n(_),T=a(81),w=n(T),N=a(8),S=l(N),k=a(15),D=l(k),L=a(23),P=l(L),U=a(42),A=l(U),O=a(13),R=a(27),F=a(1),I=l(F),x=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleChange=a.handleChange.bind(a),a.onEnterKeyDown=a.onEnterKeyDown.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.ctrlSend=A.default.getBool(S.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter"),a.state={displayNameError:""},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentWillReceiveProps",value:function(e){!0===e.show&&!1===this.props.show?(this.setState({displayNameError:""}),document.addEventListener("keydown",this.onEnterKeyDown)):!1===e.show&&!0===this.props.show&&document.removeEventListener("keydown",this.onEnterKeyDown)}},{key:"componentDidMount",value:function(){y.isInternetExplorer()&&(0,g.default)("body").addClass("browser--ie"),A.default.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){A.default.removeChangeListener(this.onPreferenceChange)}},{key:"onPreferenceChange",value:function(){this.ctrlSend=A.default.getBool(S.default.Preferences.CATEGORY_ADVANCED_SETTINGS,"send_on_ctrl_enter")}},{key:"onEnterKeyDown",value:function(e){this.ctrlSend&&e.keyCode===S.default.KeyCodes.ENTER&&e.ctrlKey?this.handleSubmit(e):this.ctrlSend||e.keyCode!==S.default.KeyCodes.ENTER||e.shiftKey||e.altKey||this.handleSubmit(e)}},{key:"handleSubmit",value:function(e){if(e.preventDefault(),C.default.findDOMNode(this.refs.display_name).value.trim().length<S.default.MIN_CHANNELNAME_LENGTH)return void this.setState({displayNameError:!0});this.props.onSubmitChannel()}},{key:"handleChange",value:function(){var e={displayName:this.refs.display_name.value,header:this.refs.channel_header.value,purpose:this.refs.channel_purpose.value};this.props.onDataChanged(e)}},{key:"render",value:function(){var e=null,t=null,a="form-group";this.state.displayNameError&&(e=I.default.createElement("p",{className:"input__help error"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.displayNameError",defaultMessage:"Channel name must be 2 or more characters"}),this.state.displayNameError),a+=" has-error"),this.props.serverError&&(t=I.default.createElement("div",{className:"form-group has-error"},I.default.createElement("p",{className:"input__help error"},this.props.serverError)));var n=I.default.createElement("a",{href:"#",onClick:this.props.onTypeSwitched},I.default.createElement(O.FormattedMessage,{id:"channel_modal.publicChannel1",defaultMessage:"Create a public channel"})),l=I.default.createElement("a",{href:"#",onClick:this.props.onTypeSwitched},I.default.createElement(O.FormattedMessage,{id:"channel_modal.privateGroup2",defaultMessage:"Create a private channel"})),s=P.default.isTeamAdminForCurrentTeam()||D.default.isSystemAdminForCurrentUser(),r=D.default.isSystemAdminForCurrentUser();w.showCreateOption(S.default.OPEN_CHANNEL,s,r)||(n=null),w.showCreateOption(S.default.PRIVATE_CHANNEL,s,r)||(l=null);var o="";switch(this.props.channelType){case"P":o=I.default.createElement("div",{className:"modal-intro"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.privateGroup1",defaultMessage:"Create a new private channel with restricted membership. "}),n);break;case"O":o=I.default.createElement("div",{className:"modal-intro"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.publicChannel2",defaultMessage:"Create a new public channel anyone can join. "}),l)}var i=(0,E.getShortenedURL)();return I.default.createElement("span",null,I.default.createElement(R.Modal,{dialogClassName:"new-channel__modal",show:this.props.show,bsSize:"large",onHide:this.props.onModalDismissed,onExited:this.props.onModalExited},I.default.createElement(R.Modal.Header,{closeButton:!0},I.default.createElement(R.Modal.Title,null,I.default.createElement(O.FormattedMessage,{id:"channel_modal.modalTitle",defaultMessage:"New Channel"}))),I.default.createElement("form",{role:"form",className:"form-horizontal"},I.default.createElement(R.Modal.Body,null,I.default.createElement("div",null,o),I.default.createElement("div",{className:a},I.default.createElement("label",{className:"col-sm-3 form__label control-label"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.name",defaultMessage:"Name"})),I.default.createElement("div",{className:"col-sm-9"},I.default.createElement("input",{onChange:this.handleChange,type:"text",ref:"display_name",className:"form-control",placeholder:b.localizeMessage("channel_modal.nameEx",'E.g.: "Bugs", "Marketing", "客户支持"'),maxLength:S.default.MAX_CHANNELNAME_LENGTH,value:this.props.channelData.displayName,autoFocus:!0,tabIndex:"1"}),e,I.default.createElement("p",{className:"input__help dark"},"URL: "+i+this.props.channelData.name+" (",I.default.createElement("a",{href:"#",onClick:this.props.onChangeURLPressed},I.default.createElement(O.FormattedMessage,{id:"channel_modal.edit",defaultMessage:"Edit"})),")"))),I.default.createElement("div",{className:"form-group"},I.default.createElement("div",{className:"col-sm-3"},I.default.createElement("label",{className:"form__label control-label"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.purpose",defaultMessage:"Purpose"})),I.default.createElement("label",{className:"form__label light"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),I.default.createElement("div",{className:"col-sm-9"},I.default.createElement("textarea",{className:"form-control no-resize",ref:"channel_purpose",rows:"4",placeholder:b.localizeMessage("channel_modal.purposeEx",'E.g.: "A channel to file bugs and improvements"'),maxLength:"250",value:this.props.channelData.purpose,onChange:this.handleChange,tabIndex:"2"}),I.default.createElement("p",{className:"input__help"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.descriptionHelp",defaultMessage:"Describe how this channel should be used."})))),I.default.createElement("div",{className:"form-group less"},I.default.createElement("div",{className:"col-sm-3"},I.default.createElement("label",{className:"form__label control-label"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.header",defaultMessage:"Header"})),I.default.createElement("label",{className:"form__label light"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.optional",defaultMessage:"(optional)"}))),I.default.createElement("div",{className:"col-sm-9"},I.default.createElement("textarea",{className:"form-control no-resize",ref:"channel_header",rows:"4",placeholder:b.localizeMessage("channel_modal.headerEx",'E.g.: "[Link Title](http://example.com)"'),maxLength:"1024",value:this.props.channelData.header,onChange:this.handleChange,tabIndex:"2"}),I.default.createElement("p",{className:"input__help"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.headerHelp",defaultMessage:"Set text that will appear in the header of the channel beside the channel name. For example, include frequently used links by typing [Link Title](http://example.com)."})),t))),I.default.createElement(R.Modal.Footer,null,I.default.createElement("button",{type:"button",className:"btn btn-default",onClick:this.props.onModalDismissed},I.default.createElement(O.FormattedMessage,{id:"channel_modal.cancel",defaultMessage:"Cancel"})),I.default.createElement("button",{onClick:this.handleSubmit,type:"submit",className:"btn btn-primary",tabIndex:"3"},I.default.createElement(O.FormattedMessage,{id:"channel_modal.createNew",defaultMessage:"Create New Channel"}))))))}}]),t}(I.default.Component);t.default=x,x.defaultProps={show:!1,channelType:"O",serverError:null},x.propTypes={show:I.default.PropTypes.bool.isRequired,channelType:I.default.PropTypes.string.isRequired,channelData:I.default.PropTypes.object.isRequired,serverError:I.default.PropTypes.node,onSubmitChannel:I.default.PropTypes.func.isRequired,onModalDismissed:I.default.PropTypes.func.isRequired,onModalExited:I.default.PropTypes.func,onTypeSwitched:I.default.PropTypes.func.isRequired,onChangeURLPressed:I.default.PropTypes.func.isRequired,onDataChanged:I.default.PropTypes.func.isRequired}},2036:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(164),g=l(p),v=a(59),C=n(v),E=a(0),M=l(E),y=a(1),_=l(y),b=a(11),T=a(13),w=a(121),N=l(w),S=500,k=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.createChannelRow=a.createChannelRow.bind(a),a.nextPage=a.nextPage.bind(a),a.previousPage=a.previousPage.bind(a),a.doSearch=a.doSearch.bind(a),a.nextTimeoutId=0,a.state={joiningChannel:"",page:0,nextDisabled:!1},a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){C.isMobile()||this.refs.filter.focus()}},{key:"componentDidUpdate",value:function(e,t){t.page!==this.state.page&&(0,M.default)(this.refs.channelList).scrollTop(0)}},{key:"handleJoin",value:function(e){var t=this;this.setState({joiningChannel:e.id}),this.props.handleJoin(e,function(){t.setState({joiningChannel:""})})}},{key:"createChannelRow",value:function(e){var t=void 0;return t=this.state.joiningChannel===e.id?_.default.createElement("img",{className:"join-channel-loading-gif",src:N.default}):_.default.createElement("button",{onClick:this.handleJoin.bind(this,e),className:"btn btn-primary"},_.default.createElement(T.FormattedMessage,{id:"more_channels.join",defaultMessage:"Join"})),_.default.createElement("div",{className:"more-modal__row",key:e.id},_.default.createElement("div",{className:"more-modal__details"},_.default.createElement("p",{className:"more-modal__name"},e.display_name),_.default.createElement("p",{className:"more-modal__description"},e.purpose)),_.default.createElement("div",{className:"more-modal__actions"},t))}},{key:"nextPage",value:function(e){var t=this;e.preventDefault(),this.setState({page:this.state.page+1,nextDisabled:!0}),this.nextTimeoutId=setTimeout(function(){return t.setState({nextDisabled:!1})},S),this.props.nextPage(this.state.page+1)}},{key:"previousPage",value:function(e){e.preventDefault(),this.setState({page:this.state.page-1})}},{key:"doSearch",value:function(){var e=this.refs.filter.value;this.props.search(e),""===e&&this.setState({page:0})}},{key:"render",value:function(){var e=this.props.channels,t=void 0,a=void 0,n=void 0;if(null==e)t=_.default.createElement(g.default,null);else if(0===e.length)t=_.default.createElement("div",{className:"no-channel-message"},_.default.createElement("p",{className:"primary-message"},_.default.createElement(T.FormattedMessage,{id:"more_channels.noMore",defaultMessage:"No more channels to join"})),this.props.noResultsText);else{var l=this.state.page*this.props.channelsPerPage,s=l+this.props.channelsPerPage,r=this.props.channels.slice(l,s);t=r.map(this.createChannelRow),r.length>=this.props.channelsPerPage&&(a=_.default.createElement("button",{className:"btn btn-default filter-control filter-control__next",onClick:this.nextPage,disabled:this.state.nextDisabled},_.default.createElement(T.FormattedMessage,{id:"more_channels.next",defaultMessage:"Next"}))),this.state.page>0&&(n=_.default.createElement("button",{className:"btn btn-default filter-control filter-control__prev",onClick:this.previousPage},_.default.createElement(T.FormattedMessage,{id:"more_channels.prev",defaultMessage:"Previous"})))}return _.default.createElement("div",{className:"filtered-user-list"},_.default.createElement("div",{className:"filter-row"},_.default.createElement("div",{className:"col-sm-12"},_.default.createElement("input",{ref:"filter",className:"form-control filter-textbox",placeholder:(0,b.localizeMessage)("filtered_channels_list.search","Search channels"),onInput:this.doSearch}))),_.default.createElement("div",{ref:"channelList",className:"more-modal__list"},_.default.createElement("div",null,t)),_.default.createElement("div",{className:"filter-controls"},n,a))}}]),t}(_.default.Component);t.default=k,k.defaultProps={channels:[]},k.propTypes={channels:_.default.PropTypes.arrayOf(_.default.PropTypes.object),channelsPerPage:_.default.PropTypes.number,nextPage:_.default.PropTypes.func.isRequired,search:_.default.PropTypes.func.isRequired,handleJoin:_.default.PropTypes.func.isRequired,noResultsText:_.default.PropTypes.object}},2039:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(1),g=l(p),v=a(28),C=l(v),E=a(42),M=l(E),y=a(11),_=n(y),b=a(2040),T=l(b),w=a(27),N=a(8),S=a(573),k=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.toggleDropdown=a.toggleDropdown.bind(a),a.onPreferenceChange=a.onPreferenceChange.bind(a),a.state=a.getStateFromStores(),a}return(0,f.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){M.default.addChangeListener(this.onPreferenceChange)}},{key:"componentWillUnmount",value:function(){M.default.removeChangeListener(this.onPreferenceChange)}},{key:"getStateFromStores",value:function(){return{showTutorialTip:M.default.getInt(N.Preferences.TUTORIAL_STEP,this.props.currentUser.id,999)===N.TutorialSteps.MENU_POPOVER&&!_.isMobile()}}},{key:"onPreferenceChange",value:function(){this.setState(this.getStateFromStores())}},{key:"toggleDropdown",value:function(e){e.preventDefault(),this.refs.dropdown.toggleDropdown()}},{key:"render",value:function(){var e=this.props.currentUser,t=null;if(!e)return null;e.last_picture_update&&(t=g.default.createElement("img",{className:"user__picture",src:C.default.getUsersRoute()+"/"+e.id+"/image?time="+e.last_picture_update}));var a=null;this.state.showTutorialTip&&(a=(0,S.createMenuTip)(this.toggleDropdown));var n=null;return n=""===this.props.teamDescription?g.default.createElement("div",{className:"team__name"},this.props.teamDisplayName):g.default.createElement(w.OverlayTrigger,{trigger:["hover","focus"],delayShow:N.Constants.OVERLAY_TIME_DELAY,placement:"bottom",overlay:g.default.createElement(w.Tooltip,{id:"team-name__tooltip"},this.props.teamDescription),ref:"descriptionOverlay"},g.default.createElement("div",{className:"team__name"},this.props.teamDisplayName)),g.default.createElement("div",{className:"team__header theme"},a,g.default.createElement("div",null,t,g.default.createElement("div",{className:"header__info"},g.default.createElement("div",{className:"user__name"},"@"+e.username),n)),g.default.createElement(T.default,{ref:"dropdown",teamType:this.props.teamType,teamDisplayName:this.props.teamDisplayName,teamName:this.props.teamName,currentUser:this.props.currentUser}))}}]),t}(g.default.Component);t.default=k,k.defaultProps={teamDisplayName:"",teamDescription:"",teamType:""},k.propTypes={teamDisplayName:g.default.PropTypes.string,teamDescription:g.default.PropTypes.string,teamName:g.default.PropTypes.string,teamType:g.default.PropTypes.string,currentUser:g.default.PropTypes.object}},2040:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=l(s),o=a(2),i=l(o),d=a(5),u=l(d),h=a(4),c=l(h),m=a(3),f=l(m),p=a(0),g=l(p),v=a(30),C=l(v),E=a(59),M=n(E),y=a(11),_=n(y),b=a(41),T=n(b),w=a(23),N=l(w),S=a(15),k=l(S),D=a(334),L=l(D),P=a(1670),U=l(P),A=a(2041),O=l(A),R=a(578),F=l(R),I=a(1678),x=l(I),H=a(1671),j=l(H),q=a(8),G=a(27),B=a(13),K=a(37),W=a(1),V=l(W),J=function(t){function a(e){(0,i.default)(this,a);var t=(0,c.default)(this,(a.__proto__||(0,r.default)(a)).call(this,e));return t.toggleDropdown=t.toggleDropdown.bind(t),t.handleAboutModal=t.handleAboutModal.bind(t),t.aboutModalDismissed=t.aboutModalDismissed.bind(t),t.toggleAccountSettingsModal=t.toggleAccountSettingsModal.bind(t),t.showAddUsersToTeamModal=t.showAddUsersToTeamModal.bind(t),t.hideAddUsersToTeamModal=t.hideAddUsersToTeamModal.bind(t),t.showInviteMemberModal=t.showInviteMemberModal.bind(t),t.showGetTeamInviteLinkModal=t.showGetTeamInviteLinkModal.bind(t),t.showTeamMembersModal=t.showTeamMembersModal.bind(t),t.hideTeamMembersModal=t.hideTeamMembersModal.bind(t),t.onTeamChange=t.onTeamChange.bind(t),t.openAccountSettings=t.openAccountSettings.bind(t),t.renderCustomEmojiLink=t.renderCustomEmojiLink.bind(t),t.handleClick=t.handleClick.bind(t),t.state={teamMembers:N.default.getMyTeamMembers(),teamListings:N.default.getTeamListings(),showAboutModal:!1,showDropdown:!1,showTeamMembersModal:!1,showUserSettingsModal:!1,showAddUsersToTeamModal:!1},t}return(0,f.default)(a,t),(0,u.default)(a,[{key:"handleClick",value:function(e){L.default.isBusy()&&(L.default.emitChanged({action:q.WebrtcActionTypes.IN_PROGRESS}),e.preventDefault())}},{key:"toggleDropdown",value:function(e){e&&e.preventDefault(),this.setState({showDropdown:!this.state.showDropdown})}},{key:"handleAboutModal",value:function(e){e.preventDefault(),this.setState({showAboutModal:!0,showDropdown:!1})}},{key:"aboutModalDismissed",value:function(){this.setState({showAboutModal:!1})}},{key:"toggleAccountSettingsModal",value:function(e){e.preventDefault(),this.setState({showUserSettingsModal:!this.state.showUserSettingsModal,showDropdown:!1})}},{key:"showAddUsersToTeamModal",value:function(e){e.preventDefault(),this.setState({showAddUsersToTeamModal:!0,showDropdown:!1})}},{key:"hideAddUsersToTeamModal",value:function(){this.setState({showAddUsersToTeamModal:!1})}},{key:"showInviteMemberModal",value:function(e){e.preventDefault(),this.setState({showDropdown:!1}),T.showInviteMemberModal()}},{key:"showGetTeamInviteLinkModal",value:function(e){e.preventDefault(),this.setState({showDropdown:!1}),T.showGetTeamInviteLinkModal()}},{key:"showTeamMembersModal",value:function(e){e.preventDefault(),this.setState({showTeamMembersModal:!0})}},{key:"hideTeamMembersModal",value:function(){this.setState({showTeamMembersModal:!1})}},{key:"componentDidMount",value:function(){N.default.addChangeListener(this.onTeamChange),document.addEventListener("keydown",this.openAccountSettings)}},{key:"onTeamChange",value:function(){this.setState({teamMembers:N.default.getMyTeamMembers(),teamListings:N.default.getTeamListings()})}},{key:"componentWillUnmount",value:function(){(0,g.default)(C.default.findDOMNode(this.refs.dropdown)).off("hide.bs.dropdown"),N.default.removeChangeListener(this.onTeamChange),document.removeEventListener("keydown",this.openAccountSettings)}},{key:"openAccountSettings",value:function(e){_.cmdOrCtrlPressed(e)&&e.shiftKey&&e.keyCode===q.Constants.KeyCodes.A&&this.toggleAccountSettingsModal(e)}},{key:"renderCustomEmojiLink",value:function(){return"true"===window.mm_config.EnableCustomEmoji&&_.canCreateCustomEmoji(this.props.currentUser)?V.default.createElement("li",null,V.default.createElement(K.Link,{onClick:this.handleClick,to:"/"+this.props.teamName+"/emoji"},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.emoji",defaultMessage:"Custom Emoji"}))):null}},{key:"render",value:function(){var t=this,a=e.mm_config,n=this.props.currentUser,l="",s="",r="",o="",i="",d=!1,u=!1,h=null,c=null;if(!n)return null;null!=n&&(d=N.default.isTeamAdminForCurrentTeam()||k.default.isSystemAdminForCurrentUser(),u=k.default.isSystemAdminForCurrentUser(),s=V.default.createElement("li",null,V.default.createElement("a",{href:"#",onClick:this.showInviteMemberModal},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.inviteMember",defaultMessage:"Send Email Invite"}))),r=V.default.createElement("li",null,V.default.createElement("a",{id:"addUsersToTeam",href:"#",onClick:this.showAddUsersToTeamModal},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.addMemberToTeam",defaultMessage:"Add Members to Team"}))),this.props.teamType===q.Constants.OPEN_TEAM&&"true"===a.EnableUserCreation&&(l=V.default.createElement("li",null,V.default.createElement("a",{href:"#",onClick:this.showGetTeamInviteLinkModal},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.teamLink",defaultMessage:"Get Team Invite Link"})))),"true"===e.window.mm_license.IsLicensed&&(a.RestrictTeamInvite!==q.Constants.PERMISSIONS_SYSTEM_ADMIN||u?a.RestrictTeamInvite!==q.Constants.PERMISSIONS_TEAM_ADMIN||d||(l=null,s=null,r=null):(l=null,s=null,r=null)));var m=V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.manageMembers",defaultMessage:"Manage Members"});d?h=V.default.createElement("li",null,V.default.createElement("a",{href:"#","data-toggle":"modal","data-target":"#team_settings",onClick:this.toggleDropdown},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.teamSettings",defaultMessage:"Team Settings"}))):m=V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.viewMembers",defaultMessage:"View Members"}),o=V.default.createElement("li",null,V.default.createElement("a",{href:"#",onClick:this.showTeamMembersModal},m)),("true"===a.EnableIncomingWebhooks||"true"===a.EnableOutgoingWebhooks||"true"===a.EnableCommands||"true"===a.EnableOAuthServiceProvider&&(u||"true"!==a.EnableOnlyAdminIntegrations))&&(d||"true"!==a.EnableOnlyAdminIntegrations)&&(c=V.default.createElement("li",null,V.default.createElement(K.Link,{to:"/"+this.props.teamName+"/integrations",onClick:this.handleClick},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.integrations",defaultMessage:"Integrations"})))),u&&(i=V.default.createElement("li",null,V.default.createElement(K.Link,{id:"systemConsole",to:"/admin_console",onClick:this.handleClick},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.console",defaultMessage:"System Console"}))));var f=[],p=!1;("true"===a.EnableTeamCreation||k.default.isSystemAdminForCurrentUser())&&f.push(V.default.createElement("li",{key:"newTeam_li"},V.default.createElement(K.Link,{key:"newTeam_a",to:"/create_team",onClick:this.handleClick},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.create",defaultMessage:"Create a New Team"}))));var g=this.state.teamMembers.reduce(function(e,t){return e[t.team_id]=!0,e},{});for(var v in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(v)&&!g[v]){p=!0;break}p&&f.push(V.default.createElement("li",{key:"joinTeam_li"},V.default.createElement(K.Link,{onClick:this.handleClick,to:"/select_team"},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.join",defaultMessage:"Join Another Team"})))),f.push(V.default.createElement("li",{key:"leaveTeam_li"},V.default.createElement("a",{href:"#",onClick:T.showLeaveTeamModal},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.leave",defaultMessage:"Leave Team"}))));var C=null;a.HelpLink&&(C=V.default.createElement("li",null,V.default.createElement(K.Link,{target:"_blank",rel:"noopener noreferrer",to:a.HelpLink},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.help",defaultMessage:"Help"}))));var E=null;a.ReportAProblemLink&&(E=V.default.createElement("li",null,V.default.createElement(K.Link,{target:"_blank",rel:"noopener noreferrer",to:a.ReportAProblemLink},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.report",defaultMessage:"Report a Problem"}))));var y=null;e.window.mm_config.AppDownloadLink&&!M.isMobileApp()&&(y=V.default.createElement("li",null,V.default.createElement(K.Link,{target:"_blank",rel:"noopener noreferrer",to:e.window.mm_config.AppDownloadLink},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.nativeApps",defaultMessage:"Download Apps"}))));var _=void 0;this.state.showTeamMembersModal&&(_=V.default.createElement(F.default,{onLoad:this.toggleDropdown,onHide:this.hideTeamMembersModal,isAdmin:d}));var b=void 0;this.state.showAddUsersToTeamModal&&(b=V.default.createElement(j.default,{onModalDismissed:this.hideAddUsersToTeamModal}));var w=V.default.createElement("li",null,V.default.createElement("a",{id:"accountSettings",href:"#",onClick:this.toggleAccountSettingsModal},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.accountSettings",defaultMessage:"Account Settings"}))),S=V.default.createElement("li",null,V.default.createElement("a",{href:"#",onClick:this.handleAboutModal},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.about",defaultMessage:"About Mattermost"}))),D=V.default.createElement("li",null,V.default.createElement("a",{id:"logout",href:"#",onClick:function(){return T.emitUserLoggedOutEvent()}},V.default.createElement(B.FormattedMessage,{id:"navbar_dropdown.logout",defaultMessage:"Logout"}))),L=this.renderCustomEmojiLink(),P=null;(s||l||r)&&(P=V.default.createElement("li",{className:"divider"}));var A=null;(h||o||f)&&(A=V.default.createElement("li",{className:"divider"}));var R=null;(c||L)&&(R=V.default.createElement("li",{className:"divider"}));var I=null;i&&(I=V.default.createElement("li",{className:"divider"}));var H=null;(C||E||y||S)&&(H=V.default.createElement("li",{className:"divider"}));var W=null;return D&&(W=V.default.createElement("li",{className:"divider"})),V.default.createElement(G.Dropdown,{id:"sidebar-header-dropdown",defaultOpen:this.state.showDropdown,onClose:this.toggleDropdown,className:"sidebar-header-dropdown",pullRight:!0},V.default.createElement(O.default,{bsRole:"toggle",onClick:this.toggleDropdown}),V.default.createElement(G.Dropdown.Menu,null,w,P,s,l,r,A,h,o,f,R,c,L,I,i,H,C,E,y,S,W,D,V.default.createElement(x.default,{show:this.state.showUserSettingsModal,onModalDismissed:function(){return t.setState({showUserSettingsModal:!1})}}),_,V.default.createElement(U.default,{show:this.state.showAboutModal,onModalDismissed:this.aboutModalDismissed}),b))}}]),a}(V.default.Component);J.propTypes={teamType:V.default.PropTypes.string,teamDisplayName:V.default.PropTypes.string,teamName:V.default.PropTypes.string,currentUser:V.default.PropTypes.object},J.defaultProps={teamType:""},t.default=J}).call(t,a(17))},2041:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),s=n(l),r=a(2),o=n(r),i=a(5),d=n(i),u=a(4),h=n(u),c=a(3),m=n(c),f=a(1),p=n(f),g=a(8),v=n(g),C=function(e){function t(){return(0,o.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){return p.default.createElement("a",{href:"#",id:"sidebarHeaderDropdownButton",className:"sidebar-header-dropdown__toggle",onClick:this.props.onClick},p.default.createElement("span",{className:"sidebar-header-dropdown__icon",dangerouslySetInnerHTML:{__html:v.default.MENU_ICON}}))}}]),t}(p.default.PureComponent);C.propTypes={bsRole:p.default.PropTypes.oneOf(["toggle"]).isRequired,onClick:p.default.PropTypes.func.isRequired},t.default=C},2051:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),s=n(l),r=a(2),o=n(r),i=a(5),d=n(i),u=a(4),h=n(u),c=a(3),m=n(c),f=a(1),p=n(f),g=function(e){function t(){return(0,o.default)(this,t),(0,h.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e="none";return this.props.show&&(e="block"),p.default.createElement("div",{className:"nav-pills__unread-indicator "+this.props.extraClass,style:{display:e}},this.props.text)}}]),t}(p.default.Component);t.default=g,g.defaultProps={show:!1,extraClass:"",text:""},g.propTypes={show:p.default.PropTypes.bool,extraClass:p.default.PropTypes.string,text:p.default.PropTypes.object}},2059:function(e,t,a){e.exports=a.p+"files/2c9d31cec343005b617e3b39fdb20895.png"},343:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(71),r=l(s),o=a(9),i=l(o),d=a(31),u=l(d),h=a(43),c=l(h),m=a(72),f=l(m),p=a(6),g=l(p),v=a(2),C=l(v),E=a(5),M=l(E),y=a(4),_=l(y),b=a(3),T=l(b),w=a(0),N=l(w),S=a(30),k=l(S),D=a(2020),L=l(D),P=a(2018),U=l(P),A=a(2017),O=l(A),R=a(2039),F=l(R),I=a(2051),x=l(I),H=a(573),j=l(H),q=a(577),G=l(q),B=a(24),K=l(B),W=a(15),V=l(W),J=a(23),z=l(J),Y=a(42),X=l(Y),Z=a(1661),Q=l(Z),$=a(20),ee=n($),te=a(570),ae=a(11),ne=n(ae),le=a(81),se=n(le),re=a(47),oe=n(re),ie=a(165),de=a(8),ue=a(13),he=a(27),ce=a(121),me=l(ce),fe=a(1),pe=l(fe),ge=a(37),ve=a(604),Ce=l(ve),Ee=a(2059),Me=l(Ee),ye=de.Constants.Preferences,_e=de.Constants.TutorialSteps,be=function(t){function a(e){(0,C.default)(this,a);var t=(0,_.default)(this,(a.__proto__||(0,g.default)(a)).call(this,e));t.badgesActive=!1,t.firstUnreadChannel=null,t.lastUnreadChannel=null,t.getStateFromStores=t.getStateFromStores.bind(t),t.onChange=t.onChange.bind(t),t.onModalChange=t.onModalChange.bind(t),t.onInChannelChange=t.onInChannelChange.bind(t),t.onScroll=t.onScroll.bind(t),t.updateUnreadIndicators=t.updateUnreadIndicators.bind(t),t.handleLeaveDirectChannel=t.handleLeaveDirectChannel.bind(t),t.showMoreChannelsModal=t.showMoreChannelsModal.bind(t),t.hideMoreChannelsModal=t.hideMoreChannelsModal.bind(t),t.showNewChannelModal=t.showNewChannelModal.bind(t),t.hideNewChannelModal=t.hideNewChannelModal.bind(t),t.showMoreDirectChannelsModal=t.showMoreDirectChannelsModal.bind(t),t.hideMoreDirectChannelsModal=t.hideMoreDirectChannelsModal.bind(t),t.createChannelElement=t.createChannelElement.bind(t),t.updateTitle=t.updateTitle.bind(t),t.navigateChannelShortcut=t.navigateChannelShortcut.bind(t),t.navigateUnreadChannelShortcut=t.navigateUnreadChannelShortcut.bind(t),t.getDisplayedChannels=t.getDisplayedChannels.bind(t),t.updateScrollbarOnChannelChange=t.updateScrollbarOnChannelChange.bind(t),t.isLeaving=new f.default,t.isSwitchingChannel=!1,t.closedDirectChannel=!1;var n=t.getStateFromStores();return n.newChannelModalType="",n.showDirectChannelsModal=!1,n.showMoreChannelsModal=!1,n.loadingDMChannel=-1,n.inChannelChange=!1,t.state=n,t}return(0,T.default)(a,t),(0,M.default)(a,[{key:"getTotalUnreadCount",value:function(){var e=this,t=0,a=0,n=this.state.unreadCounts;return this.state.teamMembers.forEach(function(n){n.team_id!==e.state.currentTeam.id&&(t+=n.msg_count||0,a+=n.mention_count||0)}),(0,c.default)(n).forEach(function(l){var s=K.default.get(l);!s||s.type!==de.Constants.DM_CHANNEL&&s.type!==de.Constants.GM_CHANNEL&&s.team_id!==e.state.currentTeam.id||(t+=n[l].msgs,a+=n[l].mentions)}),{msgs:t,mentions:a}}},{key:"getStateFromStores",value:function(){var e=K.default.getMyMembers(),t=z.default.getMyTeamMembers(),a=K.default.getCurrentId(),n=X.default.getInt(ye.TUTORIAL_STEP,V.default.getCurrentId(),999),l=K.default.getAll().map(function(e){return(0,u.default)({},e)}),s=se.buildDisplayableChannelList(l);return(0,i.default)({activeId:a,members:e,teamMembers:t},s,{unreadCounts:JSON.parse((0,r.default)(K.default.getUnreadCounts())),showTutorialTip:n===_e.CHANNEL_POPOVER,currentTeam:z.default.getCurrent(),currentUser:V.default.getCurrentUser(),townSquare:K.default.getByName(de.Constants.DEFAULT_CHANNEL),offTopic:K.default.getByName(de.Constants.OFFTOPIC_CHANNEL)})}},{key:"onInChannelChange",value:function(){this.setState({inChannelChange:!this.state.inChannelChange})}},{key:"componentDidMount",value:function(){K.default.addChangeListener(this.onChange),V.default.addChangeListener(this.onChange),V.default.addInTeamChangeListener(this.onChange),V.default.addInChannelChangeListener(this.onInChannelChange),V.default.addStatusesChangeListener(this.onChange),z.default.addChangeListener(this.onChange),X.default.addChangeListener(this.onChange),Q.default.addModalListener(de.ActionTypes.TOGGLE_DM_MODAL,this.onModalChange),this.updateTitle(),this.updateUnreadIndicators(),document.addEventListener("keydown",this.navigateChannelShortcut),document.addEventListener("keydown",this.navigateUnreadChannelShortcut)}},{key:"shouldComponentUpdate",value:function(e,t){return!ne.areObjectsEqual(t,this.state)}},{key:"componentDidUpdate",value:function(e,t){this.updateTitle(),this.updateUnreadIndicators(),ne.isMobile()||(0,N.default)(".sidebar--left .nav-pills__container").perfectScrollbar(),this.state.currentTeam!==t.currentTeam&&(this.refs.container.scrollTop=0,(0,N.default)(".nav-pills__container").perfectScrollbar("update")),this.state.activeId!==t.activeId&&(this.closedDirectChannel?this.closedDirectChannel=!1:((0,N.default)(".app__body .inner-wrap").removeClass("move--right"),(0,N.default)(".app__body .sidebar--left").removeClass("move--right"),(0,N.default)(".multi-teams .team-sidebar").removeClass("move--right")))}},{key:"componentWillUnmount",value:function(){K.default.removeChangeListener(this.onChange),V.default.removeChangeListener(this.onChange),V.default.removeInTeamChangeListener(this.onChange),V.default.removeInChannelChangeListener(this.onChange),V.default.removeStatusesChangeListener(this.onChange),z.default.removeChangeListener(this.onChange),X.default.removeChangeListener(this.onChange),Q.default.removeModalListener(de.ActionTypes.TOGGLE_DM_MODAL,this.onModalChange),document.removeEventListener("keydown",this.navigateChannelShortcut),document.removeEventListener("keydown",this.navigateUnreadChannelShortcut)}},{key:"onModalChange",value:function(e,t){this.showMoreDirectChannelsModal(t.startingUsers)}},{key:"onChange",value:function(){this.state.currentTeam.id!==z.default.getCurrentId()&&K.default.clear(),this.setState(this.getStateFromStores()),this.updateTitle()}},{key:"updateTitle",value:function(){var t=K.default.getCurrent();if(t&&this.state.currentTeam){var a="";null!=e.window.mm_config.SiteName&&(a=e.window.mm_config.SiteName);var n=t.display_name;if(t.type===de.Constants.DM_CHANNEL){var l=ne.getDirectTeammate(t.id);null!=l&&(n=l.username)}else t.type===de.Constants.GM_CHANNEL&&(n=se.buildGroupChannelName(t.id));var s=this.getTotalUnreadCount(),r=s.mentions>0?"("+s.mentions+") ":"",o=s.msgs>0?"* ":"";document.title=r+o+n+" - "+this.state.currentTeam.display_name+" "+a}}},{key:"onScroll",value:function(){this.updateUnreadIndicators()}},{key:"updateUnreadIndicators",value:function(){var e=(0,N.default)(k.default.findDOMNode(this.refs.container)),t=!1,a=!1;if(this.firstUnreadChannel){var n=(0,N.default)(k.default.findDOMNode(this.refs[this.firstUnreadChannel]));n.position().top+n.height()<0&&(t=!0)}if(this.lastUnreadChannel){(0,N.default)(k.default.findDOMNode(this.refs[this.lastUnreadChannel])).position().top>e.height()&&(a=!0)}this.setState({showTopUnread:t,showBottomUnread:a})}},{key:"updateScrollbarOnChannelChange",value:function(e){var t=this.refs[e.name].getBoundingClientRect();(t.top-de.Constants.CHANNEL_SCROLL_ADJUSTMENT<0||t.top+t.height>this.refs.container.getBoundingClientRect().height)&&(this.refs.container.scrollTop=this.refs.container.scrollTop+(t.top-de.Constants.CHANNEL_SCROLL_ADJUSTMENT),(0,N.default)(".nav-pills__container").perfectScrollbar("update"))}},{key:"navigateChannelShortcut",value:function(e){if(e.altKey&&!e.shiftKey&&(e.keyCode===de.Constants.KeyCodes.UP||e.keyCode===de.Constants.KeyCodes.DOWN)){if(e.preventDefault(),this.isSwitchingChannel)return;this.isSwitchingChannel=!0;for(var t=this.getDisplayedChannels(),a=this.state.activeId,n=-1,l=0;l<t.length;l++)t[l].id===a&&(n=l);var s=t[n],r=n;e.keyCode===de.Constants.KeyCodes.DOWN?r=n+1:e.keyCode===de.Constants.KeyCodes.UP&&(r=n-1),s=t[ne.mod(r,t.length)],oe.goToChannel(s),this.updateScrollbarOnChannelChange(s),this.isSwitchingChannel=!1}}},{key:"navigateUnreadChannelShortcut",value:function(e){if(e.altKey&&e.shiftKey&&(e.keyCode===de.Constants.KeyCodes.UP||e.keyCode===de.Constants.KeyCodes.DOWN)){if(e.preventDefault(),this.isSwitchingChannel)return;this.isSwitchingChannel=!0;for(var t=this.getDisplayedChannels(),a=this.state.activeId,n=-1,l=0;l<t.length;l++)t[l].id===a&&(n=l);var s=t[n],r=n,o=0,i=0;e.keyCode===de.Constants.KeyCodes.UP?i=-1:e.keyCode===de.Constants.KeyCodes.DOWN&&(i=1);for(var d=K.default.getUnreadCount(t[r].id);o<t.length&&0===d.msgs&&0===d.mentions;)r+=i,o++,r=ne.mod(r,t.length),d=K.default.getUnreadCount(t[r].id);0===d.msgs&&0===d.mentions||(s=t[r],oe.goToChannel(s),this.updateScrollbarOnChannelChange(s)),this.isSwitchingChannel=!1}}},{key:"getDisplayedChannels",value:function(){return this.state.favoriteChannels.concat(this.state.publicChannels).concat(this.state.privateChannels).concat(this.state.directAndGroupChannels)}},{key:"handleLeaveDirectChannel",value:function(e,t){var a=this;if(e.preventDefault(),!this.isLeaving.get(t.id)){this.isLeaving.set(t.id,!0);var n=void 0,l=void 0;t.type===de.Constants.DM_CHANNEL?(n=t.teammate_id,l=de.Constants.Preferences.CATEGORY_DIRECT_CHANNEL_SHOW):(n=t.id,l=de.Constants.Preferences.CATEGORY_GROUP_CHANNEL_SHOW),ee.savePreference(l,n,"false",function(){a.isLeaving.set(t.id,!1)},function(){a.isLeaving.set(t.id,!1)}),se.isFavoriteChannel(t)&&oe.unmarkFavorite(t.id),this.setState(this.getStateFromStores())}t.id===this.state.activeId&&(this.closedDirectChannel=!0,ge.browserHistory.push("/"+this.state.currentTeam.name+"/channels/town-square"))}},{key:"showMoreChannelsModal",value:function(){this.setState({showMoreChannelsModal:!0}),(0,ie.trackEvent)("ui","ui_channels_more_public")}},{key:"hideMoreChannelsModal",value:function(){this.setState({showMoreChannelsModal:!1})}},{key:"showNewChannelModal",value:function(e){this.setState({newChannelModalType:e})}},{key:"hideNewChannelModal",value:function(){this.setState({newChannelModalType:""})}},{key:"showMoreDirectChannelsModal",value:function(e){(0,ie.trackEvent)("ui","ui_channels_more_direct"),this.setState({showDirectChannelsModal:!0,startingUsers:e})}},{key:"hideMoreDirectChannelsModal",value:function(){this.setState({showDirectChannelsModal:!1,startingUsers:null})}},{key:"openLeftSidebar",value:function(){ne.isMobile()&&setTimeout(function(){document.querySelector(".app__body .inner-wrap").classList.add("move--right"),document.querySelector(".app__body .sidebar--left").classList.add("move--right")})}},{key:"createTutorialTip",value:function(){var e=[],t=de.Constants.DEFAULT_CHANNEL_UI_NAME;this.state.townSquare&&(t=this.state.townSquare.display_name);var a=de.Constants.OFFTOPIC_CHANNEL_UI_NAME;return this.state.offTopic&&(a=this.state.offTopic.display_name),e.push(pe.default.createElement("div",null,pe.default.createElement(ue.FormattedHTMLMessage,{id:"sidebar.tutorialScreen1",defaultMessage:"<h4>Channels</h4><p><strong>Channels</strong> organize conversations across different topics. They’re open to everyone on your team. To send private communications use <strong>Direct Messages</strong> for a single person or <strong>Private Channels</strong> for multiple people.</p>"}))),e.push(pe.default.createElement("div",null,pe.default.createElement(ue.FormattedHTMLMessage,{id:"sidebar.tutorialScreen2",defaultMessage:'<h4>"{townsquare}" and "{offtopic}" channels</h4> <p>Here are two public channels to start:</p> <p><strong>{townsquare}</strong> is a place for team-wide communication. Everyone in your team is a member of this channel.</p> <p><strong>{offtopic}</strong> is a place for fun and humor outside of work-related channels. You and your team can decide what other channels to create.</p>',values:{townsquare:t,offtopic:a}}))),e.push(pe.default.createElement("div",null,pe.default.createElement(ue.FormattedHTMLMessage,{id:"sidebar.tutorialScreen3",defaultMessage:'<h4>Creating and Joining Channels</h4> <p>Click <strong>"More..."</strong> to create a new channel or join an existing one.</p> <p>You can also create a new public or private channel by clicking the <strong>"+" symbol</strong> next to the public or private channel header.</p>'}))),pe.default.createElement(j.default,{placement:"right",screens:e,overlayClass:"tip-overlay--sidebar",diagnosticsTag:"tutorial_tip_2_channels"})}},{key:"createChannelElement",value:function(e,t,a,n){var l=this.state.members,s=this.state.activeId,o=l[e.id],i=this.state.unreadCounts[e.id]||{msgs:0,mentions:0},d=void 0,u="";e.id===s&&(u="active");var h="sidebar-channel",c=!1;o&&(d=i.msgs+i.mentions,c=d>0||o.mention_count>0),c&&(h+=" unread-title",e.id!==s&&(this.firstUnreadChannel||(this.firstUnreadChannel=e.name),this.lastUnreadChannel=e.name));var m=null;o?i.mentions&&(m=pe.default.createElement("span",{className:"badge pull-right small"},i.mentions),this.badgesActive=!0):this.state.loadingDMChannel===t&&e.type===de.Constants.DM_CHANNEL&&(m=pe.default.createElement("img",{className:"channel-loading-gif pull-right",src:me.default})),d>0&&(h+=" has-badge");var f=e.display_name,p=null;e.type===de.Constants.OPEN_CHANNEL?p=pe.default.createElement("div",{className:"status"},pe.default.createElement("i",{className:"fa fa-globe"})):e.type===de.Constants.PRIVATE_CHANNEL?p=pe.default.createElement("div",{className:"status"},pe.default.createElement("i",{className:"fa fa-lock"})):e.type===de.Constants.GM_CHANNEL?(f=se.buildGroupChannelName(e.id),p=pe.default.createElement("div",{className:"status status--group"},V.default.getProfileListInChannel(e.id,!0).length)):p=pe.default.createElement(G.default,{type:"avatar",status:e.status});var g=null,v=pe.default.createElement(he.Tooltip,{id:"remove-dm-tooltip"},pe.default.createElement(ue.FormattedMessage,{id:"sidebar.removeList",defaultMessage:"Remove from list"}));n&&!m&&(g=pe.default.createElement(he.OverlayTrigger,{delayShow:1e3,placement:"top",overlay:v},pe.default.createElement("span",{onClick:function(t){return n(t,e)},className:"btn-close"},"×")),h+=" has-close");var C=null;this.state.showTutorialTip&&e.name===de.Constants.DEFAULT_CHANNEL&&(C=this.createTutorialTip(),this.openLeftSidebar());var E="";return E=e.fake?"/"+this.state.currentTeam.name+"/channels/"+e.name+"?fakechannel="+encodeURIComponent((0,r.default)(e)):"/"+this.state.currentTeam.name+"/channels/"+e.name,pe.default.createElement("li",{key:e.name,ref:e.name,className:u},pe.default.createElement(ge.Link,{to:E,className:h,onClick:this.trackChannelSelectedEvent},p,f,m,g),C)}},{key:"trackChannelSelectedEvent",value:function(){(0,ie.trackEvent)("ui","ui_channel_selected")}},{key:"render",value:function(){var e=this;if(null==this.state.currentTeam||null==this.state.currentUser)return pe.default.createElement("div",null);this.lastBadgesActive=this.badgesActive,this.badgesActive=!1,this.firstUnreadChannel=null,this.lastUnreadChannel=null;var t=this.state.favoriteChannels.sort(te.sortTeamsByDisplayName).map(function(t,a,n){return t.type===de.Constants.DM_CHANNEL?e.createChannelElement(t,a,n,e.handleLeaveDirectChannel):e.createChannelElement(t)}),a=this.state.publicChannels.map(this.createChannelElement),n=this.state.privateChannels.map(this.createChannelElement),l=this.state.directAndGroupChannels.map(function(t,a,n){return e.createChannelElement(t,a,n,e.handleLeaveDirectChannel)});if(this.lastBadgesActive!==this.badgesActive){var s=document.createElement("link");s.type="image/x-icon",s.rel="shortcut icon",s.id="favicon",this.badgesActive?s.href=Me.default:s.href=Ce.default;var r=document.getElementsByTagName("head")[0],o=document.getElementById("favicon");o&&r.removeChild(o),r.appendChild(s)}var i=pe.default.createElement("li",{key:"more"},pe.default.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),e.showMoreDirectChannelsModal()}},pe.default.createElement(ue.FormattedMessage,{id:"sidebar.moreElips",defaultMessage:"More..."}))),d=!1;""!==this.state.newChannelModalType&&(d=!0);var u=pe.default.createElement(he.Tooltip,{id:"new-channel-tooltip"},pe.default.createElement(ue.FormattedMessage,{id:"sidebar.createChannel",defaultMessage:"Create new public channel"})),h=pe.default.createElement(he.Tooltip,{id:"new-group-tooltip"},pe.default.createElement(ue.FormattedMessage,{id:"sidebar.createGroup",defaultMessage:"Create new private channel"})),c=pe.default.createElement(ue.FormattedMessage,{id:"sidebar.unreadAbove",defaultMessage:"Unread post(s) above"}),m=pe.default.createElement(ue.FormattedMessage,{id:"sidebar.unreadBelow",defaultMessage:"Unread post(s) below"}),f=z.default.isTeamAdminForCurrentTeam()||V.default.isSystemAdminForCurrentUser(),p=V.default.isSystemAdminForCurrentUser(),g=pe.default.createElement(he.OverlayTrigger,{delayShow:500,placement:"top",overlay:u},pe.default.createElement("a",{className:"add-channel-btn",href:"#",onClick:this.showNewChannelModal.bind(this,de.Constants.OPEN_CHANNEL)},"+")),v=pe.default.createElement(he.OverlayTrigger,{delayShow:500,placement:"top",overlay:h},pe.default.createElement("a",{className:"add-channel-btn",href:"#",onClick:this.showNewChannelModal.bind(this,de.Constants.PRIVATE_CHANNEL)},"+"));se.showCreateOption(de.Constants.OPEN_CHANNEL,f,p)||(g=null),se.showCreateOption(de.Constants.PRIVATE_CHANNEL,f,p)||(v=null);var C=void 0;this.state.showDirectChannelsModal&&(C=pe.default.createElement(U.default,{onModalDismissed:this.hideMoreDirectChannelsModal,startingUsers:this.state.startingUsers}));var E=void 0;return this.state.showMoreChannelsModal&&(E=pe.default.createElement(O.default,{onModalDismissed:this.hideMoreChannelsModal,handleNewChannel:function(){e.hideMoreChannelsModal(),e.showNewChannelModal(de.Constants.OPEN_CHANNEL)}})),pe.default.createElement("div",{className:"sidebar--left",id:"sidebar-left",key:"sidebar-left"},pe.default.createElement(L.default,{show:d,channelType:this.state.newChannelModalType,onModalDismissed:this.hideNewChannelModal}),C,E,pe.default.createElement(F.default,{teamDisplayName:this.state.currentTeam.display_name,teamDescription:this.state.currentTeam.description,teamName:this.state.currentTeam.name,teamType:this.state.currentTeam.type,currentUser:this.state.currentUser}),pe.default.createElement(x.default,{show:this.state.showTopUnread,extraClass:"nav-pills__unread-indicator-top",text:c}),pe.default.createElement(x.default,{show:this.state.showBottomUnread,extraClass:"nav-pills__unread-indicator-bottom",text:m}),pe.default.createElement("div",{ref:"container",className:"nav-pills__container",onScroll:this.onScroll},0!==t.length&&pe.default.createElement("ul",{className:"nav nav-pills nav-stacked"},pe.default.createElement("li",null,pe.default.createElement("h4",null,pe.default.createElement(ue.FormattedMessage,{id:"sidebar.favorite",defaultMessage:"Favorites"}))),t),pe.default.createElement("ul",{className:"nav nav-pills nav-stacked"},pe.default.createElement("li",null,pe.default.createElement("h4",null,pe.default.createElement(ue.FormattedMessage,{id:"sidebar.channels",defaultMessage:"Channels"}),g)),a,pe.default.createElement("li",null,pe.default.createElement("a",{href:"#",className:"nav-more",onClick:this.showMoreChannelsModal},pe.default.createElement(ue.FormattedMessage,{id:"sidebar.moreElips",defaultMessage:"More..."})))),pe.default.createElement("ul",{className:"nav nav-pills nav-stacked"},pe.default.createElement("li",null,pe.default.createElement("h4",null,pe.default.createElement(ue.FormattedMessage,{id:"sidebar.pg",defaultMessage:"Private Channels"}),v)),n),pe.default.createElement("ul",{className:"nav nav-pills nav-stacked"},pe.default.createElement("li",null,pe.default.createElement("h4",null,pe.default.createElement(ue.FormattedMessage,{id:"sidebar.direct",defaultMessage:"Direct Messages"}))),l,i)))}}]),a}(pe.default.Component);t.default=be}).call(t,a(17))}});
//# sourceMappingURL=0.473cc1cc7583c31e1f16.js.map