{"version":3,"sources":["webpack:///1.0f3ab0697dbc83916442.js","webpack:///./components/team_sidebar/components/team_button.jsx","webpack:///./components/team_sidebar/team_sidebar_controller.jsx"],"names":["webpackJsonp","2049","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_constants","_constants2","_diagnostics_actions","_team_actions","_react","_react2","_es","_reactBootstrap","TeamButton","_React$Component","props","this","_this","__proto__","call","handleSwitch","bind","handleDisabled","key","e","preventDefault","trackEvent","switchTeams","url","teamClass","active","btnClass","disabled","handleClick","badge","unread","mentions","createElement","className","btn","content","displayName","substring","isMobile","OverlayTrigger","delayShow","OVERLAY_TIME_DELAY","placement","overlay","Tooltip","id","tip","Link","to","onClick","Component","defaultProps","propTypes","PropTypes","string","isRequired","node","bool","number","oneOf","346","global","_interopRequireWildcard","newObj","prototype","hasOwnProperty","_assign","_assign2","_map","_map2","_team_button","_team_button2","_team_store","_team_store2","_user_store","_user_store2","_async_client","AsyncClient","_team_utils","_utils","Utils","_jquery","_jquery2","_reactIntl","TeamSidebar","getStateFromStores","onChange","handleResize","setStyles","state","teamMembers","getMyTeamMembers","currentTeamId","getCurrentId","teams","getAll","teamListings","getTeamListings","show","length","window","addEventListener","addChangeListener","addUnreadChangeListener","getAllTeamListings","removeEventListener","removeChangeListener","removeUnreadChangeListener","prevProps","prevState","perfectScrollbar","currentTeam","refs","container","scrollTop","setState","root","document","querySelector","classList","add","remove","_this2","myTeams","isSystemAdmin","getCurrentUser","roles","isAlreadyMember","moreTeams","index","teamMember","teamId","team_id","push","msg_count","mention_count","sort","sortTeamsByDisplayName","map","team","name","display_name","FormattedMessage","defaultMessage","mm_config","EnableTeamCreation"],"mappings":"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","file":"1.0f3ab0697dbc83916442.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 2049:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(2);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(4);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(3);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _constants = __webpack_require__(8);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _diagnostics_actions = __webpack_require__(165);\n\nvar _team_actions = __webpack_require__(333);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _es = __webpack_require__(37);\n\nvar _reactBootstrap = __webpack_require__(27);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Copyright (c) 2016 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nvar TeamButton = function (_React$Component) {\n    (0, _inherits3.default)(TeamButton, _React$Component);\n\n    function TeamButton(props) {\n        (0, _classCallCheck3.default)(this, TeamButton);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TeamButton.__proto__ || (0, _getPrototypeOf2.default)(TeamButton)).call(this, props));\n\n        _this.handleSwitch = _this.handleSwitch.bind(_this);\n        _this.handleDisabled = _this.handleDisabled.bind(_this);\n        return _this;\n    }\n\n    (0, _createClass3.default)(TeamButton, [{\n        key: 'handleSwitch',\n        value: function handleSwitch(e) {\n            e.preventDefault();\n            (0, _diagnostics_actions.trackEvent)('ui', 'ui_team_sidebar_switch_team');\n            (0, _team_actions.switchTeams)(this.props.url);\n        }\n    }, {\n        key: 'handleDisabled',\n        value: function handleDisabled(e) {\n            e.preventDefault();\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var teamClass = this.props.active ? 'active' : '';\n            var btnClass = this.props.btnClass;\n            var disabled = this.props.disabled ? 'team-disabled' : '';\n            var handleClick = this.props.active || this.props.disabled ? this.handleDisabled : this.handleSwitch;\n            var badge = void 0;\n\n            if (!teamClass) {\n                teamClass = this.props.unread ? 'unread' : '';\n\n                if (this.props.mentions) {\n                    badge = _react2.default.createElement(\n                        'span',\n                        { className: 'badge pull-right small' },\n                        this.props.mentions\n                    );\n                }\n            }\n\n            var btn = void 0;\n            var content = this.props.content;\n            if (!content) {\n                content = _react2.default.createElement(\n                    'div',\n                    { className: 'team-btn__initials' },\n                    this.props.displayName.substring(0, 2),\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'team-btn__content' },\n                        this.props.displayName\n                    )\n                );\n            }\n            if (this.props.isMobile) {\n                btn = _react2.default.createElement(\n                    'div',\n                    { className: 'team-btn ' + btnClass },\n                    badge,\n                    content\n                );\n            } else {\n                btn = _react2.default.createElement(\n                    _reactBootstrap.OverlayTrigger,\n                    {\n                        delayShow: _constants2.default.OVERLAY_TIME_DELAY,\n                        placement: this.props.placement,\n                        overlay: _react2.default.createElement(\n                            _reactBootstrap.Tooltip,\n                            { id: 'tooltip-' + this.props.url },\n                            this.props.tip\n                        )\n                    },\n                    _react2.default.createElement(\n                        'div',\n                        { className: 'team-btn ' + btnClass },\n                        badge,\n                        content\n                    )\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                {\n                    className: 'team-container ' + teamClass\n                },\n                _react2.default.createElement(\n                    _es.Link,\n                    {\n                        className: disabled,\n                        to: this.props.url,\n                        onClick: handleClick\n                    },\n                    btn\n                )\n            );\n        }\n    }]);\n    return TeamButton;\n}(_react2.default.Component);\n\nexports.default = TeamButton;\n\n\nTeamButton.defaultProps = {\n    btnClass: '',\n    tip: '',\n    placement: 'right',\n    active: false,\n    disabled: false,\n    unread: false,\n    mentions: 0\n};\n\nTeamButton.propTypes = {\n    btnClass: _react2.default.PropTypes.string,\n    url: _react2.default.PropTypes.string.isRequired,\n    displayName: _react2.default.PropTypes.string,\n    content: _react2.default.PropTypes.node,\n    tip: _react2.default.PropTypes.node.isRequired,\n    active: _react2.default.PropTypes.bool,\n    disabled: _react2.default.PropTypes.bool,\n    isMobile: _react2.default.PropTypes.bool,\n    unread: _react2.default.PropTypes.bool,\n    mentions: _react2.default.PropTypes.number,\n    placement: _react2.default.PropTypes.oneOf(['left', 'right', 'top', 'bottom'])\n};\n\n/***/ }),\n\n/***/ 346:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _assign = __webpack_require__(31);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _map = __webpack_require__(72);\n\nvar _map2 = _interopRequireDefault(_map);\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(2);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(4);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(3);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _team_button = __webpack_require__(2049);\n\nvar _team_button2 = _interopRequireDefault(_team_button);\n\nvar _team_store = __webpack_require__(23);\n\nvar _team_store2 = _interopRequireDefault(_team_store);\n\nvar _user_store = __webpack_require__(15);\n\nvar _user_store2 = _interopRequireDefault(_user_store);\n\nvar _async_client = __webpack_require__(20);\n\nvar AsyncClient = _interopRequireWildcard(_async_client);\n\nvar _team_utils = __webpack_require__(570);\n\nvar _utils = __webpack_require__(11);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _jquery = __webpack_require__(0);\n\nvar _jquery2 = _interopRequireDefault(_jquery);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(13);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar TeamSidebar = function (_React$Component) {\n    (0, _inherits3.default)(TeamSidebar, _React$Component);\n\n    function TeamSidebar(props) {\n        (0, _classCallCheck3.default)(this, TeamSidebar);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (TeamSidebar.__proto__ || (0, _getPrototypeOf2.default)(TeamSidebar)).call(this, props));\n\n        _this.getStateFromStores = _this.getStateFromStores.bind(_this);\n        _this.onChange = _this.onChange.bind(_this);\n        _this.handleResize = _this.handleResize.bind(_this);\n        _this.setStyles = _this.setStyles.bind(_this);\n\n        _this.state = _this.getStateFromStores();\n        return _this;\n    }\n\n    (0, _createClass3.default)(TeamSidebar, [{\n        key: 'getStateFromStores',\n        value: function getStateFromStores() {\n            var teamMembers = _team_store2.default.getMyTeamMembers();\n            var currentTeamId = _team_store2.default.getCurrentId();\n\n            return {\n                teams: _team_store2.default.getAll(),\n                teamListings: _team_store2.default.getTeamListings(),\n                teamMembers: teamMembers,\n                currentTeamId: currentTeamId,\n                show: teamMembers && teamMembers.length > 1,\n                isMobile: Utils.isMobile()\n            };\n        }\n    }, {\n        key: 'componentDidMount',\n        value: function componentDidMount() {\n            window.addEventListener('resize', this.handleResize);\n            _team_store2.default.addChangeListener(this.onChange);\n            _team_store2.default.addUnreadChangeListener(this.onChange);\n            AsyncClient.getAllTeamListings();\n            this.setStyles();\n        }\n    }, {\n        key: 'componentWillUnmount',\n        value: function componentWillUnmount() {\n            window.removeEventListener('resize', this.handleResize);\n            _team_store2.default.removeChangeListener(this.onChange);\n            _team_store2.default.removeUnreadChangeListener(this.onChange);\n        }\n    }, {\n        key: 'componentDidUpdate',\n        value: function componentDidUpdate(prevProps, prevState) {\n            if (!this.state.isMobile) {\n                (0, _jquery2.default)('.team-wrapper').perfectScrollbar();\n            }\n\n            // reset the scrollbar upon switching teams\n            if (this.state.currentTeam !== prevState.currentTeam) {\n                this.refs.container.scrollTop = 0;\n                if (!this.state.isMobile) {\n                    (0, _jquery2.default)('.team-wrapper').perfectScrollbar('update');\n                }\n            }\n        }\n    }, {\n        key: 'onChange',\n        value: function onChange() {\n            this.setState(this.getStateFromStores());\n            this.setStyles();\n        }\n    }, {\n        key: 'handleResize',\n        value: function handleResize() {\n            var teamMembers = this.state.teamMembers;\n            this.setState({ show: teamMembers && teamMembers.length > 1 });\n            this.setStyles();\n        }\n    }, {\n        key: 'setStyles',\n        value: function setStyles() {\n            var root = document.querySelector('#root');\n\n            if (this.state.show) {\n                root.classList.add('multi-teams');\n            } else {\n                root.classList.remove('multi-teams');\n            }\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            if (!this.state.show) {\n                return null;\n            }\n\n            var myTeams = [];\n            var isSystemAdmin = Utils.isSystemAdmin(_user_store2.default.getCurrentUser().roles);\n            var isAlreadyMember = new _map2.default();\n            var moreTeams = false;\n\n            for (var index in this.state.teamMembers) {\n                if (this.state.teamMembers.hasOwnProperty(index)) {\n                    var teamMember = this.state.teamMembers[index];\n                    var teamId = teamMember.team_id;\n                    myTeams.push((0, _assign2.default)({\n                        unread: teamMember.msg_count > 0,\n                        mentions: teamMember.mention_count\n                    }, this.state.teams[teamId]));\n                    isAlreadyMember[teamId] = true;\n                }\n            }\n\n            for (var id in this.state.teamListings) {\n                if (this.state.teamListings.hasOwnProperty(id) && !isAlreadyMember[id]) {\n                    moreTeams = true;\n                    break;\n                }\n            }\n\n            var teams = myTeams.sort(_team_utils.sortTeamsByDisplayName).map(function (team) {\n                return _react2.default.createElement(_team_button2.default, {\n                    key: 'switch_team_' + team.name,\n                    url: '/' + team.name,\n                    tip: team.display_name,\n                    active: team.id === _this2.state.currentTeamId,\n                    isMobile: _this2.state.isMobile,\n                    displayName: team.display_name,\n                    unread: team.unread,\n                    mentions: team.mentions\n                });\n            });\n\n            if (moreTeams) {\n                teams.push(_react2.default.createElement(_team_button2.default, {\n                    btnClass: 'team-btn__add',\n                    key: 'more_teams',\n                    url: '/select_team',\n                    isMobile: this.state.isMobile,\n                    tip: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'team_sidebar.join',\n                        defaultMessage: 'Other teams you can join.'\n                    }),\n                    content: _react2.default.createElement('i', { className: 'fa fa-plus' })\n                }));\n            } else if (global.window.mm_config.EnableTeamCreation === 'true' || isSystemAdmin) {\n                teams.push(_react2.default.createElement(_team_button2.default, {\n                    btnClass: 'team-btn__add',\n                    key: 'more_teams',\n                    url: '/create_team',\n                    isMobile: this.state.isMobile,\n                    tip: _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'navbar_dropdown.create',\n                        defaultMessage: 'Create a New Team'\n                    }),\n                    content: _react2.default.createElement('i', { className: 'fa fa-plus' })\n                }));\n            }\n\n            return _react2.default.createElement(\n                'div',\n                { className: 'team-sidebar' },\n                _react2.default.createElement(\n                    'div',\n                    { className: 'team-wrapper' },\n                    teams\n                )\n            );\n        }\n    }]);\n    return TeamSidebar;\n}(_react2.default.Component); // Copyright (c) 2016 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = TeamSidebar;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.0f3ab0697dbc83916442.js","// Copyright (c) 2016 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport Constants from 'utils/constants.jsx';\n\nimport {trackEvent} from 'actions/diagnostics_actions.jsx';\nimport {switchTeams} from 'actions/team_actions.jsx';\n\nimport React from 'react';\nimport {Link} from 'react-router/es6';\nimport {Tooltip, OverlayTrigger} from 'react-bootstrap';\n\nexport default class TeamButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handleSwitch = this.handleSwitch.bind(this);\n        this.handleDisabled = this.handleDisabled.bind(this);\n    }\n\n    handleSwitch(e) {\n        e.preventDefault();\n        trackEvent('ui', 'ui_team_sidebar_switch_team');\n        switchTeams(this.props.url);\n    }\n\n    handleDisabled(e) {\n        e.preventDefault();\n    }\n\n    render() {\n        let teamClass = this.props.active ? 'active' : '';\n        const btnClass = this.props.btnClass;\n        const disabled = this.props.disabled ? 'team-disabled' : '';\n        const handleClick = (this.props.active || this.props.disabled) ? this.handleDisabled : this.handleSwitch;\n        let badge;\n\n        if (!teamClass) {\n            teamClass = this.props.unread ? 'unread' : '';\n\n            if (this.props.mentions) {\n                badge = (\n                    <span className='badge pull-right small'>{this.props.mentions}</span>\n                );\n            }\n        }\n\n        let btn;\n        let content = this.props.content;\n        if (!content) {\n            content = (\n                <div className='team-btn__initials'>\n                    {this.props.displayName.substring(0, 2)}\n                    <div className='team-btn__content'>\n                        {this.props.displayName}\n                    </div>\n                </div>\n            );\n        }\n        if (this.props.isMobile) {\n            btn = (\n                <div className={'team-btn ' + btnClass}>\n                    {badge}\n                    {content}\n                </div>\n            );\n        } else {\n            btn = (\n                <OverlayTrigger\n                    delayShow={Constants.OVERLAY_TIME_DELAY}\n                    placement={this.props.placement}\n                    overlay={\n                        <Tooltip id={`tooltip-${this.props.url}`}>\n                            {this.props.tip}\n                        </Tooltip>\n                    }\n                >\n                    <div className={'team-btn ' + btnClass}>\n                        {badge}\n                        {content}\n                    </div>\n                </OverlayTrigger>\n            );\n        }\n\n        return (\n            <div\n                className={`team-container ${teamClass}`}\n            >\n                <Link\n                    className={disabled}\n                    to={this.props.url}\n                    onClick={handleClick}\n                >\n                    {btn}\n                </Link>\n            </div>\n        );\n    }\n}\n\nTeamButton.defaultProps = {\n    btnClass: '',\n    tip: '',\n    placement: 'right',\n    active: false,\n    disabled: false,\n    unread: false,\n    mentions: 0\n};\n\nTeamButton.propTypes = {\n    btnClass: React.PropTypes.string,\n    url: React.PropTypes.string.isRequired,\n    displayName: React.PropTypes.string,\n    content: React.PropTypes.node,\n    tip: React.PropTypes.node.isRequired,\n    active: React.PropTypes.bool,\n    disabled: React.PropTypes.bool,\n    isMobile: React.PropTypes.bool,\n    unread: React.PropTypes.bool,\n    mentions: React.PropTypes.number,\n    placement: React.PropTypes.oneOf(['left', 'right', 'top', 'bottom'])\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/team_sidebar/components/team_button.jsx","// Copyright (c) 2016 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport TeamButton from './components/team_button.jsx';\n\nimport TeamStore from 'stores/team_store.jsx';\nimport UserStore from 'stores/user_store.jsx';\n\nimport * as AsyncClient from 'utils/async_client.jsx';\nimport {sortTeamsByDisplayName} from 'utils/team_utils.jsx';\nimport * as Utils from 'utils/utils.jsx';\n\nimport $ from 'jquery';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nexport default class TeamSidebar extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.getStateFromStores = this.getStateFromStores.bind(this);\n        this.onChange = this.onChange.bind(this);\n        this.handleResize = this.handleResize.bind(this);\n        this.setStyles = this.setStyles.bind(this);\n\n        this.state = this.getStateFromStores();\n    }\n\n    getStateFromStores() {\n        const teamMembers = TeamStore.getMyTeamMembers();\n        const currentTeamId = TeamStore.getCurrentId();\n\n        return {\n            teams: TeamStore.getAll(),\n            teamListings: TeamStore.getTeamListings(),\n            teamMembers,\n            currentTeamId,\n            show: teamMembers && teamMembers.length > 1,\n            isMobile: Utils.isMobile()\n        };\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', this.handleResize);\n        TeamStore.addChangeListener(this.onChange);\n        TeamStore.addUnreadChangeListener(this.onChange);\n        AsyncClient.getAllTeamListings();\n        this.setStyles();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.handleResize);\n        TeamStore.removeChangeListener(this.onChange);\n        TeamStore.removeUnreadChangeListener(this.onChange);\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        if (!this.state.isMobile) {\n            $('.team-wrapper').perfectScrollbar();\n        }\n\n        // reset the scrollbar upon switching teams\n        if (this.state.currentTeam !== prevState.currentTeam) {\n            this.refs.container.scrollTop = 0;\n            if (!this.state.isMobile) {\n                $('.team-wrapper').perfectScrollbar('update');\n            }\n        }\n    }\n\n    onChange() {\n        this.setState(this.getStateFromStores());\n        this.setStyles();\n    }\n\n    handleResize() {\n        const teamMembers = this.state.teamMembers;\n        this.setState({show: teamMembers && teamMembers.length > 1});\n        this.setStyles();\n    }\n\n    setStyles() {\n        const root = document.querySelector('#root');\n\n        if (this.state.show) {\n            root.classList.add('multi-teams');\n        } else {\n            root.classList.remove('multi-teams');\n        }\n    }\n\n    render() {\n        if (!this.state.show) {\n            return null;\n        }\n\n        const myTeams = [];\n        const isSystemAdmin = Utils.isSystemAdmin(UserStore.getCurrentUser().roles);\n        const isAlreadyMember = new Map();\n        let moreTeams = false;\n\n        for (const index in this.state.teamMembers) {\n            if (this.state.teamMembers.hasOwnProperty(index)) {\n                const teamMember = this.state.teamMembers[index];\n                const teamId = teamMember.team_id;\n                myTeams.push(Object.assign({\n                    unread: teamMember.msg_count > 0,\n                    mentions: teamMember.mention_count\n                }, this.state.teams[teamId]));\n                isAlreadyMember[teamId] = true;\n            }\n        }\n\n        for (const id in this.state.teamListings) {\n            if (this.state.teamListings.hasOwnProperty(id) && !isAlreadyMember[id]) {\n                moreTeams = true;\n                break;\n            }\n        }\n\n        const teams = myTeams.\n            sort(sortTeamsByDisplayName).\n            map((team) => {\n                return (\n                    <TeamButton\n                        key={'switch_team_' + team.name}\n                        url={`/${team.name}`}\n                        tip={team.display_name}\n                        active={team.id === this.state.currentTeamId}\n                        isMobile={this.state.isMobile}\n                        displayName={team.display_name}\n                        unread={team.unread}\n                        mentions={team.mentions}\n                    />\n                );\n            });\n\n        if (moreTeams) {\n            teams.push(\n                <TeamButton\n                    btnClass='team-btn__add'\n                    key='more_teams'\n                    url='/select_team'\n                    isMobile={this.state.isMobile}\n                    tip={\n                        <FormattedMessage\n                            id='team_sidebar.join'\n                            defaultMessage='Other teams you can join.'\n                        />\n                    }\n                    content={<i className='fa fa-plus'/>}\n                />\n            );\n        } else if (global.window.mm_config.EnableTeamCreation === 'true' || isSystemAdmin) {\n            teams.push(\n                <TeamButton\n                    btnClass='team-btn__add'\n                    key='more_teams'\n                    url='/create_team'\n                    isMobile={this.state.isMobile}\n                    tip={\n                        <FormattedMessage\n                            id='navbar_dropdown.create'\n                            defaultMessage='Create a New Team'\n                        />\n                    }\n                    content={<i className='fa fa-plus'/>}\n                />\n            );\n        }\n\n        return (\n            <div className='team-sidebar'>\n                <div className='team-wrapper'>\n                    {teams}\n                </div>\n            </div>\n        );\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/team_sidebar/team_sidebar_controller.jsx"],"sourceRoot":""}