webpackJsonp([16],{1714:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(6),r=o(l),i=a(2),s=o(i),d=a(4),u=o(d),g=a(5),f=o(g),c=a(3),h=o(c),m=a(1665),_=o(m),p=a(2013),k=o(p),b=a(24),v=o(b),w=a(1660),y=o(w),W=a(23),E=o(W),M=a(15),T=o(M),C=a(1664),O=a(11),F=n(O),N=a(20),P=n(N),R=a(1),L=o(R),x=a(13),j=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));a.handleIntegrationChange=a.handleIntegrationChange.bind(a),a.handleUserChange=a.handleUserChange.bind(a),a.regenOutgoingWebhookToken=a.regenOutgoingWebhookToken.bind(a),a.deleteOutgoingWebhook=a.deleteOutgoingWebhook.bind(a);var n=E.default.getCurrentId();return a.state={outgoingWebhooks:y.default.getOutgoingWebhooks(n),loading:!y.default.hasReceivedOutgoingWebhooks(n),users:T.default.getProfiles()},a}return(0,h.default)(t,e),(0,f.default)(t,null,[{key:"propTypes",get:function(){return{team:L.default.PropTypes.object,user:L.default.PropTypes.object,isAdmin:L.default.PropTypes.bool}}}]),(0,f.default)(t,[{key:"componentDidMount",value:function(){y.default.addChangeListener(this.handleIntegrationChange),T.default.addChangeListener(this.handleUserChange),"true"===window.mm_config.EnableOutgoingWebhooks&&(0,C.loadOutgoingHooks)()}},{key:"componentWillUnmount",value:function(){y.default.removeChangeListener(this.handleIntegrationChange),T.default.removeChangeListener(this.handleUserChange)}},{key:"handleIntegrationChange",value:function(){var e=E.default.getCurrentId();this.setState({outgoingWebhooks:y.default.getOutgoingWebhooks(e),loading:!y.default.hasReceivedOutgoingWebhooks(e)})}},{key:"handleUserChange",value:function(){this.setState({users:T.default.getProfiles()})}},{key:"regenOutgoingWebhookToken",value:function(e){P.regenOutgoingHookToken(e.id)}},{key:"deleteOutgoingWebhook",value:function(e){P.deleteOutgoingHook(e.id)}},{key:"outgoingWebhookCompare",value:function(e,t){var a=e.display_name;if(!a){var n=v.default.get(e.channel_id);a=n?n.display_name:F.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}var o=t.display_name;if(!o){var l=v.default.get(t.channel_id);o=l?l.display_name:F.localizeMessage("installed_outgoing_webhooks.unknown_channel","A Private Webhook")}return a.localeCompare(o)}},{key:"render",value:function(){var e=this,t=this.state.outgoingWebhooks.sort(this.outgoingWebhookCompare).map(function(t){var a=e.props.isAdmin||e.props.user.id===t.creator_id;return L.default.createElement(k.default,{key:t.id,outgoingWebhook:t,onRegenToken:e.regenOutgoingWebhookToken,onDelete:e.deleteOutgoingWebhook,creator:e.state.users[t.creator_id]||{},canChange:a,team:e.props.team})});return L.default.createElement(_.default,{header:L.default.createElement(x.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Installed Outgoing Webhooks"}),addText:L.default.createElement(x.FormattedMessage,{id:"installed_outgoing_webhooks.add",defaultMessage:"Add Outgoing Webhook"}),addLink:"/"+this.props.team.name+"/integrations/outgoing_webhooks/add",emptyText:L.default.createElement(x.FormattedMessage,{id:"installed_outgoing_webhooks.empty",defaultMessage:"No outgoing webhooks found"}),helpText:L.default.createElement(x.FormattedMessage,{id:"installed_outgoing_webhooks.help",defaultMessage:"Create outgoing webhook URLs for use in external integrations. Please see {link} to learn more.",values:{link:L.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-outgoing.html"},L.default.createElement(x.FormattedMessage,{id:"installed_outgoing_webhooks.helpLink",defaultMessage:"documentation"}))}}),searchPlaceholder:F.localizeMessage("installed_outgoing_webhooks.search","Search Outgoing Webhooks"),loading:this.state.loading},t)}}]),t}(L.default.Component);t.default=j},2013:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(36),l=n(o),r=a(6),i=n(r),s=a(2),d=n(s),u=a(4),g=n(u),f=a(5),c=n(f),h=a(3),m=n(h),_=a(1),p=n(_),k=a(24),b=n(k),v=a(13),w=a(335),y=a(1666),W=n(y),E=function(e){function t(e){(0,d.default)(this,t);var a=(0,g.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleRegenToken=a.handleRegenToken.bind(a),a.handleDelete=a.handleDelete.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,null,[{key:"propTypes",get:function(){return{outgoingWebhook:p.default.PropTypes.object.isRequired,onRegenToken:p.default.PropTypes.func.isRequired,onDelete:p.default.PropTypes.func.isRequired,filter:p.default.PropTypes.string,creator:p.default.PropTypes.object.isRequired,canChange:p.default.PropTypes.bool.isRequired,team:p.default.PropTypes.object.isRequired}}}]),(0,c.default)(t,[{key:"handleRegenToken",value:function(e){e.preventDefault(),this.props.onRegenToken(this.props.outgoingWebhook)}},{key:"handleDelete",value:function(){this.props.onDelete(this.props.outgoingWebhook)}},{key:"matchesFilter",value:function(e,t,a){if(!a)return!0;if(-1!==e.display_name.toLowerCase().indexOf(a)||-1!==e.description.toLowerCase().indexOf(a))return!0;var n=!0,o=!1,r=void 0;try{for(var i,s=(0,l.default)(e.trigger_words);!(n=(i=s.next()).done);n=!0){if(-1!==i.value.toLowerCase().indexOf(a))return!0}}catch(e){o=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw r}}return!(!t||!t||-1===t.name.toLowerCase().indexOf(a))}},{key:"render",value:function(){var e=this.props.outgoingWebhook,t=b.default.get(e.channel_id),a=this.props.filter?this.props.filter.toLowerCase():"",n=0,o=1;if(!this.matchesFilter(e,t,a))return null;var l=void 0;l=e.display_name?e.display_name:t?t.display_name:p.default.createElement(v.FormattedMessage,{id:"installed_outgoing_webhooks.unknown_channel",defaultMessage:"A Private Webhook"});var r=null;e.description&&(r=p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__description"},e.description)));var i=null;e.trigger_words&&e.trigger_words.length>0&&(i=p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__trigger-words"},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.triggerWords",defaultMessage:"Trigger Words: {triggerWords}",values:{triggerWords:e.trigger_words.join(", ")}}))));var s=p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__url"},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),d=void 0;e.trigger_when===n?d=p.default.createElement(v.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenFullWord",defaultMessage:"First word matches a trigger word exactly"}):e.trigger_when===o&&(d=p.default.createElement(v.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhenStartsWith",defaultMessage:"First word starts with a trigger word"}));var u=null;return this.props.canChange&&(u=p.default.createElement("div",{className:"item-actions"},p.default.createElement("a",{href:"#",onClick:this.handleRegenToken},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.regenToken",defaultMessage:"Regen Token"}))," - ",p.default.createElement(w.Link,{to:"/"+this.props.team.name+"/integrations/outgoing_webhooks/edit?id="+e.id},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",p.default.createElement(W.default,{messageId:"installed_outgoing_webhooks.delete.confirm",onDelete:this.handleDelete}))),p.default.createElement("div",{className:"backstage-list__item"},p.default.createElement("div",{className:"item-details"},p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__name"},l)),r,p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__content_type"},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.content_type",defaultMessage:"Content-Type: {contentType}",values:{contentType:e.content_type||"application/x-www-form-urlencoded"}}))),i,p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__trigger-when"},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.triggerWhen",defaultMessage:"Trigger When: {triggerWhen}",values:{triggerWhen:d}}))),p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__token"},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.token",defaultMessage:"Token: {token}",values:{token:e.token}}))),p.default.createElement("div",{className:"item-details__row"},p.default.createElement("span",{className:"item-details__creation"},p.default.createElement(v.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}}))),s),u)}}]),t}(p.default.Component);t.default=E}});
//# sourceMappingURL=16.04858f0a69d627936337.js.map