webpackJsonp([1],{2049:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(6),i=s(n),l=a(2),r=s(l),o=a(5),d=s(o),u=a(4),m=s(u),p=a(3),c=s(p),f=a(8),h=s(f),b=a(165),v=a(333),y=a(1),_=s(y),g=a(37),M=a(27),w=function(e){function t(e){(0,r.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleSwitch=a.handleSwitch.bind(a),a.handleDisabled=a.handleDisabled.bind(a),a}return(0,c.default)(t,e),(0,d.default)(t,[{key:"handleSwitch",value:function(e){e.preventDefault(),(0,b.trackEvent)("ui","ui_team_sidebar_switch_team"),(0,v.switchTeams)(this.props.url)}},{key:"handleDisabled",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.active?"active":"",t=this.props.btnClass,a=this.props.disabled?"team-disabled":"",s=this.props.active||this.props.disabled?this.handleDisabled:this.handleSwitch,n=void 0;e||(e=this.props.unread?"unread":"",this.props.mentions&&(n=_.default.createElement("span",{className:"badge pull-right small"},this.props.mentions)));var i=void 0,l=this.props.content;return l||(l=_.default.createElement("div",{className:"team-btn__initials"},this.props.displayName.substring(0,2),_.default.createElement("div",{className:"team-btn__content"},this.props.displayName))),i=this.props.isMobile?_.default.createElement("div",{className:"team-btn "+t},n,l):_.default.createElement(M.OverlayTrigger,{delayShow:h.default.OVERLAY_TIME_DELAY,placement:this.props.placement,overlay:_.default.createElement(M.Tooltip,{id:"tooltip-"+this.props.url},this.props.tip)},_.default.createElement("div",{className:"team-btn "+t},n,l)),_.default.createElement("div",{className:"team-container "+e},_.default.createElement(g.Link,{className:a,to:this.props.url,onClick:s},i))}}]),t}(_.default.Component);t.default=w,w.defaultProps={btnClass:"",tip:"",placement:"right",active:!1,disabled:!1,unread:!1,mentions:0},w.propTypes={btnClass:_.default.PropTypes.string,url:_.default.PropTypes.string.isRequired,displayName:_.default.PropTypes.string,content:_.default.PropTypes.node,tip:_.default.PropTypes.node.isRequired,active:_.default.PropTypes.bool,disabled:_.default.PropTypes.bool,isMobile:_.default.PropTypes.bool,unread:_.default.PropTypes.bool,mentions:_.default.PropTypes.number,placement:_.default.PropTypes.oneOf(["left","right","top","bottom"])}},346:function(e,t,a){"use strict";(function(e){function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(31),l=n(i),r=a(72),o=n(r),d=a(6),u=n(d),m=a(2),p=n(m),c=a(5),f=n(c),h=a(4),b=n(h),v=a(3),y=n(v),_=a(2049),g=n(_),M=a(23),w=n(M),S=a(15),T=n(S),E=a(20),C=s(E),k=a(570),N=a(11),P=s(N),L=a(0),D=n(L),O=a(1),R=n(O),z=a(13),F=function(t){function a(e){(0,p.default)(this,a);var t=(0,b.default)(this,(a.__proto__||(0,u.default)(a)).call(this,e));return t.getStateFromStores=t.getStateFromStores.bind(t),t.onChange=t.onChange.bind(t),t.handleResize=t.handleResize.bind(t),t.setStyles=t.setStyles.bind(t),t.state=t.getStateFromStores(),t}return(0,y.default)(a,t),(0,f.default)(a,[{key:"getStateFromStores",value:function(){var e=w.default.getMyTeamMembers(),t=w.default.getCurrentId();return{teams:w.default.getAll(),teamListings:w.default.getTeamListings(),teamMembers:e,currentTeamId:t,show:e&&e.length>1,isMobile:P.isMobile()}}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize),w.default.addChangeListener(this.onChange),w.default.addUnreadChangeListener(this.onChange),C.getAllTeamListings(),this.setStyles()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),w.default.removeChangeListener(this.onChange),w.default.removeUnreadChangeListener(this.onChange)}},{key:"componentDidUpdate",value:function(e,t){this.state.isMobile||(0,D.default)(".team-wrapper").perfectScrollbar(),this.state.currentTeam!==t.currentTeam&&(this.refs.container.scrollTop=0,this.state.isMobile||(0,D.default)(".team-wrapper").perfectScrollbar("update"))}},{key:"onChange",value:function(){this.setState(this.getStateFromStores()),this.setStyles()}},{key:"handleResize",value:function(){var e=this.state.teamMembers;this.setState({show:e&&e.length>1}),this.setStyles()}},{key:"setStyles",value:function(){var e=document.querySelector("#root");this.state.show?e.classList.add("multi-teams"):e.classList.remove("multi-teams")}},{key:"render",value:function(){var t=this;if(!this.state.show)return null;var a=[],s=P.isSystemAdmin(T.default.getCurrentUser().roles),n=new o.default,i=!1;for(var r in this.state.teamMembers)if(this.state.teamMembers.hasOwnProperty(r)){var d=this.state.teamMembers[r],u=d.team_id;a.push((0,l.default)({unread:d.msg_count>0,mentions:d.mention_count},this.state.teams[u])),n[u]=!0}for(var m in this.state.teamListings)if(this.state.teamListings.hasOwnProperty(m)&&!n[m]){i=!0;break}var p=a.sort(k.sortTeamsByDisplayName).map(function(e){return R.default.createElement(g.default,{key:"switch_team_"+e.name,url:"/"+e.name,tip:e.display_name,active:e.id===t.state.currentTeamId,isMobile:t.state.isMobile,displayName:e.display_name,unread:e.unread,mentions:e.mentions})});return i?p.push(R.default.createElement(g.default,{btnClass:"team-btn__add",key:"more_teams",url:"/select_team",isMobile:this.state.isMobile,tip:R.default.createElement(z.FormattedMessage,{id:"team_sidebar.join",defaultMessage:"Other teams you can join."}),content:R.default.createElement("i",{className:"fa fa-plus"})})):("true"===e.window.mm_config.EnableTeamCreation||s)&&p.push(R.default.createElement(g.default,{btnClass:"team-btn__add",key:"more_teams",url:"/create_team",isMobile:this.state.isMobile,tip:R.default.createElement(z.FormattedMessage,{id:"navbar_dropdown.create",defaultMessage:"Create a New Team"}),content:R.default.createElement("i",{className:"fa fa-plus"})})),R.default.createElement("div",{className:"team-sidebar"},R.default.createElement("div",{className:"team-wrapper"},p))}}]),a}(R.default.Component);t.default=F}).call(t,a(17))}});
//# sourceMappingURL=1.0f3ab0697dbc83916442.js.map