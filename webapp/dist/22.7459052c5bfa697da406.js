webpackJsonp([22],{1729:function(e,t,a){"use strict";(function(e){function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(6),i=l(r),o=a(2),s=l(o),u=a(5),d=l(u),c=a(4),m=l(c),f=a(3),g=l(f),p=a(1),h=l(p),E=a(332),w=l(E),v=a(164),b=l(v),_=a(15),y=l(_),M=a(79),N=l(M),S=a(20),k=n(S),L=a(28),F=l(L),O=a(41),I=n(O),A=a(333),T=a(1659),C=l(T),P=a(1662),U=l(P),q=a(13),G=a(37),W=function(t){function a(t){(0,s.default)(this,a);var n=(0,m.default)(this,(a.__proto__||(0,i.default)(a)).call(this,t));n.renderSignupControls=n.renderSignupControls.bind(n);var l=!1,r="",o=!1,u=!1;if(t.location.query){var d=t.location.query.h,c=t.location.query.id;c?l=!0:d&&!y.default.getCurrentUser()?u=N.default.getGlobalItem(d):c||"true"===e.window.mm_config.EnableOpenServer||y.default.getNoAccounts()||(o=!0,r=h.default.createElement(q.FormattedMessage,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."}))}return n.state={loading:l,serverError:r,noOpenServerError:o,usedBefore:u},n}return(0,g.default)(a,t),(0,d.default)(a,[{key:"componentDidMount",value:function(){var e=this;if(k.checkVersion(),N.default.removeGlobalItem("team"),this.props.location.query){var t=this.props.location.query.h,a=this.props.location.query.d,n=this.props.location.query.id,l=null!=y.default.getCurrentUser();if((n||t)&&l)return void(0,A.addUserToTeamFromInvite)(a,t,n,function(e){I.emitInitialLoad(function(){G.browserHistory.push("/"+e.name+"/channels/town-square")})},function(){e.setState({noOpenServerError:!0,loading:!1,serverError:h.default.createElement(q.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."})})});if(n)return void(0,A.getInviteInfo)(n,function(t){t&&e.setState({serverError:"",loading:!1})},function(){e.setState({noOpenServerError:!0,loading:!1,serverError:h.default.createElement(q.FormattedMessage,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."})})});l&&I.redirectUserToDefaultTeam()}}},{key:"renderSignupControls",value:function(){var t=[];if("true"===e.window.mm_config.EnableSignUpWithEmail&&t.push(h.default.createElement(G.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},h.default.createElement("span",{className:"icon fa fa-envelope"}),h.default.createElement("span",null,h.default.createElement(q.FormattedMessage,{id:"signup.email",defaultMessage:"Email and Password"})))),"true"===e.window.mm_config.EnableSignUpWithGitLab&&t.push(h.default.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:F.default.getOAuthRoute()+"/gitlab/signup"+window.location.search},h.default.createElement("span",{className:"icon"}),h.default.createElement("span",null,h.default.createElement(q.FormattedMessage,{id:"signup.gitlab",defaultMessage:"GitLab Single-Sign-On"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithGoogle&&t.push(h.default.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:F.default.getOAuthRoute()+"/google/signup"+window.location.search},h.default.createElement("span",{className:"icon"}),h.default.createElement("span",null,h.default.createElement(q.FormattedMessage,{id:"signup.google",defaultMessage:"Google Account"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSignUpWithOffice365&&t.push(h.default.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:F.default.getOAuthRoute()+"/office365/signup"+window.location.search},h.default.createElement("span",{className:"icon"}),h.default.createElement("span",null,h.default.createElement(q.FormattedMessage,{id:"signup.office365",defaultMessage:"Office 365"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap&&t.push(h.default.createElement(G.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/signup_ldap"+window.location.search},h.default.createElement("span",{className:"icon fa fa-folder-open fa--margin-top"}),h.default.createElement("span",null,h.default.createElement(q.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"})))),"true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableSaml){var a="";a=window.location.search?"&action=signup":"?action=signup",t.push(h.default.createElement("a",{className:"btn btn-custom-login btn--full saml",key:"saml",href:"/login/sso/saml"+window.location.search+a},h.default.createElement("span",{className:"icon fa fa-lock fa--margin-top"}),h.default.createElement("span",null,e.window.mm_config.SamlLoginButtonText)))}if(0===t.length){var n=h.default.createElement(q.FormattedMessage,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});t=h.default.createElement(w.default,{error:n,margin:!0})}else if(1===t.length){if("true"===e.window.mm_config.EnableSignUpWithEmail)return G.browserHistory.push("/signup_email"+window.location.search);if("true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_config.EnableLdap)return G.browserHistory.push("/signup_ldap"+window.location.search)}return t}},{key:"render",value:function(){if(this.state.loading)return h.default.createElement(b.default,null);if(this.state.usedBefore)return h.default.createElement("div",null,h.default.createElement(q.FormattedMessage,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));var t=null;this.state.serverError&&(t=h.default.createElement("div",{className:"form-group has-error"},h.default.createElement("label",{className:"control-label"},this.state.serverError)));var a=void 0;return a=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),h.default.createElement("div",null,h.default.createElement(U.default,null),h.default.createElement("div",{className:"signup-header"},h.default.createElement(G.Link,{to:"/"},h.default.createElement("span",{className:"fa fa-chevron-left"}),h.default.createElement(q.FormattedMessage,{id:"web.header.back"}))),h.default.createElement("div",{className:"col-sm-12"},h.default.createElement("div",{className:"signup-team__container"},h.default.createElement("img",{className:"signup-team-logo",src:C.default}),h.default.createElement("div",{className:"signup__content"},h.default.createElement("h1",null,e.window.mm_config.SiteName),h.default.createElement("h4",{className:"color--light"},h.default.createElement(q.FormattedMessage,{id:"web.root.signup_info"})),h.default.createElement("div",{className:"margin--extra"},h.default.createElement("h5",null,h.default.createElement("strong",null,h.default.createElement(q.FormattedMessage,{id:"signup.title",defaultMessage:"Create an account with:"})))),a,t))))}}]),a}(h.default.Component);t.default=W,W.propTypes={location:h.default.PropTypes.object}}).call(t,a(17))}});
//# sourceMappingURL=22.7459052c5bfa697da406.js.map