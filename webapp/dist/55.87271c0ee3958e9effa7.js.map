{"version":3,"sources":["webpack:///55.87271c0ee3958e9effa7.js","webpack:///./components/claim/components/ldap_to_email.jsx"],"names":["webpackJsonp","1685","module","exports","__webpack_require__","global","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","call","default","_interopRequireDefault","defineProperty","value","_getPrototypeOf","_getPrototypeOf2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_login_mfa","_login_mfa2","_utils","Utils","_user_actions","_react","_react2","_reactIntl","LDAPToEmail","_React$Component","props","this","_this","__proto__","submit","bind","preSubmit","state","passwordError","confirmError","ldapPasswordError","serverError","e","_this2","preventDefault","ldapPassword","refs","ldappassword","localizeMessage","setState","password","passwordErr","isValidPassword","confirmPassword","passwordconfirm","checkMfa","email","requiresMfa","showMfa","err","error","message","loginId","token","_this3","switchFromLdapToEmail","formClass","createElement","className","passwordClass","ldapPasswordClass","confimClass","passwordPlaceholder","window","mm_config","LdapPasswordFieldName","content","onSubmit","FormattedMessage","id","defaultMessage","values","site","SiteName","type","name","ref","placeholder","spellCheck","Component","defaultProps","propTypes","PropTypes","string"],"mappings":"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","file":"55.87271c0ee3958e9effa7.js","sourcesContent":["webpackJsonp([55],{\n\n/***/ 1685:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(6);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(2);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(5);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(4);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(3);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _login_mfa = __webpack_require__(1667);\n\nvar _login_mfa2 = _interopRequireDefault(_login_mfa);\n\nvar _utils = __webpack_require__(11);\n\nvar Utils = _interopRequireWildcard(_utils);\n\nvar _user_actions = __webpack_require__(46);\n\nvar _react = __webpack_require__(1);\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactIntl = __webpack_require__(13);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar LDAPToEmail = function (_React$Component) {\n    (0, _inherits3.default)(LDAPToEmail, _React$Component);\n\n    function LDAPToEmail(props) {\n        (0, _classCallCheck3.default)(this, LDAPToEmail);\n\n        var _this = (0, _possibleConstructorReturn3.default)(this, (LDAPToEmail.__proto__ || (0, _getPrototypeOf2.default)(LDAPToEmail)).call(this, props));\n\n        _this.submit = _this.submit.bind(_this);\n        _this.preSubmit = _this.preSubmit.bind(_this);\n\n        _this.state = {\n            passwordError: '',\n            confirmError: '',\n            ldapPasswordError: '',\n            serverError: ''\n        };\n        return _this;\n    }\n\n    (0, _createClass3.default)(LDAPToEmail, [{\n        key: 'preSubmit',\n        value: function preSubmit(e) {\n            var _this2 = this;\n\n            e.preventDefault();\n\n            var state = {\n                passwordError: '',\n                confirmError: '',\n                ldapPasswordError: '',\n                serverError: ''\n            };\n\n            var ldapPassword = this.refs.ldappassword.value;\n            if (!ldapPassword) {\n                state.ldapPasswordError = Utils.localizeMessage('claim.ldap_to_email.ldapPasswordError', 'Please enter your AD/LDAP password.');\n                this.setState(state);\n                return;\n            }\n\n            var password = this.refs.password.value;\n            if (!password) {\n                state.passwordError = Utils.localizeMessage('claim.ldap_to_email.pwdError', 'Please enter your password.');\n                this.setState(state);\n                return;\n            }\n\n            var passwordErr = Utils.isValidPassword(password);\n            if (passwordErr !== '') {\n                this.setState({\n                    passwordError: passwordErr\n                });\n                return;\n            }\n\n            var confirmPassword = this.refs.passwordconfirm.value;\n            if (!confirmPassword || password !== confirmPassword) {\n                state.confirmError = Utils.localizeMessage('claim.ldap_to_email.pwdNotMatch', 'Passwords do not match.');\n                this.setState(state);\n                return;\n            }\n\n            state.password = password;\n            state.ldapPassword = ldapPassword;\n            this.setState(state);\n\n            (0, _user_actions.checkMfa)(this.props.email, function (requiresMfa) {\n                if (requiresMfa) {\n                    _this2.setState({ showMfa: true });\n                } else {\n                    _this2.submit(_this2.props.email, password, '', ldapPassword);\n                }\n            }, function (err) {\n                _this2.setState({ error: err.message });\n            });\n        }\n    }, {\n        key: 'submit',\n        value: function submit(loginId, password, token, ldapPassword) {\n            var _this3 = this;\n\n            (0, _user_actions.switchFromLdapToEmail)(this.props.email, password, token, ldapPassword || this.state.ldapPassword, null, function (err) {\n                return _this3.setState({ serverError: err.message, showMfa: false });\n            });\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var serverError = null;\n            var formClass = 'form-group';\n            if (this.state.serverError) {\n                serverError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.serverError\n                    )\n                );\n                formClass += ' has-error';\n            }\n\n            var passwordError = null;\n            var passwordClass = 'form-group';\n            if (this.state.passwordError) {\n                passwordError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.passwordError\n                    )\n                );\n                passwordClass += ' has-error';\n            }\n\n            var ldapPasswordError = null;\n            var ldapPasswordClass = 'form-group';\n            if (this.state.ldapPasswordError) {\n                ldapPasswordError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.ldapPasswordError\n                    )\n                );\n                ldapPasswordClass += ' has-error';\n            }\n\n            var confirmError = null;\n            var confimClass = 'form-group';\n            if (this.state.confirmError) {\n                confirmError = _react2.default.createElement(\n                    'div',\n                    { className: 'form-group has-error' },\n                    _react2.default.createElement(\n                        'label',\n                        { className: 'control-label' },\n                        this.state.confirmError\n                    )\n                );\n                confimClass += ' has-error';\n            }\n\n            var passwordPlaceholder = void 0;\n            if (global.window.mm_config.LdapPasswordFieldName) {\n                passwordPlaceholder = global.window.mm_config.LdapPasswordFieldName;\n            } else {\n                passwordPlaceholder = Utils.localizeMessage('claim.ldap_to_email.ldapPwd', 'AD/LDAP Password');\n            }\n\n            var content = void 0;\n            if (this.state.showMfa) {\n                content = _react2.default.createElement(_login_mfa2.default, {\n                    loginId: this.props.email,\n                    password: this.state.password,\n                    submit: this.submit\n                });\n            } else {\n                content = _react2.default.createElement(\n                    'form',\n                    {\n                        onSubmit: this.preSubmit,\n                        className: formClass\n                    },\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.ldap_to_email.ssoType',\n                            defaultMessage: 'Upon claiming your account, you will only be able to login with your email and password'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.ldap_to_email.email',\n                            defaultMessage: 'You will use the email {email} to login',\n                            values: {\n                                email: this.props.email\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.ldap_to_email.enterLdapPwd',\n                            defaultMessage: 'Enter your {ldapPassword} for your {site} email account',\n                            values: {\n                                ldapPassword: passwordPlaceholder,\n                                site: global.window.mm_config.SiteName\n                            }\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: ldapPasswordClass },\n                        _react2.default.createElement('input', {\n                            type: 'password',\n                            className: 'form-control',\n                            name: 'ldapPassword',\n                            ref: 'ldappassword',\n                            placeholder: passwordPlaceholder,\n                            spellCheck: 'false'\n                        })\n                    ),\n                    ldapPasswordError,\n                    _react2.default.createElement(\n                        'p',\n                        null,\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.ldap_to_email.enterPwd',\n                            defaultMessage: 'Enter a new password for your email account'\n                        })\n                    ),\n                    _react2.default.createElement(\n                        'div',\n                        { className: passwordClass },\n                        _react2.default.createElement('input', {\n                            type: 'password',\n                            className: 'form-control',\n                            name: 'password',\n                            ref: 'password',\n                            placeholder: Utils.localizeMessage('claim.ldap_to_email.pwd', 'Password'),\n                            spellCheck: 'false'\n                        })\n                    ),\n                    passwordError,\n                    _react2.default.createElement(\n                        'div',\n                        { className: confimClass },\n                        _react2.default.createElement('input', {\n                            type: 'password',\n                            className: 'form-control',\n                            name: 'passwordconfirm',\n                            ref: 'passwordconfirm',\n                            placeholder: Utils.localizeMessage('claim.ldap_to_email.confirm', 'Confirm Password'),\n                            spellCheck: 'false'\n                        })\n                    ),\n                    confirmError,\n                    _react2.default.createElement(\n                        'button',\n                        {\n                            type: 'submit',\n                            className: 'btn btn-primary'\n                        },\n                        _react2.default.createElement(_reactIntl.FormattedMessage, {\n                            id: 'claim.ldap_to_email.switchTo',\n                            defaultMessage: 'Switch account to email/password'\n                        })\n                    ),\n                    serverError\n                );\n            }\n\n            return _react2.default.createElement(\n                'div',\n                null,\n                _react2.default.createElement(\n                    'h3',\n                    null,\n                    _react2.default.createElement(_reactIntl.FormattedMessage, {\n                        id: 'claim.ldap_to_email.title',\n                        defaultMessage: 'Switch AD/LDAP Account to Email/Password'\n                    })\n                ),\n                content\n            );\n        }\n    }]);\n    return LDAPToEmail;\n}(_react2.default.Component); // Copyright (c) 2015 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nexports.default = LDAPToEmail;\n\n\nLDAPToEmail.defaultProps = {};\nLDAPToEmail.propTypes = {\n    email: _react2.default.PropTypes.string\n};\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(17)))\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 55.87271c0ee3958e9effa7.js","// Copyright (c) 2015 Mattermost, Inc. All Rights Reserved.\n// See License.txt for license information.\n\nimport LoginMfa from 'components/login/components/login_mfa.jsx';\n\nimport * as Utils from 'utils/utils.jsx';\n\nimport {checkMfa, switchFromLdapToEmail} from 'actions/user_actions.jsx';\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nexport default class LDAPToEmail extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.submit = this.submit.bind(this);\n        this.preSubmit = this.preSubmit.bind(this);\n\n        this.state = {\n            passwordError: '',\n            confirmError: '',\n            ldapPasswordError: '',\n            serverError: ''\n        };\n    }\n\n    preSubmit(e) {\n        e.preventDefault();\n\n        var state = {\n            passwordError: '',\n            confirmError: '',\n            ldapPasswordError: '',\n            serverError: ''\n        };\n\n        const ldapPassword = this.refs.ldappassword.value;\n        if (!ldapPassword) {\n            state.ldapPasswordError = Utils.localizeMessage('claim.ldap_to_email.ldapPasswordError', 'Please enter your AD/LDAP password.');\n            this.setState(state);\n            return;\n        }\n\n        const password = this.refs.password.value;\n        if (!password) {\n            state.passwordError = Utils.localizeMessage('claim.ldap_to_email.pwdError', 'Please enter your password.');\n            this.setState(state);\n            return;\n        }\n\n        const passwordErr = Utils.isValidPassword(password);\n        if (passwordErr !== '') {\n            this.setState({\n                passwordError: passwordErr\n            });\n            return;\n        }\n\n        const confirmPassword = this.refs.passwordconfirm.value;\n        if (!confirmPassword || password !== confirmPassword) {\n            state.confirmError = Utils.localizeMessage('claim.ldap_to_email.pwdNotMatch', 'Passwords do not match.');\n            this.setState(state);\n            return;\n        }\n\n        state.password = password;\n        state.ldapPassword = ldapPassword;\n        this.setState(state);\n\n        checkMfa(\n            this.props.email,\n            (requiresMfa) => {\n                if (requiresMfa) {\n                    this.setState({showMfa: true});\n                } else {\n                    this.submit(this.props.email, password, '', ldapPassword);\n                }\n            },\n            (err) => {\n                this.setState({error: err.message});\n            }\n        );\n    }\n\n    submit(loginId, password, token, ldapPassword) {\n        switchFromLdapToEmail(\n            this.props.email,\n            password,\n            token,\n            ldapPassword || this.state.ldapPassword,\n            null,\n            (err) => this.setState({serverError: err.message, showMfa: false})\n        );\n    }\n\n    render() {\n        let serverError = null;\n        let formClass = 'form-group';\n        if (this.state.serverError) {\n            serverError = <div className='form-group has-error'><label className='control-label'>{this.state.serverError}</label></div>;\n            formClass += ' has-error';\n        }\n\n        let passwordError = null;\n        let passwordClass = 'form-group';\n        if (this.state.passwordError) {\n            passwordError = <div className='form-group has-error'><label className='control-label'>{this.state.passwordError}</label></div>;\n            passwordClass += ' has-error';\n        }\n\n        let ldapPasswordError = null;\n        let ldapPasswordClass = 'form-group';\n        if (this.state.ldapPasswordError) {\n            ldapPasswordError = <div className='form-group has-error'><label className='control-label'>{this.state.ldapPasswordError}</label></div>;\n            ldapPasswordClass += ' has-error';\n        }\n\n        let confirmError = null;\n        let confimClass = 'form-group';\n        if (this.state.confirmError) {\n            confirmError = <div className='form-group has-error'><label className='control-label'>{this.state.confirmError}</label></div>;\n            confimClass += ' has-error';\n        }\n\n        let passwordPlaceholder;\n        if (global.window.mm_config.LdapPasswordFieldName) {\n            passwordPlaceholder = global.window.mm_config.LdapPasswordFieldName;\n        } else {\n            passwordPlaceholder = Utils.localizeMessage('claim.ldap_to_email.ldapPwd', 'AD/LDAP Password');\n        }\n\n        let content;\n        if (this.state.showMfa) {\n            content = (\n                <LoginMfa\n                    loginId={this.props.email}\n                    password={this.state.password}\n                    submit={this.submit}\n                />\n            );\n        } else {\n            content = (\n                <form\n                    onSubmit={this.preSubmit}\n                    className={formClass}\n                >\n                    <p>\n                        <FormattedMessage\n                            id='claim.ldap_to_email.ssoType'\n                            defaultMessage='Upon claiming your account, you will only be able to login with your email and password'\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='claim.ldap_to_email.email'\n                            defaultMessage='You will use the email {email} to login'\n                            values={{\n                                email: this.props.email\n                            }}\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='claim.ldap_to_email.enterLdapPwd'\n                            defaultMessage='Enter your {ldapPassword} for your {site} email account'\n                            values={{\n                                ldapPassword: passwordPlaceholder,\n                                site: global.window.mm_config.SiteName\n                            }}\n                        />\n                    </p>\n                    <div className={ldapPasswordClass}>\n                        <input\n                            type='password'\n                            className='form-control'\n                            name='ldapPassword'\n                            ref='ldappassword'\n                            placeholder={passwordPlaceholder}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {ldapPasswordError}\n                    <p>\n                        <FormattedMessage\n                            id='claim.ldap_to_email.enterPwd'\n                            defaultMessage='Enter a new password for your email account'\n                        />\n                    </p>\n                    <div className={passwordClass}>\n                        <input\n                            type='password'\n                            className='form-control'\n                            name='password'\n                            ref='password'\n                            placeholder={Utils.localizeMessage('claim.ldap_to_email.pwd', 'Password')}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {passwordError}\n                    <div className={confimClass}>\n                        <input\n                            type='password'\n                            className='form-control'\n                            name='passwordconfirm'\n                            ref='passwordconfirm'\n                            placeholder={Utils.localizeMessage('claim.ldap_to_email.confirm', 'Confirm Password')}\n                            spellCheck='false'\n                        />\n                    </div>\n                    {confirmError}\n                    <button\n                        type='submit'\n                        className='btn btn-primary'\n                    >\n                        <FormattedMessage\n                            id='claim.ldap_to_email.switchTo'\n                            defaultMessage='Switch account to email/password'\n                        />\n                    </button>\n                    {serverError}\n                </form>\n            );\n        }\n\n        return (\n            <div>\n                <h3>\n                    <FormattedMessage\n                        id='claim.ldap_to_email.title'\n                        defaultMessage='Switch AD/LDAP Account to Email/Password'\n                    />\n                </h3>\n                {content}\n            </div>\n        );\n    }\n}\n\nLDAPToEmail.defaultProps = {\n};\nLDAPToEmail.propTypes = {\n    email: React.PropTypes.string\n};\n\n\n\n// WEBPACK FOOTER //\n// ./components/claim/components/ldap_to_email.jsx"],"sourceRoot":""}