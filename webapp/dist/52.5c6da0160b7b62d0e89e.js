webpackJsonp([52],{1688:function(e,t,a){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(71),n=l(s),u=a(6),i=l(u),d=a(2),m=l(d),o=a(5),c=l(o),f=a(4),E=l(f),p=a(3),h=l(p),g=a(333),_=a(165),M=a(8),v=l(M),b=a(141),N=r(b),T=a(1659),y=l(T),k=a(1),L=l(k),S=a(30),F=l(S),A=a(27),w=a(13),x=function(e){function t(e){(0,m.default)(this,t);var a=(0,E.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.submitBack=a.submitBack.bind(a),a.submitNext=a.submitNext.bind(a),a.handleFocus=a.handleFocus.bind(a),a.state={nameError:"",isLoading:!1},a}return(0,h.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){(0,_.trackEvent)("signup","signup_team_02_url")}},{key:"submitBack",value:function(e){e.preventDefault(),this.props.state.wizard="display_name",this.props.updateParent(this.props.state)}},{key:"submitNext",value:function(e){var t=this;e.preventDefault();var a=F.default.findDOMNode(this.refs.name).value.trim(),r=N.cleanUpUrlable(a),l=/^[a-z]+([a-z\-0-9]+|(__)?)[a-z0-9]+$/g;if(!a)return void this.setState({nameError:L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.required",defaultMessage:"This field is required"})});if(r.length<v.default.MIN_TEAMNAME_LENGTH||r.length>v.default.MAX_TEAMNAME_LENGTH)return void this.setState({nameError:L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.charLength",defaultMessage:"Name must be {min} or more characters up to a maximum of {max}",values:{min:v.default.MIN_TEAMNAME_LENGTH,max:v.default.MAX_TEAMNAME_LENGTH}})});if(r!==a||!l.test(a))return void this.setState({nameError:L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.regex",defaultMessage:"Use only lower case letters, numbers and dashes. Must start with a letter and can't end in a dash."})});for(var s=0;s<v.default.RESERVED_TEAM_NAMES.length;s++)if(0===r.indexOf(v.default.RESERVED_TEAM_NAMES[s]))return void this.setState({nameError:L.default.createElement(w.FormattedHTMLMessage,{id:"create_team.team_url.taken",defaultMessage:'This URL <a href="https://docs.mattermost.com/help/getting-started/creating-teams.html#team-url" target="_blank">starts with a reserved word</a> or is unavailable. Please try another.'})});this.setState({isLoading:!0});var u=JSON.parse((0,n.default)(this.props.state));u.team.type="O",u.team.name=a,(0,g.checkIfTeamExists)(a,function(e){if(e)return t.setState({nameError:L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.unavailable",defaultMessage:"This URL is taken or unavailable. Please try another."})}),void t.setState({isLoading:!1});(0,g.createTeam)(u.team,function(){(0,_.trackEvent)("signup","signup_team_03_complete")},function(e){t.setState({nameError:e.message}),t.setState({isLoading:!1})})},function(e){t.setState({nameError:e.message})})}},{key:"handleFocus",value:function(e){e.preventDefault(),e.currentTarget.select()}},{key:"render",value:function(){var e=null,t="form-group";this.state.nameError&&(e=L.default.createElement("label",{className:"control-label"},this.state.nameError),t+=" has-error");var a=N.getSiteURL()+"/",r=L.default.createElement(A.Tooltip,{id:"urlTooltip"},a),l=L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.finish",defaultMessage:"Finish"});return this.state.isLoading&&(l=L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.creatingTeam",defaultMessage:"Creating team..."})),L.default.createElement("div",null,L.default.createElement("form",null,L.default.createElement("img",{className:"signup-team-logo",src:y.default}),L.default.createElement("h2",null,L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.teamUrl",defaultMessage:"Team URL"})),L.default.createElement("div",{className:t},L.default.createElement("div",{className:"row"},L.default.createElement("div",{className:"col-sm-11"},L.default.createElement("div",{className:"input-group input-group--limit"},L.default.createElement(A.OverlayTrigger,{delayShow:v.default.OVERLAY_TIME_DELAY,placement:"top",overlay:r},L.default.createElement("span",{className:"input-group-addon"},a)),L.default.createElement("input",{type:"text",ref:"name",className:"form-control",placeholder:"",maxLength:"128",defaultValue:this.props.state.team.name,autoFocus:!0,onFocus:this.handleFocus,spellCheck:"false"})))),e),L.default.createElement("p",null,L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.webAddress",defaultMessage:"Choose the web address of your new team:"})),L.default.createElement("ul",{className:"color--light"},L.default.createElement(w.FormattedHTMLMessage,{id:"create_team.team_url.hint",defaultMessage:"<li>Short and memorable is best</li> <li>Use lowercase letters, numbers and dashes</li> <li>Must start with a letter and can't end in a dash</li>"})),L.default.createElement("div",{className:"margin--extra"},L.default.createElement(A.Button,{type:"submit",bsStyle:"primary",disabled:this.state.isLoading,onClick:this.submitNext},l)),L.default.createElement("div",{className:"margin--extra"},L.default.createElement("a",{href:"#",onClick:this.submitBack},L.default.createElement(w.FormattedMessage,{id:"create_team.team_url.back",defaultMessage:"Back to previous step"})))))}}]),t}(L.default.Component);t.default=x,x.propTypes={state:L.default.PropTypes.object,updateParent:L.default.PropTypes.func}}});
//# sourceMappingURL=52.5c6da0160b7b62d0e89e.js.map