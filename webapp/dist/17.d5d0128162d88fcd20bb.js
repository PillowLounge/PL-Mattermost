webpackJsonp([17],{1713:function(e,t,a){"use strict";(function(e){function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(9),r=n(s),i=a(6),d=n(i),u=a(2),o=n(u),c=a(4),p=n(c),f=a(5),h=n(f),m=a(3),_=n(m),g=a(1),v=n(g),A=a(15),E=n(A),M=a(1660),S=n(M),y=a(1669),C=l(y),k=a(11),O=a(1665),b=n(O),w=a(13),N=a(2012),F=n(N),I=function(t){function a(e){(0,o.default)(this,a);var t=(0,p.default)(this,(a.__proto__||(0,d.default)(a)).call(this,e));t.handleIntegrationChange=t.handleIntegrationChange.bind(t),t.deleteOAuthApp=t.deleteOAuthApp.bind(t);var l=E.default.getCurrentId();return t.state={oauthApps:S.default.getOAuthApps(l),loading:!S.default.hasReceivedOAuthApps(l)},t}return(0,_.default)(a,t),(0,h.default)(a,null,[{key:"propTypes",get:function(){return{team:v.default.PropTypes.object}}}]),(0,h.default)(a,[{key:"componentDidMount",value:function(){S.default.addChangeListener(this.handleIntegrationChange),"true"===window.mm_config.EnableOAuthServiceProvider&&C.listOAuthApps(E.default.getCurrentId())}},{key:"componentWillUnmount",value:function(){S.default.removeChangeListener(this.handleIntegrationChange)}},{key:"handleIntegrationChange",value:function(){var e=E.default.getCurrentId();this.setState({oauthApps:S.default.getOAuthApps(e),loading:!S.default.hasReceivedOAuthApps(e)})}},{key:"deleteOAuthApp",value:function(e){var t=E.default.getCurrentId();C.deleteOAuthApp(e.id,t)}},{key:"oauthAppCompare",value:function(e,t){var a=e.name;a||(a=(0,k.localizeMessage)("installed_integrations.unnamed_oauth_app","Unnamed OAuth 2.0 Application"));var l=t.name;return l||(l=(0,k.localizeMessage)("installed_integrations.unnamed_oauth_app","Unnamed OAuth 2.0 Application")),a.localeCompare(l)}},{key:"render",value:function(){var t=this,a=this.state.oauthApps.sort(this.oauthAppCompare).map(function(e){return v.default.createElement(F.default,{key:e.id,oauthApp:e,onDelete:t.deleteOAuthApp})}),l=E.default.isSystemAdminForCurrentUser(),n=e.mm_config,s="true"===n.EnableOAuthServiceProvider&&(l||"true"!==n.EnableOnlyAdminIntegrations),i=void 0;return s&&(i={addLink:"/"+this.props.team.name+"/integrations/oauth2-apps/add",addText:(0,k.localizeMessage)("installed_oauth_apps.add","Add OAuth 2.0 Application")}),v.default.createElement(b.default,(0,r.default)({header:v.default.createElement(w.FormattedMessage,{id:"installed_oauth_apps.header",defaultMessage:"OAuth 2.0 Applications"}),helpText:v.default.createElement(w.FormattedMessage,{id:"installed_oauth_apps.help",defaultMessage:"Create OAuth 2.0 applications to securely integrate bots and third-party applications with Mattermost. Please see {link} to learn more.",values:{link:v.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.mattermost.com/developer/oauth-2-0-applications.html"},v.default.createElement(w.FormattedMessage,{id:"installed_oauth_apps.helpLink",defaultMessage:"documentation"}))}}),emptyText:v.default.createElement(w.FormattedMessage,{id:"installed_oauth_apps.empty",defaultMessage:"No OAuth 2.0 Applications found"}),searchPlaceholder:(0,k.localizeMessage)("installed_oauth_apps.search","Search OAuth 2.0 Applications"),loading:this.state.loading},i),a)}}]),a}(v.default.Component);t.default=I}).call(t,a(17))},2012:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(6),r=n(s),i=a(2),d=n(i),u=a(4),o=n(u),c=a(5),p=n(c),f=a(3),h=n(f),m=a(1),_=n(m),g=a(332),v=n(g),A=a(11),E=l(A),M=a(13),S=a(569),y=a(1666),C=n(y),k="***************",O=function(e){function t(e){(0,d.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleShowClientSecret=a.handleShowClientSecret.bind(a),a.handleHideClientScret=a.handleHideClientScret.bind(a),a.handleRegenerate=a.handleRegenerate.bind(a),a.handleDelete=a.handleDelete.bind(a),a.matchesFilter=a.matchesFilter.bind(a),a.state={clientSecret:k},a}return(0,h.default)(t,e),(0,p.default)(t,null,[{key:"propTypes",get:function(){return{oauthApp:_.default.PropTypes.object.isRequired,onDelete:_.default.PropTypes.func.isRequired,filter:_.default.PropTypes.string}}}]),(0,p.default)(t,[{key:"handleShowClientSecret",value:function(e){e.preventDefault(),this.setState({clientSecret:this.props.oauthApp.client_secret})}},{key:"handleHideClientScret",value:function(e){e.preventDefault(),this.setState({clientSecret:k})}},{key:"handleRegenerate",value:function(e){var t=this;e.preventDefault(),(0,S.regenerateOAuthAppSecret)(this.props.oauthApp.id,function(a){t.props.oauthApp.client_secret=a.client_secret,t.handleShowClientSecret(e)},function(e){t.setState({error:e.message})})}},{key:"handleDelete",value:function(){this.props.onDelete(this.props.oauthApp)}},{key:"matchesFilter",value:function(e,t){return!t||-1!==e.name.toLowerCase().indexOf(t)}},{key:"render",value:function(){var e=this.props.oauthApp,t=void 0;if(this.state.error&&(t=_.default.createElement(v.default,{error:this.state.error})),!this.matchesFilter(e,this.props.filter))return null;var a=void 0;a=e.name?e.name:_.default.createElement(M.FormattedMessage,{id:"installed_integrations.unnamed_oauth_app",defaultMessage:"Unnamed OAuth 2.0 Application"});var l=void 0;e.description&&(l=_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__description"},e.description)));var n=_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__url"},_.default.createElement(M.FormattedMessage,{id:"installed_integrations.callback_urls",defaultMessage:"Callback URLs: {urls}",values:{urls:e.callback_urls.join(", ")}}))),s=void 0;s=e.is_trusted?E.localizeMessage("installed_oauth_apps.trusted.yes","Yes"):E.localizeMessage("installed_oauth_apps.trusted.no","No");var r=void 0;r=this.state.clientSecret===k?_.default.createElement("a",{href:"#",onClick:this.handleShowClientSecret},_.default.createElement(M.FormattedMessage,{id:"installed_integrations.showSecret",defaultMessage:"Show Secret"})):_.default.createElement("a",{href:"#",onClick:this.handleHideClientScret},_.default.createElement(M.FormattedMessage,{id:"installed_integrations.hideSecret",defaultMessage:"Hide Secret"}));var i=_.default.createElement("a",{href:"#",onClick:this.handleRegenerate},_.default.createElement(M.FormattedMessage,{id:"installed_integrations.regenSecret",defaultMessage:"Regenerate Secret"})),d=void 0;return e.icon_url&&(d=_.default.createElement("div",{className:"integration__icon integration-list__icon"},_.default.createElement("img",{src:e.icon_url}))),_.default.createElement("div",{className:"backstage-list__item"},d,_.default.createElement("div",{className:"item-details"},_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__name"},a)),t,l,_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__url"},_.default.createElement(M.FormattedHTMLMessage,{id:"installed_oauth_apps.is_trusted",defaultMessage:"Is Trusted: <strong>{isTrusted}</strong>",values:{isTrusted:s}}))),_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__token"},_.default.createElement(M.FormattedHTMLMessage,{id:"installed_integrations.client_id",defaultMessage:"Client ID: <strong>{clientId}</strong>",values:{clientId:e.id}}))),_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__token"},_.default.createElement(M.FormattedHTMLMessage,{id:"installed_integrations.client_secret",defaultMessage:"Client Secret: <strong>{clientSecret}</strong>",values:{clientSecret:this.state.clientSecret}}))),n,_.default.createElement("div",{className:"item-details__row"},_.default.createElement("span",{className:"item-details__creation"},_.default.createElement(M.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:E.displayUsername(e.creator_id),createAt:e.create_at}})))),_.default.createElement("div",{className:"item-actions"},r," - ",i," - ",_.default.createElement(C.default,{messageId:"installed_oauth_apps.delete.confirm",onDelete:this.handleDelete})))}}]),t}(_.default.Component);t.default=O}});
//# sourceMappingURL=17.d5d0128162d88fcd20bb.js.map