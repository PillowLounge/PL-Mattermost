webpackJsonp([55],{1685:function(e,a,r){"use strict";(function(e){function t(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a.default=e,a}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=r(6),o=s(l),d=r(2),i=s(d),m=r(5),n=s(m),u=r(4),c=s(u),p=r(3),f=s(p),w=r(1667),h=s(w),E=r(11),v=t(E),_=r(46),g=r(1),P=s(g),b=r(13),M=function(a){function r(e){(0,i.default)(this,r);var a=(0,c.default)(this,(r.__proto__||(0,o.default)(r)).call(this,e));return a.submit=a.submit.bind(a),a.preSubmit=a.preSubmit.bind(a),a.state={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""},a}return(0,f.default)(r,a),(0,n.default)(r,[{key:"preSubmit",value:function(e){var a=this;e.preventDefault();var r={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""},t=this.refs.ldappassword.value;if(!t)return r.ldapPasswordError=v.localizeMessage("claim.ldap_to_email.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(r);var s=this.refs.password.value;if(!s)return r.passwordError=v.localizeMessage("claim.ldap_to_email.pwdError","Please enter your password."),void this.setState(r);var l=v.isValidPassword(s);if(""!==l)return void this.setState({passwordError:l});var o=this.refs.passwordconfirm.value;if(!o||s!==o)return r.confirmError=v.localizeMessage("claim.ldap_to_email.pwdNotMatch","Passwords do not match."),void this.setState(r);r.password=s,r.ldapPassword=t,this.setState(r),(0,_.checkMfa)(this.props.email,function(e){e?a.setState({showMfa:!0}):a.submit(a.props.email,s,"",t)},function(e){a.setState({error:e.message})})}},{key:"submit",value:function(e,a,r,t){var s=this;(0,_.switchFromLdapToEmail)(this.props.email,a,r,t||this.state.ldapPassword,null,function(e){return s.setState({serverError:e.message,showMfa:!1})})}},{key:"render",value:function(){var a=null,r="form-group";this.state.serverError&&(a=P.default.createElement("div",{className:"form-group has-error"},P.default.createElement("label",{className:"control-label"},this.state.serverError)),r+=" has-error");var t=null,s="form-group";this.state.passwordError&&(t=P.default.createElement("div",{className:"form-group has-error"},P.default.createElement("label",{className:"control-label"},this.state.passwordError)),s+=" has-error");var l=null,o="form-group";this.state.ldapPasswordError&&(l=P.default.createElement("div",{className:"form-group has-error"},P.default.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),o+=" has-error");var d=null,i="form-group";this.state.confirmError&&(d=P.default.createElement("div",{className:"form-group has-error"},P.default.createElement("label",{className:"control-label"},this.state.confirmError)),i+=" has-error");var m=void 0;m=e.window.mm_config.LdapPasswordFieldName?e.window.mm_config.LdapPasswordFieldName:v.localizeMessage("claim.ldap_to_email.ldapPwd","AD/LDAP Password");var n=void 0;return n=this.state.showMfa?P.default.createElement(h.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):P.default.createElement("form",{onSubmit:this.preSubmit,className:r},P.default.createElement("p",null,P.default.createElement(b.FormattedMessage,{id:"claim.ldap_to_email.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with your email and password"})),P.default.createElement("p",null,P.default.createElement(b.FormattedMessage,{id:"claim.ldap_to_email.email",defaultMessage:"You will use the email {email} to login",values:{email:this.props.email}})),P.default.createElement("p",null,P.default.createElement(b.FormattedMessage,{id:"claim.ldap_to_email.enterLdapPwd",defaultMessage:"Enter your {ldapPassword} for your {site} email account",values:{ldapPassword:m,site:e.window.mm_config.SiteName}})),P.default.createElement("div",{className:o},P.default.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",placeholder:m,spellCheck:"false"})),l,P.default.createElement("p",null,P.default.createElement(b.FormattedMessage,{id:"claim.ldap_to_email.enterPwd",defaultMessage:"Enter a new password for your email account"})),P.default.createElement("div",{className:s},P.default.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:v.localizeMessage("claim.ldap_to_email.pwd","Password"),spellCheck:"false"})),t,P.default.createElement("div",{className:i},P.default.createElement("input",{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:v.localizeMessage("claim.ldap_to_email.confirm","Confirm Password"),spellCheck:"false"})),d,P.default.createElement("button",{type:"submit",className:"btn btn-primary"},P.default.createElement(b.FormattedMessage,{id:"claim.ldap_to_email.switchTo",defaultMessage:"Switch account to email/password"})),a),P.default.createElement("div",null,P.default.createElement("h3",null,P.default.createElement(b.FormattedMessage,{id:"claim.ldap_to_email.title",defaultMessage:"Switch AD/LDAP Account to Email/Password"})),n)}}]),r}(P.default.Component);a.default=M,M.defaultProps={},M.propTypes={email:P.default.PropTypes.string}}).call(a,r(17))}});
//# sourceMappingURL=55.87271c0ee3958e9effa7.js.map