webpackJsonp([18],{1712:function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(6),l=o(i),s=a(2),d=o(s),r=a(4),u=o(r),c=a(5),m=o(c),f=a(3),h=o(f),g=a(1665),p=o(g),_=a(2011),k=o(_),b=a(24),v=o(b),y=a(1660),w=o(y),C=a(23),E=o(C),M=a(15),W=o(M),I=a(1664),P=a(20),L=n(P),T=a(11),N=n(T),F=a(1),R=o(F),D=a(13),U=function(e){function t(e){(0,d.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));a.handleIntegrationChange=a.handleIntegrationChange.bind(a),a.handleUserChange=a.handleUserChange.bind(a),a.deleteIncomingWebhook=a.deleteIncomingWebhook.bind(a);var n=E.default.getCurrentId();return a.state={incomingWebhooks:w.default.getIncomingWebhooks(n),loading:!w.default.hasReceivedIncomingWebhooks(n),users:W.default.getProfiles()},a}return(0,h.default)(t,e),(0,m.default)(t,null,[{key:"propTypes",get:function(){return{team:R.default.PropTypes.object,user:R.default.PropTypes.object,isAdmin:R.default.PropTypes.bool}}}]),(0,m.default)(t,[{key:"componentDidMount",value:function(){w.default.addChangeListener(this.handleIntegrationChange),W.default.addChangeListener(this.handleUserChange),"true"===window.mm_config.EnableIncomingWebhooks&&(0,I.loadIncomingHooks)()}},{key:"componentWillUnmount",value:function(){w.default.removeChangeListener(this.handleIntegrationChange),W.default.removeChangeListener(this.handleUserChange)}},{key:"handleIntegrationChange",value:function(){var e=E.default.getCurrentId();this.setState({incomingWebhooks:w.default.getIncomingWebhooks(e),loading:!w.default.hasReceivedIncomingWebhooks(e)})}},{key:"handleUserChange",value:function(){this.setState({users:W.default.getProfiles()})}},{key:"deleteIncomingWebhook",value:function(e){L.deleteIncomingHook(e.id)}},{key:"incomingWebhookCompare",value:function(e,t){var a=e.display_name;if(!a){var n=v.default.get(e.channel_id);a=n?n.display_name:N.localizeMessage("installed_incoming_webhooks.unknown_channel","A Private Webhook")}var o=t.display_name;if(!o){var i=v.default.get(t.channel_id);o=i?i.display_name:N.localizeMessage("installed_incoming_webhooks.unknown_channel","A Private Webhook")}return a.localeCompare(o)}},{key:"render",value:function(){var e=this,t=this.state.incomingWebhooks.sort(this.incomingWebhookCompare).map(function(t){var a=e.props.isAdmin||e.props.user.id===t.user_id;return R.default.createElement(k.default,{key:t.id,incomingWebhook:t,onDelete:e.deleteIncomingWebhook,creator:e.state.users[t.user_id]||{},canChange:a,team:e.props.team})});return R.default.createElement(p.default,{header:R.default.createElement(D.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Installed Incoming Webhooks"}),addText:R.default.createElement(D.FormattedMessage,{id:"installed_incoming_webhooks.add",defaultMessage:"Add Incoming Webhook"}),addLink:"/"+this.props.team.name+"/integrations/incoming_webhooks/add",emptyText:R.default.createElement(D.FormattedMessage,{id:"installed_incoming_webhooks.empty",defaultMessage:"No incoming webhooks found"}),helpText:R.default.createElement(D.FormattedMessage,{id:"installed_incoming_webhooks.help",defaultMessage:"Create incoming webhook URLs for use in external integrations. Please see {link} to learn more.",values:{link:R.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://docs.mattermost.com/developer/webhooks-incoming.html"},R.default.createElement(D.FormattedMessage,{id:"installed_incoming_webhooks.helpLink",defaultMessage:"documentation"}))}}),searchPlaceholder:N.localizeMessage("installed_incoming_webhooks.search","Search Incoming Webhooks"),loading:this.state.loading},t)}}]),t}(R.default.Component);t.default=U},2011:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(6),i=n(o),l=a(2),s=n(l),d=a(4),r=n(d),u=a(5),c=n(u),m=a(3),f=n(m),h=a(1),g=n(h),p=a(1666),_=n(p),k=a(24),b=n(k),v=a(141),y=a(13),w=a(335),C=function(e){function t(e){(0,s.default)(this,t);var a=(0,r.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleDelete=a.handleDelete.bind(a),a}return(0,f.default)(t,e),(0,c.default)(t,null,[{key:"propTypes",get:function(){return{incomingWebhook:g.default.PropTypes.object.isRequired,onDelete:g.default.PropTypes.func.isRequired,filter:g.default.PropTypes.string,creator:g.default.PropTypes.object.isRequired,canChange:g.default.PropTypes.bool.isRequired,team:g.default.PropTypes.object.isRequired}}}]),(0,c.default)(t,[{key:"handleDelete",value:function(){this.props.onDelete(this.props.incomingWebhook)}},{key:"matchesFilter",value:function(e,t,a){return!a||(-1!==e.display_name.toLowerCase().indexOf(a)||-1!==e.description.toLowerCase().indexOf(a)||!(!e.channel_id||!t||-1===t.name.toLowerCase().indexOf(a)))}},{key:"render",value:function(){var e=this.props.incomingWebhook,t=b.default.get(e.channel_id),a=this.props.filter?this.props.filter.toLowerCase():"";if(!this.matchesFilter(e,t,a))return null;var n=void 0;n=e.display_name?e.display_name:t?t.display_name:g.default.createElement(y.FormattedMessage,{id:"installed_incoming_webhooks.unknown_channel",defaultMessage:"A Private Webhook"});var o=null;e.description&&(o=g.default.createElement("div",{className:"item-details__row"},g.default.createElement("span",{className:"item-details__description"},e.description)));var i=null;return this.props.canChange&&(i=g.default.createElement("div",{className:"item-actions"},g.default.createElement(w.Link,{to:"/"+this.props.team.name+"/integrations/incoming_webhooks/edit?id="+e.id},g.default.createElement(y.FormattedMessage,{id:"installed_integrations.edit",defaultMessage:"Edit"}))," - ",g.default.createElement(_.default,{messageId:"installed_incoming_webhooks.delete.confirm",onDelete:this.handleDelete}))),g.default.createElement("div",{className:"backstage-list__item"},g.default.createElement("div",{className:"item-details"},g.default.createElement("div",{className:"item-details__row"},g.default.createElement("span",{className:"item-details__name"},n)),o,g.default.createElement("div",{className:"item-details__row"},g.default.createElement("span",{className:"item-details__url"},g.default.createElement(y.FormattedMessage,{id:"installed_integrations.url",defaultMessage:"URL: {url}",values:{url:(0,v.getSiteURL)()+"/hooks/"+e.id}}))),g.default.createElement("div",{className:"item-details__row"},g.default.createElement("span",{className:"item-details__creation"},g.default.createElement(y.FormattedMessage,{id:"installed_integrations.creation",defaultMessage:"Created by {creator} on {createAt, date, full}",values:{creator:this.props.creator.username,createAt:e.create_at}})))),i)}}]),t}(g.default.Component);t.default=C}});
//# sourceMappingURL=18.ac9d1c8f1ddab2e18cc2.js.map